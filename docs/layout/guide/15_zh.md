# 第 15 章 过孔设置

阅读以下主题以了解更多关于过孔设置的信息。

如需了解如何在设计中为网络添加虚拟过孔，请参阅"虚拟过孔"章节。

## 定义钻孔层对

*钻孔层对*是指定钻孔起始层和结束层的层号对。如果要在设计中使用一个或多个部分过孔，必须为过孔类型中指定的每个层变化定义一个钻孔层对。

在定义部分过孔类型或开始布线之前定义钻孔层对；定义钻孔层对后，`SailWind Layout` 会阻止执行不符合已定义钻孔层对的操作（例如定义过孔类型或在布线期间更改层）。

如果在设计中同时使用通孔和部分过孔，还必须为通孔默认过孔类型创建一个"全层"钻孔层对；创建任何部分过孔类型后，`SailWind Layout` 要求为所有过孔类型（包括通孔默认类型）定义钻孔层对。

🏃‍♂️‍**步骤**

1. 点击 **Setup > Drill Pairs** 菜单项。

2. 在钻孔层对设置对话框中，点击 **Add** 向钻孔层对列表添加一行。

3. 从起始层列表中选择起始层。层号会自动显示在列表左侧。

4. 从结束层列表中选择结束层。层号会自动显示在列表左侧。

5. 重复步骤 2 至 4 添加其他钻孔层对。您可以更改钻孔层对的起始层或结束层，或删除钻孔层对。

6. 点击 **OK** 保存钻孔层对。


> [!tip] 在默认层模式下添加部分过孔时最多可使用 30 个电气层。在增加层模式下添加部分过孔时最多可使用 64 个电气层。

## 创建过孔

可以创建三种基本过孔类型：通孔、部分和非钻孔单层（部分过孔类型包括盲孔和埋孔）。

### 创建通孔过孔类型

可以创建通孔过孔类型用于过孔和/或虚拟过孔。

😎**前提**

如果设计中存在任何部分钻孔层对，在执行此过程前还必须存在"全层"钻孔层对。参见"定义钻孔层对"。

🏃‍♂️‍**步骤**

1. 点击 **Setup > Pad Stacks** 菜单项。

2. 在焊盘堆叠属性对话框中，在焊盘堆叠类型区域点击 Via。

3. 点击 **Add Via** 向封装名称列表添加一行。所有先前定义的过孔类型列表会显示在封装名称列表中。

4. 在过孔区域的名称框中，输入新过孔的名称。

5. 点击 Through 表示这是通孔过孔类型。

6. 如果需要，按以下方式自定义各层的焊盘：

    a. 从"`Sh: Sz: Layer:`"列表中选择层。更多信息请参见"焊盘堆叠默认层"和"第 209 页的阻焊与锡膏控制"。

    b. 在参数区域，指定所有三个**Pad**、**Thermal**和**Antipad**选项卡的设置。设计中使用的焊盘样式会根据情况自动选择。当焊盘位于平面内时使用散热和反焊盘样式。更多信息请参见"第 797 页的设计规则与焊盘堆叠-散热和反焊盘"。

    c. 根据需要为其他层重复步骤 a 和 b。

7. 点击 **OK** 保存新过孔类型。

### 创建部分过孔类型

可以创建部分过孔类型用于过孔和/或虚拟过孔。

部分过孔可以是盲孔或埋孔。

更多信息请参见"创建通孔过孔类型"和"为虚拟过孔创建非钻孔单层过孔类型"。

😎**前提**

必须存在指定新部分过孔类型起始和结束层的钻孔层对。更多信息请参见"定义钻孔层对"。

🏃‍♂️‍**步骤**

1. 点击 **Setup > Pad Stacks** 菜单项。

2. 在焊盘堆叠属性对话框中，在焊盘堆叠类型区域点击 Via。

3. 点击 **Add Via** 向封装名称列表添加一行。所有先前定义的过孔类型列表会显示在封装名称列表中。

4. 在过孔区域的名称框中输入过孔类型的名称。

5. 点击 Partial 表示这是盲孔或埋孔类型。

6. 从起始层和结束层列表中选择起始层和结束层。

7. 如果需要，按以下方式自定义各层的焊盘：

    a. 从"`Sh: Sz: Layer:`"列表中选择层。更多信息请参见"焊盘堆叠默认层"和"阻焊与锡膏控制"。

    b. 在参数区域，指定所有三个**Pad**、**Thermal**和**Antipad**选项卡的设置。设计中使用的焊盘样式会根据情况自动选择。当焊盘位于平面内时使用散热和反焊盘样式。更多信息请参见"第 797 页的设计规则与焊盘堆叠-散热和反焊盘"。

    c. 根据需要为其他层重复步骤 a 和 b。

8. 如果部分过孔将进行激光钻孔，可以选择 Laser 复选框以使用选项对话框设计类别中的"激光钻孔过盈"值进行间距验证。

9. 点击 **OK** 保存新过孔类型。

👀‍**结果**

如果无法使用新的部分过孔类型，请在默认布线规则中检查以下内容：

- 您的新过孔类型是否在所选过孔列表中并可用于设计？

- 起始层和目标层是否都列在所选层列表中并可用于布线？

### 为虚拟过孔创建非钻孔单层过孔类型

可以创建非钻孔（单层）焊盘过孔类型供虚拟过孔使用。必须为使用虚拟过孔的每个层创建一个此类过孔。使用 Through 过孔设置创建单焊盘非钻孔过孔类型。

🏃‍♂️‍**步骤**

1. 点击 **Setup > Pad Stacks** 菜单项。

2. 在焊盘堆叠属性对话框中，在焊盘堆叠类型区域点击 Via。

3. 点击 **Add Via** 向封装名称列表添加一行。所有先前定义的过孔类型列表会显示在封装名称列表中。

4. 在过孔区域的名称框中，输入新过孔类型的名称。

5. 点击 Through。必须使用此设置创建非钻孔过孔类型。

6. 从"`Sh: Sz: Layer:`"列表中选择将安装使用此过孔类型的虚拟过孔的层。更多信息请参见"焊盘堆叠默认层"。

7. 在参数区域，仅指定 Pad 选项卡的设置。（散热和反焊盘样式仅在焊盘位于平面内时使用，且虚拟过孔不允许在平面网络中。）更多信息请参见"第 797 页的设计规则与焊盘堆叠-散热和反焊盘"。

8. 在钻孔尺寸框中输入 0（零）。

9. 对于焊盘堆叠的所有其他层，在尺寸框中输入 0（零）。

10. 点击 **OK** 保存新过孔类型。


## 编辑过孔类型

可以更改过孔类型并将更改应用于使用该过孔类型的所有对象。

🏃‍♂️‍**步骤**

1. 选择一个过孔或虚拟过孔。

2. 右键点击并选择 **Properties** 弹出菜单项。

3. 在第 1779 页的过孔属性或第 1789 页的虚拟过孔属性对话框中，点击 **Pad Stack** 按钮。

4. 在焊盘堆叠属性对话框中，在封装名称列表中点击要编辑的过孔类型。

5. 根据需要更改过孔设置。使用参数和钻孔尺寸区域重置尺寸和形状选项。

6. 完成更改后点击 **OK**。

7. 点击 **Yes** 更改所选类型的所有过孔。

8. 点击 **OK** 关闭过孔或虚拟过孔属性对话框。

## 删除过孔类型

通过删除焊盘堆叠中的过孔定义来删除过孔类型。

🏃‍♂️‍**步骤**

1. 点击 **Setup > Pad Stacks** 菜单项。

2. 在焊盘堆叠属性对话框中，在焊盘堆叠类型区域点击 Via。

3. 在封装名称列表中点击过孔类型名称。

4. 点击 **Delete Via**。

5. 点击 **OK**。

## 阻焊覆盖过孔

可以用阻焊覆盖过孔（这一过程称为"覆盖"过孔）。

虽然使用属性控制阻焊开口是一种快速方法，但由于形状是在创建 Gerber 文件时生成的，因此无法在设计中看到这些形状。向焊盘堆叠添加自定义阻焊形状需要更多工作量，但也允许对每个焊盘堆叠进行最多的控制和定制。请参阅以下主题了解更多信息。

### 通过添加自定义阻焊形状覆盖过孔

使用焊盘堆叠对话框向一个或两个阻焊层添加自定义阻焊形状。向所有焊盘堆叠添加阻焊形状可以让您在设计中看到阻焊开口，也可以看到阻焊没有开口的情况。阻焊层还显示钻孔位置。

🏃‍♂️‍**步骤**

1. 在 **Setup** 菜单中点击 **Pad Stacks**。

2. 在焊盘堆叠属性对话框中，在焊盘堆叠类型区域点击 **Via**。

3. 向要覆盖的过孔类型添加阻焊层，步骤如下：

    a. 在封装名称列表中点击过孔类型的名称。

    b. 在过孔区域名称框中，在过孔类型名称后附加"_OPEN"。

    c. 在 `Sh: Sz: Layer` 区域点击 **Add**，从添加层对话框中选择 Solder Mask Top 或 Solder Mask Bottom，然后点击 **OK**。

    d. 选择新的阻焊层，将焊盘直径设置为过孔所需的过盈量。

    e. 如果需要添加另一个阻焊层，重复步骤 c 和 d。

4. 创建刚刚编辑的过孔类型的副本，步骤如下：

    a. 选择<VIA_NAME>_OPEN 过孔类型，点击 **Add Via** 按钮，当提示应用焊盘堆叠信息并更改所有<VIA_NAME>_OPEN 类型的过孔时点击 **Yes**。

    b. 在过孔区域输入"<ORIGINAL_VIA_NAME>_TENTED"。

    c. 在 `Sh: Sz: Layer` 区域选择一个阻焊层。

    d. 选择阻焊层，将焊盘直径设置为零。

    e. 如果需要添加另一个阻焊层，重复步骤 c 和 d。

    f. 点击 **OK** 保存设置并关闭对话框。

5. 覆盖设计中的过孔，步骤如下：

    a. 在设计中选择要覆盖的过孔。

    b. 右键点击并选择 **Properties** 弹出菜单项。

    c. 在过孔属性对话框的过孔名称列表中，选择新覆盖过孔类型的名称。

    d. 点击 **OK**。

👀‍**结果**

要验证结果，请执行验证过孔覆盖结果中的步骤。

### 通过添加属性覆盖过孔

使用对象属性对话框添加控制阻焊开口的属性。这是最快的方法，但您将无法在设计中看到形状 - 必须创建 CAM 文档才能看到它们。


> [!danger] 如果阻焊形状存在于过孔类型焊盘堆叠的阻焊层中，并且过孔类型还具有指定的"CAM.Solder mask.Adjust"值，则在创建 CAM 文档时同时应用这两个值，这些值会合并。参见"第 209 页的掩模层次结构"。

🏃‍♂️‍**步骤**

1. 在设计中选择要覆盖的过孔。

2. 右键点击并选择 **Attribute** 弹出菜单项。

3. 在对象属性对话框中点击 **Add** 按钮。

4. 从属性列的下拉列表中选择 CAM.Solder mask.Adjust。

5. 在值标题下的编辑框中双击，输入表示过孔焊盘大小的负值，然后按 Enter 键。例如，输入-20 以覆盖 20 mil 的过孔焊盘。

6. 点击 **Close**。

👀‍**结果**

要验证结果，请执行验证过孔覆盖结果中的步骤。

### 验证过孔覆盖结果

可以通过预览阻焊区域来验证过孔覆盖操作的结果。

🏃‍♂️‍**步骤**

1. 点击 **File > CAM** 菜单项。

2. 在定义 CAM 文档对话框中点击 **Add** 按钮。

3. 在添加/编辑文档对话框中，从文档类型列表中选择 Solder Mask。

4. 在层关联对话框中选择顶层/底层。

5. 在自定义文档区域点击 **Layers** 按钮。

6. 在选择项目对话框的已选列表中，选择 Solder Mask Top。

7. 在主项目区域选择过孔复选框。

8. 点击 **Preview** 按钮。输出将显示"开放"过孔的开口，但"覆盖"过孔不会出现。

## 过孔使用故障排除 ಠ_ಠ

当尝试放置过孔失败或收到消息"此网络的过孔使用受限"时，请记住以下提示。

- 使用部分过孔时，必须为设计中的所有部分和通孔过孔设置钻孔层对。

- 在布线规则对话框中，可以指定要在设计规则层次结构的所有级别使用的过孔。例如，这可以防止您在特定网络或管脚对上使用错误的过孔。