# 第 7 章 创建和编辑 PCB 封装

PCB 封装是电子元件轮廓、管脚和属性的软件表示。`SailWind Layout` 在设计布局过程中使用 PCB 封装来进行元件放置和布线。

以下主题详细介绍了如何使用 PCB 封装编辑器创建和编辑 PCB 封装，同时讨论了 PCB 封装编辑器的设置以及编辑封装后从库更新设计的过程。

## 设置 PCB 封装编辑器

您可以使用 PCB 封装编辑器创建新封装或修改现有封装。您可以修改封装编辑器的层、颜色、规则、编辑器选项和封装向导选项。

🏃‍♂️‍**步骤**

1. 点击 **设置 > 层定义** 菜单项，在"层设置"对话框（第 1441 页）中更改层堆叠。如果需要向特定层添加对象，请使用层定义设置根据您的要求配置设计。

2. 点击 **设置 > 显示颜色** 菜单项，在"显示颜色设置"对话框（第 1318 页）中更改对象或层的颜色。在处理封装时，您可能会发现为对象或层应用不同颜色有助于视觉区分。

   您可以在封装编辑器中修改对象和层的颜色，但当设计中的元件使用该封装时，它将使用为设计设置的颜色。

3. 点击 **工具 > 选项** 菜单项，更改"选项"对话框（第 1531 页）中的选项。

4. 点击 **设置 > 封装规则** 菜单项，更改"封装规则"对话框（第 1231 页）中的封装规则。

> [!warning] 在此规则层次级别设置的规则仅由 `SailWind Router` 使用。

## 创建新的默认封装编辑环境

`SailWind Layout` 提供了一个默认（启动）封装编辑环境，当您从工具菜单启动封装编辑器时会打开此环境。此封装编辑环境有自己的层、颜色、规则和编辑器选项设置。在开箱即用的默认环境中，这些设置非常通用。

如果您有个人偏好或公司有特定的封装创建设计标准，您可以修改并保存默认环境的设置，以创建一个支持这些偏好的新默认环境。这可以帮助您通过每次打开封装编辑器时加载您的首选设置来提高工作效率。

🏃‍♂️‍**步骤**

1. 点击 **工具 > PCB 封装编辑器** 菜单项。封装编辑器将以默认配置打开。

2. 设置选项以反映您的个人偏好或公司设计标准。更多信息，请参阅"设置 PCB 封装编辑器"。

3. 点击 **主页 > 另存为启动文件** 菜单项。

4. 在"启动文件输出"对话框中，在"部分"区域选择适当的复选框，然后点击**确定**。

当您立即点击 **主页 > 新建** 菜单项时，您将看到新的默认设置。

## 设置封装编辑器中对象的颜色

在处理封装时，您可以自定义显示颜色，以便在放置对象时更容易看到它们。

使用"显示颜色设置"对话框，您可以：

- 按层或按对象类型设置和更改对象的颜色

- 使对象在显示中可见或不可见（也可按层或按对象类型）

- 自定义颜色选择调色板

- 将自定义设置保存到配置文件中

🏃‍♂️‍**步骤**

1. 点击 **工具 > PCB 封装编辑器** 菜单项启动封装编辑器。

2. 点击 **设置 > 显示颜色** 菜单项。

3. 在"显示颜色设置"对话框（第 1322 页）中，设置您想要的颜色：

   a. 要为单个对象设置颜色，在"所选颜色"区域点击颜色块。然后在"层/对象类型"表格中，点击正确层行中对象类型的块。要更改可选颜色的调色板，点击**调色板**。更多信息，请参阅"更改颜色调色板"。

   b. 要使层上的所有对象颜色相同，点击层号选择整行，然后点击"所选颜色"区域中的颜色块。

   c. 要使所有层上的对象颜色相同，点击对象名称选择整列，然后点击"所选颜色"区域中的颜色块。

   d. 要使对象类型不可见，将其块设置为背景颜色。您可以使多个对象不可见（例如，同一层上的所有对象）。更多信息，请参阅"隐藏设计对象"。

要使对象类型在所有层上颜色相同，点击**全部分配**按钮并使用"为所有层分配颜色"对话框（第 1094 页）。

**4. 点击应用。**

如果修改了显示颜色设置，您可以将新配置保存到文件中，以便在未来的设计会话中重复使用。更多信息，请参阅"将颜色分配保存到文件"。

> [!tip] PowerPCB 2.1 及更低版本中保存的颜色配置不能在 PowerPCB 3.0 及更高版本中使用。

## 创建新封装

在 PCB 封装编辑器中，您可以使用封装向导自动创建一些封装，或使用绘图工具栏命令手动创建封装。

自动创建基本封装 封装向导选项配置文件 手动创建封装

### 自动创建基本封装

使用封装向导根据您在"封装向导"对话框中提供的设置自动创建常见封装类型。

要创建封装，您需要从封装尺寸开始，并将封装放大到适当的材料条件（第 1838 页）。

🏃‍♂️‍**步骤**

1. 点击 **工具 > PCB 封装编辑器** 菜单项启动封装编辑器。

2. 在标准工具栏上，点击**绘图工具栏**按钮打开绘图工具栏，然后点击**向导**按钮。

3. 选择以下方法之一来计算所需尺寸并创建新的 PCB 封装：

   - **手动计算所需封装尺寸** 您手动计算封装所需的尺寸，并将尺寸输入封装向导以创建新封装。

   - **使用封装计算器生成所需尺寸** 您将封装尺寸输入对话框的"封装计算器"区域（如果该功能可用于特定元件系列），并让封装计算器根据预设的材料条件标准生成封装。

4. 创建基本封装后，您可以编辑它以添加其他项目，如标签、属性、禁止区域、阻焊开窗、高度值和硬性扇出。更多信息，请参阅"封装编辑任务"。

### 封装向导选项配置文件

您不能修改或删除封装向导选项的默认配置，但可以保存新的配置文件。

此配置文件保存在*UserDir*文件夹中。*UserDir*环境变量在*\Settings\SailWindpcb.ini*文件中设置，默认设置为*\Settings\*文件夹。文件扩展名为*.dwc*。这些文件为文本格式，可以用默认文本编辑器打开。

**自定义封装类型和间距范围**

您可以使用默认文本编辑器进一步自定义从"封装向导选项"对话框保存的配置文件。您可以编辑现有的封装类型或添加新的封装类型。

如果编辑*.dwc*文件的文本，您必须考虑以下要求：

- 只能使用预定义的元件系列，并且必须存在元件系列所需的所有参数（例如 Toe）。

- component_type 部分编号不能跳过数字；但它们不需要在文件中按顺序排列。例如，如果存在数字 4 和 6，则文件中某处也必须存在数字 5。

- 间距范围不能重叠，并且总体上必须覆盖从 0 到无穷大的所有值。

- DecalName 参数仅限于`<Pitch>、<LeadSpan>、<LeadSpan1>、<LeadSpan2>、<Height>、<BodyWidth>、<BodyLength>、<PinCount>`。

如果不满足这些要求，并且您尝试在"封装向导选项"对话框中使用配置，则会显示警告说明问题，并且您不能使用该配置文件。

### 手动创建封装

如果无法使用封装向导创建封装，可以使用 Decal Editor Drafting Toolbar 按钮手动创建。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项，启动封装编辑器，进入默认封装编辑环境。

   创建新封装时不必从默认封装开始。如果要创建的新封装与现有封装类似，可以编辑该封装并保存为新名称来创建新封装。

2. 设置封装原点（见第 170 页）

3. 添加并放置端子（见第 172 页）

4. 创建铜箔形状（见 179 页），例如与端子焊盘相关的铜箔

5. 定义端子焊盘堆叠（见 185 页）

6. 创建装配件（见 195 页）、丝印层（见 196 页）和放置轮廓（见 197 页）

7. 添加其他项目，如标签、属性、禁止区、阻焊层、高度值以及硬性扇出/扇入。更多信息请参见"封装编辑任务"

   - 无法编辑创建新封装时出现的默认"名称"和"类型"标签，这些"占位"标签在将使用该封装的零件添加到设计时会自动填充正确的参考标识符和零件类型名称

   - 可以向封装添加其他"占位"标签。更多信息请参见"创建占位属性标签"

8. 点击**主页 > 封装另存为**菜单项，命名新封装并保存到库中

## 库与元件封装编辑

可以编辑库中的封装或设计中被分配给元件的封装。

修改元件时，编辑库封装会检查零件类型与分配的 PCB 封装之间的错误，修复逻辑错误，修复不匹配的管脚错误，编辑设计中被分配给元件的封装。

### 元件修改

当从库中添加元件到设计时，元件会从库复制到设计中作为独立实例。

此时存在两个版本的元件 - 库版本和设计版本。可以修改其中任意一个或全部，但修改哪个版本会产生不同影响：

- 如果希望更改仅适用于库版本，请使用 PCB 封装编辑器进行修改。修改库版本时，仅该版本会改变，设计中的元件实例不会改变（如果希望将设计元件改为与库版本一致，可以点击**工具 > 从库更新**菜单项）

- 如果希望更改仅适用于当前设计中的元件，请使用布局编辑器进行修改。修改设计版本时，仅影响当前设计中被选中的元件（或该元件的所有实例），库定义不会改变（除非通过右键点击**保存到库**菜单项明确更改）

构成元件定义的大多数项目只能在布局编辑器或 PCB 封装编辑器中编辑，不能同时在两个地方编辑。但以下项目可以在任一编辑器中编辑，需要决定使用哪个：

- 在元件类型中：

  - 属性

- 在元件封装中：

  - 属性

  - 标签

  - 丝印层

  - 禁止区

- 铜箔

- 阻焊层

- 焊膏层

- 零件轮廓宽度

- 封装规则

- 焊盘堆叠

### 编辑库封装

可以使用封装编辑器修改库中的 PCB 封装。所做的更改仅适用于库级别，不会自动应用于设计中的实例。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项启动封装编辑器

2. 点击**打开**按钮，弹出"从库获取 PCB 封装"对话框

3. 从过滤器区域的库列表中选择包含封装的库

4. 如需筛选 PCB 封装列表，在项目框中输入通配符或表达式（见 155 页）并点击**应用**

   项目框必须至少包含星号(*)才能获得搜索结果。星号显示列表中的所有零件。

5. 从 PCB 封装列表中选择封装，预览区显示封装图形

6. 点击**确定**

> [!tip] 如果封装被分配给 SailWind 库中的任何零件类型，会弹出"<名称>封装的零件类型列表"对话框。查看信息并关闭对话框。更多信息请参见"检查零件类型与分配的 PCB 封装之间的错误"。

7. 编辑封装。关于如何编辑 PCB 封装，请参见"封装编辑任务"

8. 保存封装

### 检查零件类型与分配的 PCB 封装之间的错误

如果在封装编辑器中打开封装进行编辑，并且已将其分配给 SailWind 库中的零件类型，会弹出"<名称>封装的零件类型列表"对话框。

从此对话框可以检查管脚是否与零件类型**管脚**标签页表格中列出的管脚匹配，或者当存在管脚映射时，在**管脚映射**标签页上检查。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项启动封装编辑器

2. 点击**打开**按钮，弹出"从库获取 PCB 封装"对话框

3. 从过滤器区域的库列表中选择包含封装的库

4. 如需筛选 PCB 封装列表，在项目框中输入通配符或表达式（见 155 页）并点击**应用**

   项目框必须至少包含星号(*)才能获得搜索结果。星号显示列表中的所有零件。

5. 从 PCB 封装列表中选择封装，预览区显示封装图形

6. 点击**确定**

7. 如果封装被分配给 SailWind 库中的任何零件类型，会弹出"<名称>封装的零件类型列表"对话框（见 1606 页）。如需手动打开，点击**工具 > 零件类型**菜单项。可以点击列标题按给定列排序

8. 在"<名称>封装的零件类型列表"对话框上，点击**编辑零件**

9. 弹出"零件<名称>信息"对话框，可以检查管脚是否与**管脚**标签页表格中列出的管脚匹配，或者当存在管脚映射时，在**管脚映射**标签页上检查

10. 查看完信息后，点击**确定**关闭"零件<名称>信息"对话框

11. 点击**关闭**关闭"<名称>封装的零件类型列表"对话框

12. 编辑封装。关于如何编辑 PCB 封装，请参见"封装编辑任务"

13. 保存封装

14. 点击**主页 > 退出封装编辑器**菜单项返回设计

### 修复逻辑错误

可以修正"封装零件类型列表"对话框错误状态列中显示的任何逻辑错误。

🏃‍♂️‍**步骤**

1. 在**工具**菜单上点击**PCB 封装编辑器**打开封装编辑器

2. 点击**打开**按钮，弹出"从库获取 PCB 封装"对话框

3. 从过滤器区域的库列表中选择包含封装的库

4. 如需筛选 PCB 封装列表，在项目框中输入通配符或表达式（见 155 页）并点击**应用**

   项目框必须至少包含星号(*)才能获得搜索结果。星号显示列表中的所有零件。

5. 从 PCB 封装列表中选择封装，览区显示封装图形

6. 点击**确定**

7. 如果封装被分配给 SailWind 库中的任何零件类型，会弹出"<名称>封装的零件类型列表"对话框（见 1606 页）。如需手动打开，点击**工具 > 零件类型**菜单项。可以点击列标题按给定列排序

8. 在"<名称>封装的零件类型列表"对话框上，选择带有逻辑错误的行

9. 点击**显示错误**创建并打开包含错误详细信息的报告

10. 点击**编辑零件**打开零件类型

11. 在零件类型中修复错误，然后点击**确定**

12. "封装零件类型列表"对话框将更新错误状态

### 修复管脚不匹配错误

您可以在"Decal 零件类型列表"对话框的错误状态栏中修正所有出现的管脚不匹配错误。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项启动封装编辑器

2. 点击**打开**，打开"从库获取 PCB 封装"对话框

3. 在筛选区域中的库列表，选择包含封装的库

4. 如需筛选 PCB 封装列表，在项目框中输入通配符或表达式(见第 155 页)并点击**应用**

   项目框至少需要包含星号(*)才能获得搜索结果。星号会显示列表中的所有零件。

5. 从 PCB 封装列表中选择封装，预览区会显示封装图形

6. 点击**确定**

7. 如果封装已分配给 SailWind 库中的任何零件类型，将打开"Decal 零件类型列表<名称>"对话框(见第 1606 页)。如需手动打开对话框，点击**工具 > 零件类型**菜单项。可通过点击列标题按指定列排序表格

8. 在"Decal 零件类型列表<名称>"对话框，选择带有管脚不匹配错误的行项目

9. 点击**显示错误**创建并打开包含错误详情的报告

10. 在 PCB 封装编辑器中修正错误

11. 在 Decal 零件类型列表对话框中点击**刷新**更新对话框

> [!tip] 您可以点击"检查封装"按钮，检查封装与所有关联零件类型的匹配情况，显示所有管脚编号不匹配错误

### 编辑设计中使用封装的组件封装

您可以编辑设计中使用封装的组件封装，并将更改仅应用于这些组件，或应用于使用该封装的所有组件。

您也可以将更改保存到库中现有封装，或创建新封装。

🏃‍♂️‍**步骤**

1. 选择组件(所有选中的组件必须使用相同封装)

2. 右键点击**编辑封装**弹出菜单项，打开 PCB 封装编辑器

3. 编辑封装(关于如何编辑 PCB 封装，请参阅"封装编辑任务")

   🙊**限制**

   如果设计处于默认层模式，编辑设计封装并尝试更改为增加层模式，将显示消息"您将无法将封装更改应用到设计。继续？"点击**取消**返回层设置对话框，不将封装更改为增加层模式；或点击**确定**继续到增加最大层数对话框，可在其中将封装更改保存到库中，然后退出 PCB 封装编辑器而不应用更改。完成库中封装编辑后，可将当前设计切换为增加层模式并更新封装。

4. 如需保存更改到库中：

   a. 点击**主页 > 另存封装为**菜单项

   b. 在"保存 PCB 封装到库"对话框，设置库和 PCB 封装名称字段，将更改保存为新封装

   c. 点击**确定**

5. 点击**主页 > 退出封装编辑器**菜单项

6. 在"应用封装更改"对话框，点击**选中**仅将更改应用于选中的组件，或**全部**应用于设计中使用该封装的所有组件

## 封装编辑任务

您可以使用封装编辑器执行编辑任务，包括编辑属性、定位封装原点、添加/删除/修改端子、创建和关联铜箔形状、创建和修改自定义焊盘堆叠、处理标签和属性，以及多种其他编辑任务。

SailWind 布局将封装和零件类型组合创建组件。使用 PCB 封装编辑器创建和编辑零件库中零件类型关联的封装。许多 PCB 封装编辑器绘图操作与布局编辑器绘图操作相同。

当 PCB 封装编辑器启动时，当前设计被存储，PCB 封装编辑器接管。PCB 封装编辑器使用的颜色来自布局编辑器。退出 PCB 封装编辑器时，使用文件命令保存信息，并像独立程序一样退出。您将返回到 SailWind 布局中的当前设计。

编辑封装时请注意：

- SailWind 布局支持每个零件类型 16 个备选封装

- 可在 PCB 封装编辑器内使用尺寸标注，但保存封装时尺寸会转换为 2D 线条和文本(更多信息请参阅"尺寸标注流程"主题)

PCB 封装编辑器绘图处理构成封装的对象：

- 封装名称

- 端子

2D 线条

- 文本

- 铜箔

- 铜箔空隙

### 编辑封装项目属性

您可以编辑封装项目的属性，包括端子、标签、文本和 2D 项目。

🏃‍♂️‍**步骤**

1. 在封装编辑器中选择项目，右键点击**属性**弹出菜单项

2. 在显示的对话框中编辑封装名称属性

3. 点击**确定**

### 封装原点位置

封装原点的位置影响封装在"按原点移动"模式下如何附着到光标，也影响贴片机如何将组件放置到电路板上。

通常，通孔器件将原点设在 1 号管脚，表面贴装器件设在组件几何中心，其他器件可能有其他原点要求。

创建新封装时，可以在最方便时定义原点。例如，创建通孔器件封装时：

- 可在默认原点创建 1 号管脚，然后构建封装其余部分

- 可在工作区任意位置构建整个封装，然后将原点移动到 1 号管脚

### 使用设置原点设置封装原点

您可以在封装编辑器中设置封装原点。

🏃‍♂️‍**步骤**

1. 点击**设置 > 原点**菜单项

2. 点击您希望新原点所在位置

### 使用无模命令设置封装原点

您可以通过指定 x 和 y 坐标位置，使用无模命令设置封装原点。

🏃‍♂️‍**步骤**

1. 选择封装

2. 输入无模命令 SO``<x>` `<y>``


> [!tip] 输入 SO 表示相对坐标，SOA 表示绝对坐标

### 端子

端子定义 PCB 封装上的物理连接点。端子属性建立原理图符号与 PCB 封装之间的连接关系。

添加端子时使用步进重复功能添加端子阵列、分配 JEDEC 管脚、修改端子属性、修改端子编号属性、移动端子、移动端子编号、交换端子编号、端子重新编号、通过点击端子重新编号、使用管脚编号对话框重新编号、删除端子

#### 添加端子

端子是封装的焊盘或焊盘区域

1. 点击**工具 > PCB 封装编辑器**菜单项启动封装编辑器

2. 点击**绘图**按钮打开绘图工具栏，然后点击**端子**按钮

3. 在"添加端子"对话框(见第 1073 页)中，在起始管脚编号区域选择管脚类型，然后在前缀和/或后缀框中输入编号值(根据输入内容显示预览)

4. 字母和数字可以用于任意框(如 A1 或 1A)

5. 对于单个数字，使用前缀或后缀框，另一个框留空

6. 在增量选项区域，选择增量前缀或增量后缀选项

7. 在步长值框中输入正数或负数

8. 如果使用字母数字，可以勾选"验证有效 JEDEC 管脚编号"复选框

9. 点击指示新端子位置(可重复操作)

![](/layout/guide/7/_page_16_Picture_2.jpeg)

#### 使用步进重复功能添加端子阵列

可以使用步进重复功能添加端子阵列

🏃‍♂️‍**步骤**

1. 选择端子，右键点击**步进重复**菜单项

2. 在步进重复对话框(见第 1734 页)中选择阵列类型(线性、极坐标或径向)并设置选项

3. 如果对象选择包含文本或端子，可以自动递增文本或管脚编号

4. 点击**确定**创建阵列

5. 端子会与铜箔区域一起复制

6. 步进重复标签中的设置会在关闭对话框时保存

#### 分配 JEDEC 管脚

可以按照 JEDEC 标准为行列端子分配管脚编号

🏃‍♂️‍**步骤**

1. 启动封装编辑器

2. 点击**主页 > 打开封装**

3. 在筛选区域输入通配符或表达式(见第 155 页)并点击**应用**

4. 点击封装并点击**确定**

5. 点击**工具 > 分配 JEDEC 阵列管脚**菜单项

6. 选择组件或基板选项

7. 点击**确定**

8. 保存封装

#### 修改端子属性

可以修改端子的各种属性

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择端子，右键点击**属性**

2. 修改 x,y 坐标或管脚编号

3. 点击**焊盘堆叠**打开焊盘堆叠属性对话框(见第 1574 页)

4. 在端子属性对话框中可以清除关联铜箔复选框

5. 点击**应用**或**取消**

6. 选择其他端子时对话框会更新


> [!tip] 可以使用除{}*?和空格外的任意字母数字

#### 修改端子编号属性

可以修改单个端子的属性

1. 在 PCB 封装编辑器中选择端子，右键点击**属性**

2. 修改坐标或管脚编号

3. 选择其他端子时对话框会更新

#### 移动端子

可以移动端子改变位置

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择端子

2. 拖动端子

3. 点击完成移动

4. 也可以使用方向键控制移动

#### 移动端子编号

可以移动端子编号改变位置

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择要移动的端子编号

2. 拖动端子编号并释放鼠标按钮

3. 点击指定新位置完成移动

4. 也可以使用方向键控制移动

#### 交换端子编号

可以交换两个端子的编号

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择要交换的端子

2. 右键点击**交换**弹出菜单项

3. 端子编号将互换

#### 端子重新编号

构建 PCB 封装时可能需要重新编号端子，有两种方法：

#### 通过点击端子重新编号

在封装编辑器中，可以选择起始端子并点击连续端子按升序重新编号

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择起始端子，右键点击**重新编号端子**

2. 在起始管脚编号区域输入前缀和/或后缀值

3. 字母和数字可以用于任意框(如 A1 或 1A)

4. 对于单个数字，使用前缀或后缀框，另一个框留空

5. 在增量选项区域选择增量前缀或增量后缀

6. 在步长值框中输入正数或负数

7. 如果使用字母数字，可以勾选"使用 JEDEC 管脚编号"复选框

8. 点击**确定**

9. 端子会高亮显示，指针变为小十字

10. 选择另一个端子分配下一个可用编号

    ![](/layout/guide/7/_page_20_Picture_19.jpeg)

    > [!tip] 如果重编号所有可用管脚，会显示"重新编号...新编号已用完！"消息

11. 可以右键点击**后退**或按退格键恢复原始编号

12. 要取消重新编号过程，右键点击**取消**

13. 要重新编号多个端子，按住 Shift 键拖动指针选择端子

14. 完成重新编号后右键点击**完成**

#### 使用管脚编号对话框重新编号

可以使用管脚编号对话框交互式重新编号

1. 通过**设置 > 管脚编号**菜单项访问

2. 可以编辑单个单元格、复制粘贴或使用重新编号管脚对话框


> [!tip] 封装上的管脚编号更改在点击**应用**或**确定**后才会更新

#### 编辑单个管脚编号

可以使用重新编号管脚对话框编辑单个管脚编号

🏃‍♂️‍**步骤**

1. 点击**设置 > 管脚编号**菜单项

2. 双击编号单元格或选择单元格点击**编辑**

3. 输入新管脚编号

#### 复制粘贴管脚编号

可以从管脚编号对话框或 Excel 复制数据并粘贴到编号列表

🏃‍♂️‍**步骤**

1. 在 Excel 中选择数据并使用复制命令

2. 选择要粘贴数据的单元格

3. 点击**粘贴**将数据粘贴到表格中

#### 删除端子

可以直接从 PCB 封装编辑器中删除不需要的管脚

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择要删除的端子

2. 按 Delete 键，剩余端子会自动重新编号

### 移动封装名称

可以拖动封装名称改变位置

🏃‍♂️‍**步骤**

1. 在 PCB 封装编辑器中选择要移动的封装名称

2. 拖动封装名称并释放鼠标按钮

3. 点击指定新位置完成移动

4. 也可以使用方向键控制移动

### 在封装中创建铜箔

您可以在封装中创建铜箔并与管脚关联，以创建自定义焊盘形状或散热器。也可以创建未关联的铜箔散热器或屏蔽层形状，这些形状会随封装在设计中移动。

😎**前提**

必须为铜箔选择放置层。不能在所有层（层号为零）上创建铜箔形状。如果需要在多个层上使用相同的铜箔形状，请将其复制到其他层。

1. 点击 **Drafting Toolbar** 按钮

2. 在绘图工具栏上，点击 **Copper** 按钮

3. 选择放置铜箔的层

4. 右键点击并选择命令以更改绘图对象的数值。更多信息请参见"创建绘图对象前设置数值"

5. 使用以下方式创建形状：

   - 创建圆形绘图对象

   - 创建多边形或路径绘图对象

    创建矩形绘图对象

6. 完成形状后，它将变为填充形状

👀‍**结果**

检查生成的铜箔形状，查看以下情况：

- 如果边缘不正确，请参见"绘图形状边缘精度"第 615 页

- 如果在错误层上或需要修改，请参见"绘图对象属性"

- 如需重新开始，请参见"删除绘图段或对象"

### 表面贴装器件焊盘

表面贴装器件(SMD)焊盘通常是矩形，但可以指定任何形状。定义 SMD 焊盘时，将所有其他层的焊盘堆栈设置为圆形，尺寸为 0，钻孔尺寸为 0，并清除电镀。钻孔放大参数不适用。如果使用关联铜箔定义 SMD 焊盘，请将该层的焊盘堆栈设置为方形，尺寸为 0。

使用"在 SMD 下过孔布线"命令将过孔直接放置在 SMD 焊盘下方。更多信息请参见"焊盘中添加过孔"。可以在 CAM 过程中为阻焊层光绘底片设置 SMD 焊盘。

**平面连接**

应连接到平面的管脚通常使用散热焊盘进行制造。

### 自定义焊盘形状创建

可以通过绘制铜箔形状并在编辑封装时将其与焊盘关联来创建不规则形状(不规则形状)焊盘。

更多信息请参见"铜箔与端子关联"。

### 铜箔与端子关联

可以将绘制的铜箔形状与端子/焊盘关联。这将为铜箔形状分配与端子/焊盘相同的网络连接。使用关联铜箔创建自定义焊盘形状或在封装中创建硬断点。

PCB 封装编辑器中，当铜箔关联时，CAM 对焊盘和其他对象的解释不同：

- 端子解释为过孔

- 闭合铜箔形状解释为焊盘

- 开放铜箔(用铜箔绘制的路径)解释为走线

> [!tip] 使用"过孔、焊盘和走线"复选框以及"带关联铜箔的管脚"区域中的选项，可以完全控制 CAM 文档中显示的内容。

> [!danger] 
布线仅完成到焊盘中心，任何热连接仅连接到焊盘，不连接到关联铜箔形状。

🏃‍♂️‍**步骤**

1. 绘制铜箔形状。更多信息请参见"在封装中创建铜箔"

   可以创建多个铜箔形状

2. 在 PCB 封装编辑器中打开封装，选择端子，右键点击 **Associate** 弹出菜单项

3. 选择要与端子关联的铜箔项。铜箔项与端子电气连接。可以物理连接端子和铜箔

4. 如果使用关联铜箔创建不规则形状焊盘，请在重叠的关联铜箔形状内最大化焊盘形状。焊盘仍是布线目标(第 1854 页)和热连接点


> [!warning] 
当布线到封装焊盘时，如果仅布线到关联铜箔而非焊盘中心，会标记为部分连接，但功能正常。

👀‍**结果**

CAM 对关联铜箔的解释不同。更多信息请参见"关联铜箔与 CAM"。

### 铜箔与端子取消关联

可以移除铜箔项与端子的关联。

🏃‍♂️‍**步骤**

1. 在封装编辑器中选择铜箔项

2. 右键点击 **Unassociate** 弹出菜单项


> [!tip] 在"端子属性"中清除"关联铜箔"复选框也可以取消铜箔与端子的关联。

### 焊盘尺寸和焊盘堆栈

*焊盘*是作为元件管脚和过孔导体的铜箔小区域。焊盘确保进入钻孔的走线与孔内铜镀层之间的连接。

焊盘分为两种：

- **通孔焊盘** 用于通过电路板的元件。通孔焊盘钻孔和电镀后，铜环确保走线、孔内铜镀层和电路板另一侧焊盘之间的连接。过孔被视为通孔焊盘

- **表面贴装焊盘** 用于元件管脚，粘合到电路板外层。通过过孔布线提供与其他层的连接

焊盘堆栈 焊盘堆栈默认层 焊盘堆栈与反焊盘定义 焊盘堆栈与关联铜箔

#### 焊盘堆栈

在双层板上，元件管脚或过孔钻孔在顶层和底层有独立的焊盘。可以为每个焊盘设置不同的形状、尺寸和直径值。如果添加任何内部布线层到设计中，可以定义这些层上的焊盘。管脚或过孔产生的两个或多个焊盘称为*焊盘堆栈*。

焊盘堆栈分为两类：

- **元件焊盘堆栈** 元件焊盘堆栈用于元件管脚，可以是表面贴装(无钻孔直径)或通孔。元件的焊盘堆栈信息与其零件封装信息一起存储。

- **过孔焊盘堆栈** 过孔焊盘堆栈用于馈通，可以是通孔或部分过孔。部分过孔开始或结束于外层或内层。部分过孔用于多层板，通过为层专用过孔单独钻孔创建，然后压合在一起并钻通孔。如果过孔连接外层和内层，则称为盲孔；如果连接两个内层，则称为埋孔。过孔类型决定是通孔还是部分过孔。过孔描述是类型、电镀和焊盘堆栈信息的组合。

可以按层编辑焊盘堆栈，因此可以将元件或过孔焊盘设置为零，在不需要创建钻孔周围布线空间的层上关闭它们。可以为不同的布线或光绘应用分配不同的形状。焊盘堆栈的尺寸、形状、直径和层描述的配置称为其焊盘堆栈信息。更多信息请参见"编辑焊盘堆栈"主题。

关于安装过孔的信息，请参见"过孔设置"第 327 页主题。

#### 焊盘堆栈默认层

默认层列表包含一个特殊的通用层列表。它列出了安装侧、内层和相对侧。这种设置允许快速定制电气层，如果选择将元件安装在底部或添加额外的内层，则增加了灵活性。

**安装/相对侧**

如果自定义安装侧或相对侧，选择将元件安装在电路板底部时，自定义焊盘会随元件翻转。但是，如果选择自定义电路板顶部或底部的特定层，自定义焊盘将保留在该层上，即使翻转元件。

**内层**

如果自定义内层，可以添加层到设计中，焊盘自定义将传播到任何添加的层。但是，如果选择自定义每个特定层，增加设计层数，自定义焊盘将仅保留在这些特定内层上。

#### 焊盘堆栈与反焊盘定义

为内层设置反焊盘定义会修改 CAM 平面和分割/混合平面的光绘输出。如果需要在分割/混合平面层上使用独特的反焊盘，请在定义反焊盘前为分割/混合平面添加新层。

#### 焊盘堆栈与关联铜箔

定义端子的关联铜箔时，在关联铜箔层上定义零尺寸、方形的焊盘堆栈。布线命令将零尺寸、方形焊盘解释为该层关联焊盘铜箔的布线目标。

### 钻孔尺寸

制造过程中，钻孔的内表面镀有金属。对于过孔，电镀在压合层时实现连接。电镀会减小钻孔直径。尺寸差异对过孔的影响小于元件孔，较小的直径会阻碍零件插入。

为焊盘堆栈定义的钻孔尺寸假定为电镀后的成品孔尺寸。制造应使用比指定钻孔尺寸更大的钻头，以便电镀后内径接近原始规格。为了在间隙检查中使用实际钻头尺寸，在"选项"对话框的"设计"选项卡上有一个通用的"钻孔放大"设置，为所有钻孔尺寸定义添加固定直径。焊盘堆栈钻孔尺寸和钻孔放大设置组合是批量设计规则检查使用的直径，也是管脚或过孔上显示的钻孔尺寸。

大多数情况下，制造商使用等于焊盘堆栈钻孔尺寸加两倍电镀厚度的钻头尺寸。确定输入值，了解电路板制造商如何选择钻头直径。

### 自定义封装管脚焊盘堆栈

可以自定义封装管脚的焊盘堆栈。可以选择自定义一个管脚或同时自定义多个管脚。

> [!danger] 
> 自定义封装管脚焊盘堆栈时，适用以下限制：
> 
> - 如果在 PCB 封装编辑器中工作，必须在编辑器中打开封装。端子(管脚)必须存在于封装中才能修改其默认焊盘堆栈。
> 
> - 如果在设计编辑器中工作，要编辑的封装必须存在于设计中。

🏃‍♂️‍**步骤**

1. 点击"Setup>Pad Stacks"菜单项

2. 在"Pad Stacks Properties Dialog Box"第 1566 页，确保在封装名称列表中选择封装

3. 在"Pin: Plated:"列表下，选择要自定义的管脚。如果不想同时自定义所有管脚，可以使用"Add Pin Dialog Box"第 1066 页添加特定管脚号

4. 在"`Sh: Sz: Layer:`"列表下，选择焊盘堆栈的一层或多层

更多信息请参见：

- 焊盘堆栈默认层第 184 页

- 阻焊层和焊膏层控制

- 在参数区域，为所有三个焊盘样式指定设置(焊盘、散热和反焊盘)

- 焊盘样式根据情况自动选择

- 散热和反焊盘样式用于管脚位于平面内时

更多信息请参见：

- "设计规则与焊盘堆栈散热和反焊盘"第 797 页

- 焊盘堆栈中创建散热

- 焊盘堆栈中创建反焊盘

- 自定义设计规则散热

- 在参数区域下，为所有层设置选项

- 如果需要自定义封装中的其他管脚，返回步骤 3

- 点击"OK"保存所有焊盘堆栈自定义

👀‍**结果**

验证自定义散热是否显示在 CAM 平面图中。要查看自定义散热，必须选择"Use Custom Thermal Settings"复选框，并确保光绘格式为 RS-274-X。CAM 平面图不支持 RS-274-D。

#### 焊盘堆栈中创建散热

可以在创建或修改焊盘堆栈时设置散热。在分割/混合平面层和 CAM 负平面(RS-274-X 输出)上创建散热。

> [!danger] 
> 在焊盘堆栈中创建散热时，适用以下限制：
> 
> - 在 PCB 封装编辑器中，不能在"Pad Stack Properties for Pin"对话框中创建散热。必须点击"Setup>Pad Stacks"菜单项使用"Pad Stacks Properties"对话框
> 
> - 在"`Sh: Sz: Layer:`"区域中，有一个全局列表用于内层，设置为`<Inner Layer>`。设置散热定义会修改 CAM 平面和分割/混合平面层的光绘输出。如果需要在特定层上使用独特的散热，请添加新层并定义特定的散热设置

🏃‍♂️‍**步骤**

1. 选择一层或多层

2. 在参数区域，点击"Thermal"选项卡

3. 点击适当的焊盘形状以启用散热的大小和形状控制

4. 更改默认散热值

5. 如果"Use Design Rule for Thermals and Antipads"复选框在"Options"对话框>Copper Planes 类别>Thermal 子类别第 1514 页被选中，则不会使用焊盘堆栈散热。更多信息请参见"Customizing Design Rule Thermals"第 669 页

> [!warning] 
CAM 平面图与其他层相比是负片。设置 CAM 平面层的散热时，必须在"Plot Options"第 1641 页对话框中选择"Use Custom Thermal Settings"复选框。确保在"Photo Plotter Advanced Setup"第 1619 页对话框中使用 RS-274-X 输出格式。


#### 焊盘堆栈中创建反焊盘

可以在创建或修改焊盘堆栈时设置反焊盘。在分割/混合平面层和 CAM 负平面(RS-274-X 输出)上创建反焊盘。

> [!danger] 
> 在焊盘堆栈中创建反焊盘时，适用以下限制：
> 
> - 在 PCB 封装编辑器中，不能在"Pad Stack Properties for Pin"对话框中创建反焊盘。必须点击"Setup>Pad Stacks"菜单项使用"Pad Stack Properties"对话框
> 
> - 在"`Sh: Sz: Layer:`"区域中，有一个全局列表用于内层，设置为`<Inner Layer>`。设置反焊盘定义会修改 CAM 平面和分割/混合平面层的光绘输出
> 
> - 如果需要在特定层上使用独特的反焊盘，请添加新层并定义特定的反焊盘设置

🏃‍♂️‍**步骤**

1. 选择一层或多层

2. 在参数区域，点击"Antipad"标签

3. 点击适当的焊盘形状以启用反焊盘的大小和形状控制

4. 更改默认反焊盘值

5. 如果"Use Design Rule for Thermals and Antipads"选项在"Options"对话框>Copper Planes 类别>Thermal 子类别第 1514 页被选中，则不会使用焊盘堆栈反焊盘

> [!warning] 
- CAM 平面图与其他层相比是负片

- 设置 CAM 平面层的反焊盘时，必须在"Plot Options"第 1641 页对话框中选择"Use Custom Antipad Settings"选项

- 确保在"Photo Plotter Advanced Setup"第 1619 页对话框中使用 RS-274-X 输出格式


#### 编辑焊盘堆栈

焊盘堆栈可以按以下步骤进行编辑：

1. 点击"Setup>Pad Stacks"菜单项

2. 设置焊盘堆栈类型为 Decal 或 Via

3. 从 Decal Name 列表中选择封装或过孔名称

4. 进行修改后点击"OK"

5. 当提示保存更改时，选择"All"或"Selected"按钮


#### 保存焊盘堆栈更改

修改焊盘堆栈后，必须保存到库中：

1. 选择部件

2. 右键点击"Save to Library"菜单项

3. 在"Save Part Types and Decals"对话框中选择保存选项

> [!warning] 
- 修改焊盘堆栈不会自动更新库中的封装

- 必须显式保存更改

#### 焊盘堆栈报告

可以生成焊盘堆栈报告，包含以下信息：

```

PAD STACK LISTING

Finger Format — Size Shape Orientation Length Offset Drill

Pad Format —— Size Shape Drill

Shape=[OF]OvalFinger,[RF]RectFinger,[R]Round,[S]Square,[A]Annular,[O]Odd

```


#### 槽孔

可以使用"Pad Stacks Properties"对话框创建槽孔：

- 槽孔有方向偏移属性

- 只能用于圆形、方形、椭圆形或矩形焊盘

- 槽孔尺寸与关联焊盘相同

> [!warning] 
- 槽孔在光绘中显示为钻孔

- 槽孔尺寸由"Line Width"选项控制

#### 其他信息

- 槽孔可用于测试点

- 槽孔尺寸由"Drill Drawing Options"对话框控制

- 槽孔在 CAM350 中显示为钻孔


#### 槽孔几何参数

槽孔长度、方向和偏移参数的有效取值范围与焊盘相同，其数值以关联的焊盘堆叠属性对话框中选择的设计单位表示。

长度取值范围：>= 0 且 <= 1000 mils (25.4 mm)

方向取值范围：>= 0.000 且 <= 179.999 度

偏移取值范围：>= -500 (-17.2 mm) 且 <= 500 mils 17.2 (mm)

#### 槽孔偏移与焊盘偏移对比

您可以改变椭圆形焊盘的偏移来移动管脚的电性中心（以及钻孔中心）。由于标准规范将槽孔视为钻孔，因此这些规范也认为电性中心就是槽孔的中心。

如果将焊盘偏移移动到焊盘的远端，槽孔会迅速移出焊盘边界。您可以使用槽孔偏移来移动槽孔，而不是移动焊盘偏移。

槽孔偏移会相对于管脚的电性中心移动槽孔的中心——始终与焊盘偏移方向相反。例如，要将一个 200x60 mil 焊盘的电性中心向左移动 70 mils，可设置焊盘偏移为 70。要使槽孔居中，则设置槽孔偏移为 70。更多信息请参见下图。可设置的最大偏移量为长度的一半。

![](/layout/guide/7/_page_35_Figure_7.jpeg)

![](/layout/guide/7/_page_35_Figure_8.jpeg)

#### CAM 输出与槽孔

CAM 输出类型决定了槽孔的定义和表示方式。

**钻孔图**

在钻孔图上，槽孔显示为 2 个钻孔符号，分别位于槽孔中心线的两端。然后围绕这两个钻孔符号绘制槽孔的真实轮廓（边到边的表示）。

![](/layout/guide/7/_page_36_Figure_1.jpeg)

![](/layout/guide/7/_page_36_Figure_2.jpeg)

在钻孔表中，槽孔以 Size 列中的值显示。该尺寸是槽孔的边到边尺寸，意味着槽孔的宽度也是钻孔尺寸。Quantity 列显示槽孔的数量。

下表显示了一个 DIP14 的钻孔表示例，两端各有 30x120 mil 的镀槽孔

| SIZE   | QTY | SYM | PLTD |
|--------|-----|-----|------|
| 35     | 14  | +   | PLTD |
| 30x132 | 2   | X   | PLTD |

**表 59. 钻孔表示例**

**NC 钻孔**

在 NC 钻孔数据中，为槽孔的每一端创建两个钻孔符号。槽孔根据管脚类型输出（镀/非镀）。槽孔测试点根据测试点输出。例如，如果输出镀管脚和测试点，则镀和/或测试点的槽孔也将被输出。

**Gerber 输出**

在 Gerber 数据中，槽孔有两种表示方式。第一种是作为中心线，其端点距离槽孔末端为钻孔尺寸的一半。第二种是作为封闭的未填充椭圆形，显示槽孔的外边缘。这个椭圆形的中心线是槽孔的外边缘。两者都用最小的圆形光圈绘制。

**图 17. 槽孔的 Gerber 输出**

![](/layout/guide/7/_page_36_Figure_12.jpeg)

#### CAM350 中的槽孔

制造方法决定了您在 CAM350 中使用的孔表示方式。

- 要使用一系列钻孔创建槽孔，请使用中心线格式和 CAM350 中的 Gerber to Drill 功能。

- 要铣削槽孔，请使用外边缘格式和 CAM350 中的 Gerber to Mill。


#### 在封装中创建槽孔

您可以在封装编辑器中向封装添加槽孔。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器。

2. 点击**设置 > 焊盘堆叠**菜单项。

3. 在焊盘堆叠属性对话框中，设置您需要的任何焊盘堆叠选项，如镀层、尺寸、形状和层。

4. 选中 Slotted 复选框以向封装添加槽孔。

5. 设置槽孔的长度、方向和偏移。

6. 点击**确定**。

7. 选择是否保留管脚上的现有属性（保留属性），然后选择是将焊盘堆叠更改应用于所有封装类型（全部）还是仅应用于所选组件（选定）。您也可以取消槽孔创建（取消）。

#### 在管脚中创建槽孔

您可以选择封装上的单个管脚并添加槽孔。

1. 选择一个管脚，右键单击，然后点击**属性**弹出菜单项。

2. 点击**焊盘堆叠**。

3. 在焊盘堆叠属性对话框中，选中 Slotted 复选框以添加槽孔。

4. 设置槽孔的长度、方向和偏移。

5. 点击**确定**。

6. 选择是否保留管脚上的现有属性（保留属性），然后选择是将焊盘堆叠更改应用于所有封装类型（全部）还是仅应用于所选组件（选定）。您也可以选择取消槽孔创建（取消）。

### 创建装配图封装对象

`SailWind Layout` 使用装配图中的装配轮廓和装配参考标志来定义零件的精确轮廓并标识零件体。装配轮廓显示在板装配过程中零件放置的位置。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器。

2. 点击**绘图工具栏**按钮，然后点击**2D 线**按钮，然后在装配图顶层绘制轮廓。有关绘制 2D 形状的更多信息，请参见创建绘图对象。


> [!tip] 如果将零件翻转到板的另一侧，装配轮廓会随之翻转。尽管您在装配顶层创建轮廓，但当您将组件从安装侧翻转到相反侧时，它会自动翻转到装配底层。

3. 在装配轮廓顶层添加第二个参考标志标签。参考标志标签应较大并位于轮廓内部。有关比下面列出的更全面的步骤，请参见 PCB 封装编辑器中的创建属性标签。

    a. 点击**添加新标签**。

    b. 在添加新封装标签对话框中的属性列表中，选择 Ref.Des.属性。

    c. 在层列表中，选择装配图顶层。

    d. 点击**确定**。标签显示值为"Name"。

    e. 右键单击并点击**移动**弹出菜单项。

    f. 定位新标签。


> [!tip] 要在设计编辑器中全局创建装配层参考标志，请参见为装配图生成第二组参考标志。

👀‍**结果**

如果绘制 2D 项目后未显示，可能是该层的线条颜色与背景颜色相同。在显示颜色设置对话框中为线条设置不同的颜色。

### 创建丝印层封装对象

丝印轮廓印刷在板上，并在零件放置后仍可见。此轮廓及其参考标志、管脚编号和极性标签向组装、测试或维修板的任何人标识零件及其管脚。如果没有第 20 层的实际推挤轮廓，丝印也可作为推挤轮廓。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器。

2. 点击**绘图工具栏**按钮，然后点击**2D 线**按钮，然后在丝印顶层绘制轮廓。有关绘制 2D 形状的更多信息，请参见创建绘图对象。


> [!tip] 如果将零件翻转到板的另一侧，丝印轮廓会随之翻转。尽管您在丝印顶层创建轮廓，但当您将组件从安装侧翻转到相反侧时，它会自动翻转到丝印底层。

3. 将丝印参考标志移动到丝印顶层。丝印参考标志标签在创建新封装时自动添加，但默认添加到顶层（安装层）。

    a. 双击封装中的"Name"标签。

    b. 在封装标签属性对话框中的层列表中，选择丝印顶层。

    c. 点击**确定**。

4. 根据需要添加管脚编号和极性标签。标签应位于轮廓外部，在零件放置后可见的位置。有关比下面列出的更全面的步骤，请参见"PCB 封装编辑器中的创建属性标签"。

5. 具有许多管脚的大型组件的丝印通常在选定管脚旁边有微型点或管脚编号可见，以便在测试或故障排除期间更容易在板上定位管脚。如果在封装中使用文本，则在组件放置到设计中时它们不可移动。请改用标签；必要时可以在设计中移动或删除标签。

    a. 点击**添加新标签**。

    b. 在添加新封装标签对话框中的属性框中，键入新属性的名称。该值只能在封装用于设计中时分配。

    c. 在层列表中，选择丝印顶层。

    d. 点击**确定**。标签显示您键入的属性名称。

    e. 右键单击并点击**移动**弹出菜单项。

    f. 定位新占位符。

👀‍**结果**

如果添加项目后未显示，可能是该项目设置的颜色与背景颜色相同。在显示颜色设置对话框中设置不同的颜色。

参考标志（Name 标签）由 Pin Num 列控制，零件类型（Type 标签）由 Type 列控制。

### 创建放置（推挤）封装轮廓

某些零件需要额外的间距以允许机器放置或物理板上的返工。放置（或推挤）轮廓定义了这些间距。

放置（推挤）轮廓（有时称为"庭院"）定义了当另一个零件移动靠近它时启动零件推挤的边界。

您可以在第 20 层上使用较大的轮廓，以确保即使对所有组件应用相同的"体到体"间距，您的设计放置也是正确的。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器。

2. 点击**绘图工具栏**按钮，然后点击**2D 线**按钮，然后在第 20 层（最大层模式下为 120 层）绘制定义推挤轮廓的 2D 线项目。有关绘制 2D 形状的更多信息，请参见创建绘图对象。


> [!tip] 轮廓不必是包围零件的连续形状。它可以由多个 2D 项目组成——放置在第 20 层（放置层）上的任何对象都被视为"轮廓"的一部分。

👀‍**结果**

软件将放置轮廓视为组件体的一部分。每当遇到它时，就会调用"体到体"间距规则。

如果在绘制 2D 项目后未显示，可能是第 20 层的线条颜色与背景颜色相同。在显示颜色设置对话框中为线条设置不同的颜色。

### 导入 DXF 格式的 RF 形状

您可以使用 AutoCAD 2004 DXF 格式将 DXF 格式的专用形状导入到您的封装或设计中。

🙊**限制**

DXF 导入仅支持以下几何图形：POINT、LINE、ARC、CIRCLE、ELLIPS、TRACE、SOLID、3DFACE、POLYLINE、LWPOLYLINE（AutoCAD R14）和具有层次结构的 BLOCKS。

🏃‍♂️‍**步骤**

1. 点击**绘图工具栏**按钮。

2. 在绘图工具栏上，点击**导入 DXF 文件**按钮。

   ![](/layout/guide/7/_page_41_Picture_4.jpeg)

   > [!tip] 导入 DXF 文件按钮的 DXF 导入功能针对将 RF 形状作为 2D 线或铜导入进行了优化。有关更多 DXF 导入功能，请使用文件 > 导入方法。

3. 在文件导入对话框中，浏览 DXF 文件，然后点击**打开**。

4. 在 DXF 导入对话框中，在 DXF 文件单位列表中，选择 DXF 文件中使用的单位。

5. 对于要包含在导入中的每个层：

    a. 选择添加复选框。

    b. 在 PCB 层列中，双击层框并选择用于该 DXF 层项目的 PCB 层。

    c. 在类型列中，双击类型框并选择 2D 线或铜作为该 DXF 层的项目类型。

    ![](/layout/guide/7/_page_41_Picture_12.jpeg)

    > [!warning] 设置为<所有层>的 PCB 层不能作为铜导入。在 PCB 封装中不能有<所有层>上的铜项目。

6. 点击**确定**。

👀‍**结果**

几何图形被添加到设计或 PCB 封装编辑器的封装中。如果您需要导入的几何图形是单个对象，但它们已被导入为多个线项目，请参见连接和闭合 2D 线和铜形状。


### PCB 封装编辑器中的属性

您可以在从 PCB 封装编辑器返回时自动将属性添加到属性字典中。

您可以在 PCB 封装编辑器中使用属性，但它们在概念上与布局编辑器中的属性不同：您可以在 PCB 封装编辑器中创建的唯一属性是与物理封装关联的封装属性。

属性字典在 PCB 封装编辑器中不存在；因此，PCB 封装编辑器中的属性仅是文本字符串。它们不具有属性字典中属性所具有的属性、类型、层次结构和其他设置。

当您使用编辑封装进入 PCB 封装编辑器（编辑设计封装）时，退出时会询问您是否应用所做的更改。如果在返回布局编辑器时应用更改，则您在 PCB 封装编辑器中添加的任何属性都将添加到属性字典中。这些属性被添加到属性层次结构的封装级别，并分配给适当的对象。


> [!danger] 
> 当您使用工具菜单项进入 PCB 封装编辑器（编辑库封装）时，您在 PCB 封装编辑器中创建的任何属性都不会添加到属性字典中。
> 
> 如果您在 PCB 封装编辑器中创建的属性存在于属性字典中，则字典中的现有属性将被保留。该属性被分配给使用封装的零件。如果属性的标签存在，则它与属性字典中的属性关联。
> 
> 如果您在 PCB 封装编辑器中创建的属性不存在于属性字典中，则会创建一个非 `ECO` 注册的属性，类型为自由文本。然后该属性被分配给使用封装的零件。如果属性的标签存在，则它与在属性字典中创建的属性关联。

### 在 PCB 封装编辑器中创建属性

您可以通过输入所需名称或从预定义列表中选择属性名称来为封装定义属性。

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器

2. 点击**编辑 > 属性管理器**菜单项

3. 在封装属性对话框中，点击**添加**

4. 执行以下操作之一：

   - 在新属性单元格中输入属性名称，然后按 Enter 键。属性名称在 PCB 封装编辑器中不会检查

   - 选择新建值单元格并点击**编辑**

   - 输入属性值，然后按 Enter 键。您也可以输入单位。如果未指定单位，则使用封装单位

5. 点击**关闭**


> [!tip] 您也可以使用**浏览库属性**按钮添加属性


### 修改属性

您可以使用属性管理器修改属性

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器

2. 点击**编辑 > 属性管理器**菜单项

3. 在封装属性对话框中，选择属性单元格或值单元格

4. 点击**编辑**

5. 输入新名称或值，然后按 Enter 键

6. 点击**关闭**

### 在 PCB 封装编辑器中创建属性标签

PCB 封装编辑器中的标签比布局编辑器中的标签提供更大的灵活性，可以显示封装属性或使用封装的对象的属性

除了增强的灵活性外，您可以在 PCB 封装编辑器中使用属性标签，就像在布局编辑器中使用标签一样

例如，您可以为零件属性"成本"创建标签。由于"成本"不是封装属性，您可以在布局编辑器的属性字典中创建属性，并在 PCB 封装编辑器中分配占位标签

创建标签时，它们可能不可见。使用显示颜色设置对话框打开标签的可见性

> [!tip] 版本 3.0 之前的零件名称、参考标志和终端编号标签在打开封装编辑器时自动转换为 3.0 及以上版本的标签

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器

2. 打开封装后，点击**绘图工具栏**按钮显示绘图工具栏

3. 点击**添加新标签**按钮

4. 在"添加新封装标签"对话框中，在属性列表中选择属性

5. 如果属性列表中没有显示所需属性，点击**浏览库属性**从所有库属性列表中选择

6. 值框显示所选属性的值

7. 在"显示"列表中选择要控制标签可见性的值

8. 通过指定字体、层、位置、XY 坐标、旋转、大小、笔画宽度、镜像、对齐等完成标签配置

9. 点击**确定**

### 创建占位属性标签

占位标签是不存在的属性的标签

占位标签有两个实际用途：

- 在封装中预定义标签位置

- 为将在布局编辑器中创建但尚不存在的属性创建标签

1. 在 PCB 封装编辑器中创建标签时，在"添加新封装标签"对话框的属性列表中点击"新建用户属性"

2. 输入要创建标签的属性名称

3. 继续定义标签

4. 创建占位标签后，可以轻松将其与属性字典中的现有属性关联

### 修改封装标签属性

使用封装标签属性对话框修改封装标签或更改标签显示的属性

🏃‍♂️‍**步骤**

1. 点击**工具 > PCB 封装编辑器**菜单项打开封装编辑器

2. 选择封装标签，右键点击，然后点击**属性**弹出菜单项

3. 在封装标签属性对话框中选择属性

4. 在"显示"列表中选择值

5. 通过指定字体、层、位置、XY 坐标、旋转、大小、笔画宽度、镜像、对齐等完成标签配置

6. 点击**确定**

### 非封装属性

封装标签始终与属性名称关联。在任何时候，该属性可能是也可能不是封装属性。

例如，您可以创建一个名为"我的属性"的封装属性，然后为其创建标签。如果删除封装属性，标签仍然存在，但现在它与名为"我的属性"的非封装属性关联。

反之亦然。您可以创建标签并将其与不是封装属性的属性关联（通过从库属性管理器中选择属性或在"添加新封装标签"对话框中输入属性名称）。标签现在与非封装属性关联。

### 在封装中创建禁止区域

您可以在 PCB 封装编辑器中创建禁止区域。封装级禁止区域与其他禁止区域类似。当您创建封装级禁止区域时，任何在设计编辑器中使用该封装的零件都会使用指定的禁止限制。

您可以创建限制走线和铜、铜平面、过孔和跳线以及测试点的封装级禁止区域。您不能创建放置、组件高度或组件钻孔的禁止区域。您在 PCB 封装编辑器中创建禁止区域的方式与在布局编辑器中相同。

您可以使用闭合多边形（带或不带圆弧）、圆形或矩形创建禁止区域。当前角度模式和设计网格设置决定了线条的放置。

您不能独立于所属零件移动封装级禁止区域。创建封装级禁止区域后，必须进入 PCB 封装编辑器才能修改禁止区域的任何属性。您在 PCB 封装编辑器中修改禁止区域的方式与在布局编辑器中完全相同。用户交互对于两者是相同的；唯一的区别是您可以限制的对象类型。

有关创建和修改禁止区域的更多信息，请参见禁止区域主题。

🏃‍♂️‍**步骤**

1. 在封装编辑器中打开封装，点击**绘图工具栏**按钮打开绘图工具栏，然后点击**禁止区域**按钮

2. 右键点击并从弹出菜单中选择要创建的形状类型的绘制模式

3. 创建闭合形状以定义禁止区域。关闭形状时自动显示绘图属性对话框

4. 在"添加绘图"对话框中，选择限制。如果选择放置限制，它会阻止其他组件的放置

5. 点击要放置禁止区域的层

6. 点击**确定**

👀‍**结果**

如果将设计以 ASCII 格式导出到不支持放置禁止区域的旧版软件，您将收到警告消息。如果放置限制是唯一限制，则不会导出禁止区域。如果放置限制不是唯一限制，则禁止区域将在没有放置限制的情况下导出。

### 修改封装级禁止区域

创建封装级禁止区域后，必须使用 PCB 封装编辑器修改其任何属性。您可以像修改任何其他绘图对象一样修改禁止区域的大小：移动边或角，或更改圆的直径。您还可以将禁止区域复制到另一个位置并更改其限制或层分配。

🏃‍♂️‍**步骤**

1. 选择边，右键点击，然后点击**选择形状**弹出菜单项

2. 右键点击并点击**属性**弹出菜单项

3. 打开或关闭限制并修改层设置

4. 点击**确定**


> [!danger] 
您不能修改作为物理设计重用一部分的禁止区域。如果尝试修改，将显示消息"无法修改重用元素。请先断开重用"。点击**确定**取消操作。

### 封装级禁止区域的层

要为内层（除顶层或底层外的任何层）创建禁止区域，必须将层数增加到三层。

封装级禁止区域使用与布局编辑器中创建的禁止区域相同的层分配，外加一个"相对层"选项。相对层将限制分配给放置组件的相对侧。例如，在编辑封装时，创建铜平面禁止区域并从层列表中选择"相对侧"。在布局编辑器中，组件安装在顶层时，禁止区域阻止底层该区域的铜平面。如果点击"翻转侧"将组件放置在底层，禁止区域阻止顶层该区域的铜平面。

### 从终端生成绘图形状

您可以使用终端的轮廓作为基础创建新的绘图形状。

1. 选择一个或多个终端

2. 右键点击并点击**生成绘图形状**弹出菜单项

3. 在"生成绘图形状"对话框中，从类型列表中选择绘图项目类型

4. 在层列表中，选择放置新绘图形状的层

5. 在宽度框中，输入新形状的线宽

6. 在"放大/缩小"值框中：

   - 要创建比终端轮廓大的新绘图形状，输入正数

   - 要创建与终端大小相同的新绘图形状，输入 0

   - 要创建比终端轮廓小的新绘图形状，输入负数

7. 点击**完成**关闭对话框并创建新形状，或点击**创建**保持对话框打开以创建更多形状

### 步进重复

PCB 封装编辑器中的步进重复工具定义复杂的重复阵列模式，确保从被测设备 PCB 上的组件扇出的走线一致。这种一致性确保设备仿真和测试在精确条件下进行。

步进重复以平面或极坐标阵列模式排列终端、绘图、铜、切割或文本项目。您可以复制单个或多个项目。

步进重复还会自动递增重复终端和文本后缀。

**线性步进重复**

使用步进重复对话框创建线性阵列。


**图 18. 线性步进重复的初始设置**

![](/layout/guide/7/_page_49_Figure_1.jpeg)

![](/layout/guide/7/_page_49_Figure_2.jpeg)

**极坐标步进重复**

使用步进重复对话框中的极坐标选项卡创建角度或圆形阵列。

![](/layout/guide/7/_page_49_Figure_5.jpeg)

**图 20. 极坐标步进重复的初始设置**

![](/layout/guide/7/_page_50_Figure_1.jpeg)

**图 21. 执行极坐标步进重复后的结果**

**径向步进重复**

使用步进重复对话框中的径向选项卡创建径向阵列。

![](/layout/guide/7/_page_50_Figure_5.jpeg)

![](/layout/guide/7/_page_50_Figure_6.jpeg)

![](/layout/guide/7/_page_51_Figure_1.jpeg)

![](/layout/guide/7/_page_51_Figure_2.jpeg)

## 阻焊层与钢网层

您可以在顶层/底层阻焊层和钢网层为单个焊盘堆叠、封装或元件创建自定义开窗。这可以在封装编辑器或焊盘堆叠中完成。

阻焊层与钢网层控制 在封装编辑器中创建阻焊开窗 在焊盘堆叠中创建阻焊开窗 在封装编辑器中创建钢网开窗 在焊盘堆叠中创建钢网开窗

### 阻焊层与钢网层控制

您可以使用多种方法控制 Gerber 输出中的阻焊或钢网开窗。您可以在掩膜层添加物理形状作为开窗，也可以在生成 Gerber 输出时创建开窗。由于不同区域可能有多个值，这些值的优先级遵循层次规则。您可以组合使用这些方法。

**工作区中的物理形状**

当您使用以下方法在掩膜层创建物理形状(开窗)时，可以在封装编辑器和设计编辑器中查看。

**在焊盘堆叠中**

您可以为焊盘堆叠添加阻焊和/或钢网层，并创建开窗的形状和尺寸。由于可以同时创建元件的所有管脚，因此可以一次性为元件的所有管脚添加掩膜开窗。此方法仅限于焊盘堆叠可用的焊盘形状。

您可以在设计级别执行此操作使其特定于设计，或在库级别执行此操作使其可用于使用该封装的每个新设计。

**在封装编辑器中**

在封装编辑器中编辑封装时，您可以向阻焊层或钢网层添加铜皮形状，该形状将成为掩膜开窗。有两种创建形状的方法：

- 您可以使用铜皮自由绘制形状。不像焊盘堆叠那样有形状限制。


> [!tip] 通过在一整排焊盘上绘制铜皮矩形来创建群组阻焊开窗。

- 您可以使用生成绘图形状命令基于终端形状生成铜皮形状，可将其添加到阻焊或钢网层。这与将形状添加到焊盘堆叠效果相同。

**CAM 输出中的生成形状**

在 CAM 输出中生成这些形状时，您无法在封装编辑器或设计编辑器中查看它们。它们仅在 CAM 预览中可见。

**在 CAM 输出中**

创建阻焊或钢网输出时，您可以添加焊盘(来自元件层)，焊盘形状将成为掩膜开窗。您可以通过绘图选项中的设置全局放大或缩小焊盘形状。

**在属性中**

您可以使用属性为特殊元件应用独特的放大或缩小设置。通过向封装添加"CAM.Solder mask.Adjust"或"CAM.Paste mask.Adjust"属性来指定放大或缩小值。该属性值适用于元件的所有焊盘。

**掩膜层次结构**

当存在冲突时，阻焊层和钢网层值具有层次顺序。当不同层次存在多个值时，使用最高优先级的值；其他值将被忽略。

下表内容仅在 CAM.Apply Oversize To All Pads 属性(在 PADS 2007.1 及更高版本的所有新设计中默认设置为 Yes)设置为 Yes 时有效。

| 层次级别                                | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1<br>(最高级别 -<br>覆盖所有其他) | • 焊盘堆叠中顶层和底层阻焊及钢网层的焊盘尺寸。如果在元件级别和封装级别都定义了焊盘尺寸，则优先级顺序为:                                                                                                                                                                                                                                                           |
|                                        | a. 元件实例级别值                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                        | b. 库封装级别值 更多信息请参见自定义封装管脚焊盘堆叠                                                                                                                                                                                                                                                                                                                                                   |
|                                        | • 组件级别的 CAM.Solder mask.adjust 和 CAM.Paste mask.adjust 属性的放大/缩小值。这适用于元件和过孔。                                                                                                                                                                                                                                                                                           |
|                                        | 提示<br>CAM.Solder mask.adjust 和 CAM.Paste mask.adjust 属性不仅与阻焊层或钢网层上的焊盘形状结合使用，在没有这些焊盘形状的情况下，它们还可以与顶层和底层元件焊盘结合使用，当在创建 CAM 文档时添加到阻焊和钢网层的配置中。更多信息请参见设计对象属性 |
|                                        | 注意:<br>因为这两项具有相同的优先级，当它们都被定义时，它们会被组合以生成掩膜形状。                                                                                                                                                                                                                                                                                                           |

**表 60. 阻焊 & 钢网尺寸优先级**

| 层次级别                                        | 描述                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 2                                              | • 库封装级别的 CAM.Solder mask.adjust 和 CAM.Paste mask.adjust 属性的放大/缩小值。                                                                                                                                                                                                         |
|                                                | 提示<br>CAM.Solder mask.adjust 和 CAM.Paste mask.adjust 属性在创建 CAM 文档时与顶层和底层元件焊盘结合使用，当添加到阻焊和钢网层的配置中。更多信息请参见 PCB 封装编辑器中创建属性 |
| 3                                              | • PCB 级别的 CAM.Solder mask.adjust 和 CAM.Paste mask.adjust 属性的放大/缩小值。更多信息请参见向设计中所有对象添加属性                                                                                                                                     |
| 4<br>(最低级别 - 被所有<br>其他级别覆盖) | • 全局 CAM 的放大/缩小值，绘图选项 > 焊盘放大(缩小)值与 CAM.Apply Oversize To All Pads 属性结合使用。更多信息请参见绘图选项对话框                                                                                                            |

**表 60. 阻焊 & 钢网尺寸优先级(续)**

### 创建阻焊开窗

使用封装编辑器，您可以为阻焊层创建自定义阻焊开窗。

通过复制焊盘形状创建阻焊开窗 通过绘制开窗形状创建阻焊开窗

#### 通过复制焊盘形状创建阻焊开窗

您可以通过复制焊盘形状、放大或缩小它，并将其作为铜皮保存在顶层或底层阻焊层上来创建阻焊开窗。

🏃‍♂️‍**步骤**

1. 从库或设计中打开封装。

2. 不选择任何内容，右键单击，然后单击**选择终端**弹出菜单项。

3. 选择要复制的终端，右键单击，然后单击**生成绘图形状**弹出菜单项。

4. 在生成绘图形状对话框中，从类型列表中选择铜皮。

5. 从层列表中选择阻焊顶层或阻焊底层。

6. 根据需要设置宽度和"放大/缩小值"。

7. 单击**创建**。

8. 单击**关闭**。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层阻焊层分配颜色，并通过从层列表中选择使其成为活动层。

#### 通过绘制开窗形状创建阻焊开窗

您可以通过在顶层或底层阻焊层上绘制铜皮开窗形状来创建阻焊开窗。


> [!tip] 您也可以使用此过程创建群组阻焊开窗。

1. 从库或设计中打开封装。

2. 选择阻焊顶层或阻焊底层。

3. 单击**绘图工具栏**按钮。

4. 单击**铜皮**按钮。

5. 创建新的开窗形状(见第 613 页)。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层阻焊层分配颜色，并通过从层列表中选择使其成为活动层。

### 在焊盘堆叠中创建阻焊开窗

您可以在焊盘堆叠中为单个管脚或元件创建自定义阻焊开窗。

![](/layout/guide/7/_page_56_Picture_8.jpeg)

🏃‍♂️‍**步骤**

1. 不选择任何内容，右键单击，然后单击**选择元件**弹出菜单项。

2. 选择需要创建阻焊开窗的管脚所属元件。

3. 右键单击，然后单击**属性**菜单项。

4. 在元件属性对话框中，选择**焊盘堆叠**按钮。

5. 在焊盘堆叠属性对话框中，如果只想为单个管脚创建开窗，在管脚：镀层：列表下单击**添加**按钮，并选择管脚。否则转到步骤 6。

6. 在形状；尺寸：层：列表下单击**添加**按钮，添加阻焊顶层或阻焊底层。

7. 选择合适的焊盘形状，并为新的阻焊开窗设置宽度、长度和方向值。

8. 单击**确定**。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层阻焊层分配颜色，并通过从层列表中选择使其成为活动层。


### 在封装编辑器中创建钢网开窗

阅读以下部分了解如何使用封装编辑器为钢网层创建自定义钢网开窗。

通过复制焊盘形状创建钢网开窗

通过绘制开窗形状创建钢网开窗

#### 通过复制焊盘形状创建钢网开窗

您可以通过复制焊盘形状、放大或缩小它，并将其作为铜皮保存在顶层或底层钢网层上来创建钢网开窗。

🏃‍♂️‍**步骤**

1. 从库或设计中打开封装。

2. 不选择任何内容，右键单击，然后单击**选择终端**弹出菜单项。

3. 选择要复制的终端，右键单击，然后单击**生成绘图形状**弹出菜单项。

4. 在生成绘图形状对话框中，在类型列表中单击铜皮。

5. 在层列表中选择钢网顶层或钢网底层。

6. 根据需要设置宽度和放大值。

7. 单击**创建**。

8. 单击**关闭**。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层钢网层分配颜色，并通过从层列表中选择使其成为活动层。

#### 通过绘制开窗形状创建钢网开窗

您可以通过在顶层或底层钢网层上绘制铜皮开窗形状来创建钢网开窗。

1. 从库或设计中打开封装。

2. 选择钢网顶层或钢网底层。

3. 单击**绘图工具栏**按钮。

4. 单击**铜皮**按钮。

5. 创建新的开窗形状(见第 613 页)。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层钢网层分配颜色，并通过从层列表中选择使其成为活动层。


### 在焊盘堆叠中创建钢网开窗

您可以在焊盘堆叠中为单个管脚或元件创建自定义钢网开窗。

> [!tip] 焊盘堆叠中的钢网开窗优先级高于所有其他钢网开窗值。参见"阻焊层与钢网层控制"。

🏃‍♂️‍**步骤**

1. 不选择任何内容，右键单击，然后单击**选择元件**菜单项。

2. 选择需要创建钢网开窗的管脚所属元件。

3. 右键单击，然后单击**属性**菜单项。

4. 在元件属性对话框中，单击**焊盘堆叠**按钮。

5. 在焊盘堆叠属性对话框中，如果只想为单个管脚创建开窗，在管脚：镀层：列表下单击**添加**按钮，并选择管脚。否则转到步骤 6。

6. 在形状；尺寸：层：列表下单击**添加**按钮，添加钢网顶层或钢网底层。

7. 选择合适的焊盘形状，并为新的钢网开窗设置宽度、长度和方向值。

8. 单击**确定**。

要查看新的开窗形状，您需要打开显示颜色设置对话框，为顶层或底层钢网层分配颜色，并通过从层列表中选择使其成为活动层。

## 从库更新设计

当您将网表导入设计时，`SailWind Layout` 会将库中元件内容的副本写入设计。然而，随着时间的推移，当您更新库时，设计中的元件会与库中的新版本不同步。

使用从库更新(UFL)可以创建当前设计与库之间任何元件差异的报告，并更新设计以反映库的当前状态。您可以比较或更新：

- 元件类型

- PCB 封装和封装规则

- 属性和标签

🙊**限制**

从库更新设计时，这些限制将适用：

- 由于设计中的每个项目仅通过名称与其库对应项链接，未经考虑的更新可能会产生不可预见和意外的后果。在更新任何设计之前，您应始终确定更新将如何影响它。要么生成比较报告并确定设计与库之间存在哪些差异(从而确定更新期间会发生哪些更改)，要么制作设计的副本并检查/测试更新后的副本是否存在不需要的更改或行为。

- 要在比较报告中查找库与设计之间的差异，请搜索"different"。

- 更新导致的设计更改可能导致现有电气网络被截断、拆分或完全删除。如果更新元件的参考前缀在电气网络对话框中指定，它也可能导致现有电气网络扩展或创建新的电气网络。更多信息请参见第 337 页的"电气网络"。

🏃‍♂️‍**步骤**

1. 验证库顺序是否正确。从库更新会根据"库列表对话框"(第 1448 页)中显示的库顺序搜索库中的元件类型。

2. 如果只想比较/更新特定元件，请选择它们。否则，从库更新过程默认选择设计中的所有元件。

3. 单击**工具 > 从库更新**菜单项。

4. 在从库更新对话框中修改设置。

5. 单击**确定**。

当比较或更新操作完成时，更新报告将打开以供查看，并且报告文件的链接将写入输出窗口。


## 撤销从库更新

如果更新操作至少更新了一个项目，更新过程会创建一个撤销检查点，以便您可以撤销对设计所做的任何更改。您可以使用**编辑>撤销**菜单项恢复到上次保存的检查点。


> [!tip] 如果没有更新任何内容，从库更新过程不会创建新的撤销检查点，并保留先前命令创建的撤销数据和撤销检查点。

## 防止从库更新撤销缓冲区溢出

`SailWind Layout` 将撤销更新所需的数据存储在*撤销缓冲区*中。

为了防止在更新非常大的设计时此缓冲区溢出，UFL 会估算生成的撤销数据量，如果存在缓冲区溢出风险，则会显示以下提示：

"撤销缓冲区无法容纳太多数据。撤销缓冲区将被清除。继续吗？"

选择以下操作之一：

- 单击**确定**清除撤销缓冲区并禁用此更新的撤销创建。更新操作将继续，您将无法撤销更新。

- 单击**取消**取消更新并返回到 UFL 对话框。保留先前命令创建的撤销数据和撤销检查点。

## 比较/更新过程

更新过程首先比较设计内容与库内容。如果发现设计内容与库内容不同，则根据从库更新对话框中设置的选项更新设计内容，并将结果记录在报告文件中。比较过程相同，只是不更新设计。

**通用规则**

在比较/更新期间，系统将强制执行许多通用规则以确保过程的正确执行。

在比较和更新时，以下通用规则适用于所有项目：

- **匹配项目** 对于从库更新对话框的设计项目区域中列出的每个元件类型和封装，将搜索所有可用库以查找匹配的命名条目，并使用找到的第一个匹配条目。按照库列表对话框(**主页>库>管理库列表**按钮)中显示的顺序搜索库。您可以使用此对话框更改搜索顺序。关闭了允许搜索属性的库将被忽略。如果未找到匹配项，则跳过该项目的比较，并在报告文件中记录"未找到"条目。

- **时间戳** 设计和库中的每个元件类型和封装都有一个时间戳。根据从库更新对话框中选择的选项，时间戳的比较可以确定比较/更新的内容。参见从库更新对话框。使用 `SailWind Layout` 9.1 之前版本创建的设计没有时间戳。有关如何处理这些设计的信息，请参见旧设计。

**比较内容**

在比较/更新过程中，会比较多与元件类型和 PCB 封装结构相关的参数。

下表列出了为每个选定进行比较或更新的项目比较和报告的内容。

| 项目或元素        | 比较和报告的内容                                                                                                                                                                                                  |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 元件类型          | 时间戳、逻辑系列、`ECO` 注册(y n)、特殊用途标志、<br>门数量、门管脚数量、信号管脚数量、连接器管脚数量、<br>属性数量、管脚映射数量、封装数量、关联封装列表 |
| 每个门            | 管脚数量、门交换 ID                                                                                                                                                                                              |
| 每个门管脚        | 管脚编号、管脚名称、管脚类型、管脚交换 ID                                                                                                                                                                          |
| 每个信号管脚      | 管脚编号、名称                                                                                                                                                                                                   |
| 每个连接器管脚    | 管脚编号                                                                                                                                                                                                         |
| 每个属性          | 属性值                                                                                                                                                                                                           |
| 每个管脚映射      | 管脚编号值                                                                                                                                                                                                       |

**表 61. 比较和报告的元件类型结构**

**表 62. 比较和报告的 PCB 封装结构**

| 项目或元素             | 比较和报告的内容                                                                                                                                                                                                             |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PCB 封装                | 时间戳、终端数量、焊盘堆叠数量、属性数量、外形<br>轮廓片段数量、自由铜皮数量、禁止区域数量、文本项目<br>数量、标签数量、尺寸数量、关联铜皮数量、封装<br>规则集数量 |
| 每个终端               | 终端编号、关联焊盘堆叠、位置(x y)、关联铜皮<br>列表                                                                                                                                                                         |
| 每个焊盘堆叠           | 钻孔直径、钻孔镀层(y n)、钻孔开槽(y n)、钻孔长度、钻孔偏移、<br>钻孔方向、焊盘数量，以及：                                                                      |
|                        | • 每个普通焊盘：层、焊盘形状和尺寸、角样式、偏移、<br>方向                                                                                                     |
|                        | • 每个热焊盘：层、热焊盘形状和尺寸、辐条数量、<br>辐条宽度、辐条角度                                                                                           |
|                        | • 每个反焊盘：层、反焊盘形状和尺寸                                                                                                                             |
| 每个属性               | 属性值                                                                                                                                                                                                                      |
| 每个封装规则           | 规则值                                                                                                                                                                                                                      |
| 每个外形轮廓片段       | 层、形状(开放、闭合或圆形)、原点(第一角<br>位置)(x y)、线宽，以及：                                                                                            |
|                        | • 如果形状是开放或闭合：几何角数量、几何弧<br>数量，以及：                                                                                                     |
|                        | • 每个角：位置(x y)                                                                                                                                           |
|                        | • 每个弧：弧中心和半径                                                                                                                                        |
|                        | • 如果形状是圆形：圆半径                                                                                                                                      |
| 每个自由铜皮           | 层、形状(开放、闭合或圆形)、原点(第一角<br>位置)(x y)、线宽、关联开孔数量，以及：                                                                              |
|                        | • 如果形状是开放或闭合：几何角数量、几何弧<br>数量，以及：                                                                                                     |
|                        | • 每个角：位置(x y)                                                                                                                                           |
|                        | • 每个弧：弧中心和半径                                                                                                                                        |
|                        | • 如果形状是圆形：圆半径                                                                                                                                      |
|                        | • 每个关联开孔：形状(开放、闭合或圆形)、<br>原点(第一角位置)(x y)、线宽，以及：                                                                               |
|                        | • 如果形状是开放或闭合：几何角数量、几何<br>弧数量，以及：                                                                                                     |
|                        | • 每个角：位置(x y)                                                                                                                                           |
|                        | • 每个弧：弧中心和半径                                                                                                                                        |
|                        | • 如果形状是圆形：圆半径                                                                                                                                      |
| 每个禁止区域           | 形状(开放、闭合或圆形)、原点(第一角位置)(x y)、<br>线宽、限制，以及：                                                                                          |
|                        | • 如果形状是开放或闭合：几何角数量、几何弧<br>数量，以及：                                                                                                     |
|                        | • 每个角：位置(x y)                                                                                                                                           |
|                        | • 每个弧：弧中心和半径                                                                                                                                        |
|                        | • 如果形状是圆形：圆半径                                                                                                                                      |

**表 62. 比较和报告的 PCB 封装结构(续)**

| 项目或元素            | 比较和报告的内容                                                                                                                                                                                                              |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 每个文本项目          | 层、文本字符串、字体、文本高度、线宽、镜像(y n)、位置(x y)、<br>旋转、对齐方式(水平 垂直)。                                                                     |
| 每个标签              | 关联属性、层、字体、文本高度、线宽、镜像(y n)、<br>位置(x y)、旋转、对齐方式(水平 垂直)、右读、<br>可见性                                                       |
| 每个关联铜皮          | 终端 ID、层、形状(开放、闭合或圆形)、原点(第一<br>角位置)(x y)、线宽、关联开孔数量，以及：                                                                        |
|                       | • 如果形状是开放或闭合：几何角数量、几何弧<br>数量，以及：                                                                                                      |
|                       | • 每个角：位置(x y)                                                                                                                                            |
|                       | • 每个弧：弧中心和半径                                                                                                                                         |
|                       | • 如果形状是圆形：圆半径                                                                                                                                       |
|                       | • 每个关联开孔：形状(开放、闭合或圆形)、<br>原点(第一角位置)(x y)、线宽，以及：                                                                                |
|                       | • 如果形状是开放或闭合：几何角数量、几何<br>弧数量，以及：                                                                                                      |
|                       | • 每个角：位置(x y)                                                                                                                                            |
|                       | • 每个弧：弧中心和半径                                                                                                                                         |
|                       | • 如果形状是圆形：圆半径                                                                                                                                       |
| 每个尺寸              | 类型、层、原点(x y)、文本字体、文本、片段数量，以及：                                                                                                           |
|                       | • 对于文本：层、字体、文本高度、线宽、镜像、位置(x y)、<br>旋转、对齐方式(水平 垂直)                                                                            |
|                       | • 每个片段：片段类型、几何角数量、几何弧<br>数量，以及：                                                                                                        |
|                       | • 每个弧：弧中心和半径                                                                                                                                         |

**表 62. 比较和报告的 PCB 封装结构(续)**

**旧设计**

使用 PADS Layout 9.1 之前版本创建的设计没有时间戳。在处理旧设计时这一点很重要。

当打开这些设计之一时，设计中所有元件类型和封装的时间戳都设置为"1970 年 1 月 1 日 00:00:00"(UTC)。要确定设计中元件类型和封装的内容是否与库同步，请选择隐藏相同结果复选框比较设计和库。

## 如何阅读更新报告

每次从库更新设计或生成比较报告时，`SailWind Layout` 都会将操作结果写入*C:\SailWind Projects*中的新文件*UpdateFromLibrary_Layout_Report.txt*。

更新报告为您提供有关选定进行比较或更新的项目的信息，包括：

- 设计中项目的时间戳是比库中项目的时间戳更旧、更新还是相同。

- 设计中项目的内容与库中项目的内容是相同还是不同。

- 比较项目之间的差异。

**更新报告示例**

更新报告分为标题和六个部分：报告选项、结果摘要、元件类型摘要、PCB 封装摘要、元件类型比较详情和 PCB 封装比较详情。

以下图表给出了每个部分的示例：

• **报告选项部分** — 列出从库更新对话框为此操作选择的选项。示例：

• **结果摘要部分** — 提供比较和更新结果的统计摘要。示例：

| 结果摘要  |      |
| --------- | ---- |
| 比较摘要: |      |
| 已选择    | 32   |
| 已比较    | 30   |
| 不同      | 14   |
| 警告      | 0    |
| 错误      | 0    |
| 已跳过    | 2    |
| 更新摘要: |      |
| 已更新    | 30   |
| 警告      | 0    |
| 失败      | 0    |
| 已跳过    | 0    |

• **元件类型摘要部分** — 列出所有选定的元件类型和封装，并提供每个的比较/更新信息。示例：

| 元件类型摘要 |                          |                         |                                                                                                                                                                                |  |  |  |
|--------------|--------------------------|-------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|
|              |                          | 设计                    | 比较状态                                                                                                                                                                       |  |  |  |
| 元件类型      | 在库中找到               | 时间戳                  | 内容状态                                                                                                                                                                       |  |  |  |
|              |                          |                         | ============================================================================================================================================================================== |  |  |  |
| +5VREG       | preview                  | 比库中旧                | 已更新<br>相同                                                                                                                                                                 |  |  |  |
| 24-576447    | preview                  | 比库中旧                | 已更新<br>相同                                                                                                                                                                 |  |  |  |
| 26PINCONN    | Dreview                  | 比库中旧                | 已更新<br>相同                                                                                                                                                                 |  |  |  |
| 875256       | Dreview                  | 比库中旧                | 已更新<br>不同                                                                                                                                                                 |  |  |  |
| AM100415     | and                      | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| CAP-ELECTAA  | 335C                     | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| CAP1206      | 015C                     | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| CD40018      | national                 | 比库中旧                | 已更新<br>不同                                                                                                                                                                 |  |  |  |
| CD4069       | national                 | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| I FOAK       | < 未在库中找到 >         | 未检查                  | 未处理                                                                                                                                                                         |  |  |  |
| PAL 1688     | and                      | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| R1/8W        | 015C                     | 比库中旧                | 不同<br>已更新                                                                                                                                                                 |  |  |  |
| SHIELD       | Dreview                  | 比库中旧                | 已更新<br>相同                                                                                                                                                                 |  |  |  |

• **PCB 封装摘要部分** — 列出与选定元件类型关联的所有 PCB 封装，并提供每个的比较/更新信息。示例：

| PCB 封装摘要 |                  |                        |                  |
| ----------- | ---------------- | ---------------------- | ---------------- |
|             |                  | 设计                   | 更新<br>比较状态 |
| PCB 封装     | 在库中找到       | 时间戳                 | 内容<br>状态     |
|             |                  |                        |                  |
| 1206        | солтол           | 比库中旧               | 已更新<br>相同   |
| 26PINCONN   | совтол           | 比库中旧  不同         | 已更新           |
| 6032        | созтол           | 比库中旧               | 已更新<br>相同   |
| OTP14       | совтол           | 比库中旧               | 已更新<br>相同   |
| DIPIS       | совтоо           | 比库中旧               | 已更新<br>相同   |
| 01820       | солтол           | 比库中旧               | 已更新<br>相同   |
| ELECTAA     | совтой           | 比库中旧               | 已更新<br>相同   |
| LCC2050     | солтой           | 比库中旧               | 已更新<br>相同   |
| LEDR A      | < 未在库中找到 > | 未检查                 | 未处理           |
| 050         | preview          | 比库中旧  不同         | 已更新           |
| R1/8W       | солто п          | 比库中旧               | 相同<br>已更新   |
| R1/8WA      | совтоо           | 比库中旧               | 已更新<br>相同   |
| R1/8WB      | содност          | 比库中旧               | 已更新<br>相同   |
| SHEET D     | Dreview          | 比库中旧               | 已更新<br>相同   |
| 5014        | содност          | 比库中旧  不同         | 已更新           |
| 5016        | совтол           | 比库中旧  不同         | 已更新           |
| 5020        | совтоо           | 比库中旧  不同  已更新 |                  |
| 5028        | солто п          | 比库中新  不同  已更新 |                  |
| TO-213AA    | СОЛПОЛ           | 比库中旧               | 已更新<br>相同   |

• **元件类型比较详情部分** — 列出比较的元件类型，显示详细的比较结果。示例：

| 元件类型比较详情  |      |            |                    |        |                                     |                      |                          |
| ----------------- | ---- | ---------- | ------------------ | ------ | ----------------------------------- | -------------------- | ------------------------ |
| 元件类型: CAP1206 |      |            |                    |        |                                     |                      |                          |
| 元件类型摘要      | 比较 |            | 设计               |        |                                     | 库: misc             |                          |
| 时间戳            |      |            |                    |        | 不同   Thu Jan 01 00:00:00 1970 UTC |                      | Wed Dec 22 14:44:43 2004 |
| 逻辑系列          |      | 相同 / CAP |                    |        |                                     | / CAP                |                          |
| `ECO` 注册           |      | 相同 / Yes |                    |        |                                     | / Yes                |                          |
| 特殊用途          |      |            | 相同 / none        |        |                                     | / поле               |                          |
| 门                |      | 相同       | count =            | 1      |                                     | count =              | 1                        |
| 门管脚            |      |            | 相同 { count =     | 2      |                                     | count =              | 2                        |
| 信号管脚          |      | 相同 /     | count =            | 0      |                                     | count =              | 0                        |
| 管脚映射          |      | 相同 /     | count =            | 0      |                                     | count =              | 0                        |
| 属性<br>封装      |      | 不同 I     | count =<br>count = | 6<br>1 |                                     | count =<br>/ count = | 9<br>1                   |
| 封装 1            |      | 相同 /     | same / 1206        |        |                                     | 1 1206               |                          |

• **PCB 封装比较详情部分** — 列出比较的封装，显示详细的比较结果。示例：

| PCB 封装比较详情<br>       |                                           |                                      |                                                                                                                                                                                |
|---------------------------|-------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PCB 封装 : 1206            |                                           |                                      |                                                                                                                                                                                |
| PCB 封装摘要<br>比较        | 设计                                      | 库: common                           |                                                                                                                                                                                |
| 时间戳<br>1<br>终端<br>1   | 不同   Thu Jan 01 00:00:00 1970 UTC       | 2<br>/ count =                       | Tue Aug 31 11:21:39 1999<br>2                                                                                                                                                  |
|                           | same   count =                            | / count =<br>1                       | 1                                                                                                                                                                              |
| 焊盘堆叠<br>关联铜皮<br>1  | same   count =<br>same   count =          | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 属性                      | same   count =                            | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 规则                      | same   count =                            | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 属性标签                  | same   count =                            | 2<br>/ count =                       | 2                                                                                                                                                                              |
| 自由文本                  | same   count =                            | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 自由铜皮<br>1             | same   count =                            | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 禁止区域                  | / count =<br>相同                         | 0<br>/ count =                       | 0                                                                                                                                                                              |
| 外形轮廓                  | same   count =                            | 2<br>/ count =                       | 2                                                                                                                                                                              |
| 尺寸                      | same   count =                            | 0<br>/ count =                       | 0                                                                                                                                                                              |

**更新报告消息**

以下表格列出并描述了更新报告中为比较/更新项目返回的消息。

| 出现在列:       | 消息                   | 解释                                                                                                                                                                                                              |
|------------------|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 设计时间戳       | 比库中旧               | 设计版本比<br>库版本旧。                                                                                                                                                                                         |
|                  | 相同                   | 设计和库版本<br>具有相同的时间戳。                                                                                                                                                                                |
|                  | 比库中新               | 设计版本比<br>库版本新。                                                                                                                                                                                         |
|                  | 未检查                 | 未比较时间戳，因为<br>未在库中找到该项目。                                                                                                                                                                        |
| 比较内容         | 相同                   | 设计和库中<br>比较的项目内容<br>相同。(不适用于<br>任何未比较的项目内容，因为<br>从库更新对话框中<br>关闭了比较。)                                                                                                 |
|                  | 不同                   | 设计和库中<br>比较的项目内容<br>不同。                                                                                                                                                                            |
|                  | 未检查                 | 未比较内容，因为<br>未在库中找到该项目。                                                                                                                                                                          |
| 更新状态         | 已更新                 | 设计项目已<br>使用库中的内容<br>更新。                                                                                                                                                                            |
|                  | 未处理                 | 设计项目(元件<br>类型/封装)未<br>更新，因为:                                                                                                                                                                      |
|                  |                        | • UFL 在比较模式下运行，或                                                                                                                                                                                        |
|                  |                        | • 未在库中找到该项目。                                                                                                                                                                                           |
|                  | 更新失败               | 无法更新<br>该项目。一些可能的<br>原因有:                                                                                                                                                                         |
|                  |                        | • 与库文件失去连接                                                                                                                                                                                               |
|                  |                        | • 设计和库项目之间<br>管脚计数不匹配                                                                                                                                                                              |

**表 63. 元件类型和 PCB 封装摘要消息**

| 出现在列:       | 消息 | 解释                                                                                          |
|------------------|-------|----------------------------------------------------------------------------------------------|
|                  |       | • 库元件类型没有<br>分配封装。                                                                |
|                  |       | • 更新元件类型和封装时<br>未在库中找到封装                                                    |
|                  | 已跳过 | 项目被跳过如果:                                                                                |
|                  |       | • 它们不符合<br>比较/更新条件(例如<br>具有相同时间戳的项目)，或                                |
|                  |       | • 未在库中找到该项目。                                                                         |

**表 63. 元件类型和 PCB 封装摘要消息(续)**

| 出现在列:       | 消息              | 解释                                                                                                                               |
|------------------|-------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 比较            | 相同              | 设计和库中<br>项目内容相同。<br>(顺序可以不同。)                                                                                  |
|                 | 不同             | 设计和库中<br>项目内容不同。<br>提示<br>导出为 ASCII 并<br>重新导入的设计可能显示                                                   |
|                 |                   | 由于 ASCII 导出期间<br>进行的优化导致的<br>图形数据差异。                                                                           |
|                 | 未在库中找到      | 库中不存在<br>该项目。                                                                                                            |
|                 | 未在设计中找到     | 设计中不存在<br>该项目。                                                                                                           |
| 库<br>设计       | none              | 项目没有特殊<br>用途标志。                                                                                                         |
|                 | < 无值 >          | 属性存在但未分配<br>值。                                                                                                           |
|                 | < 无属性 >        | 未找到属性。                                                                                                                       |
