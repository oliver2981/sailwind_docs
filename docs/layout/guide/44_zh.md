# 第 44 章 SPECCTRA 链接

SPECCTRA 链接将 PCB 设计文件数据发送到 SPECCTRA 设计文件，然后将 SPECCTRA 结果导回 PCB 设计文件。该链接具有自动 DO 文件编辑器功能，可编辑现有或新的 DO 文件。参数会在会话之间自动保存。

SPECCTRA 转换布线保护状态、物理设计重用、通孔和元件管脚上的测试点设置、封装禁区、板级禁区和板级切口。布线保护状态通过 SPECCTRA 的 fix 属性(用于走线)和 route 属性(用于通孔)在 SPECCTRA 与 PCB 设计文件之间传递。对于未布线走线的保护，仅当为完整连接(如起始和终止于元件管脚的布线链接)时才会传递给 SPECCTRA。更多信息请参阅"布线保护状态传递给 SPECCTRA"。

## 未使用管脚网络

SailWind 布局将未使用的管脚(未连接到网络的管脚)传递给 SPECCTRA。这些管脚及其扇出被添加到 SPECCTRA 中名为+UNUSED_PINS+的未使用管脚网络中(以前称为*UNUSED_PINS*)。当您将布线设计返回到 SailWind 布局时，也可以传递未使用管脚和扇出信息。+UNUSED_PINS+网络信息被转换为 SailWind 布局中的 NOT_CONNECTED 网络。您可以在 SPECCTRA 选项对话框中更改 NOT_CONNECTED 网络的名称，但该网络应具有唯一名称。

NOT_CONNECTED 网络是 SailWind 布局中的一个普通网络，包含扇出通孔、走线和未使用管脚。由于此网络在 SailWind 布局中是普通网络，因此在后续 SPECCTRA 会话中不再将其中的管脚视为未使用管脚。使用现有的 DO 文件可以防止此网络在后续会话中被当作普通网络进行布线。要在 SPECCTRA 中重新创建此网络，请在布线设计前在 SailWind 布局中删除它。

> [!tip] SailWind 布局无法为单管脚网络定义连接；因此，如果+UNUSED_PINS+网络仅包含单个元件管脚和扇出，SailWind 布局将无法解释它。

下图展示了 SPECCTRA 中未使用管脚的扇出。它还展示了 SailWind 布局如何解释这些扇出和未使用管脚。由于 SPECCTRA 现在转换元件管脚和通孔上的测试点属性，下图还展示了 SPECCTRA 如何传递分配给未使用管脚扇出的测试点。

**图 126. 未使用管脚的扇出**

![](/layout/guide/44/_page_1_Figure_5.jpeg)

## 传递给 SPECCTRA 的数据

您可以将 DFT 审核设置和禁区传递给 SPECCTRA。

**DFT 审核设置传递给 SPECCTRA**

您可以将 DFT 审核测试点放置选项传递给 SPECCTRA，供其测试点放置例程使用。SPECCTRA 通常在适用时使用这些选项。诸如测试点间距等选项会传递给 SPECCTRA。但诸如钉直径和夹具钻孔尺寸等选项仅由 DFT 审核使用。由于它们不影响 SPECCTRA 的测试点插入，因此不会传递此类信息。

SPECCTRA 基于 DFT 审核选项进行间距计算。SPECCTRA 的间距选项在 SPECCTRA DO 文件对话框的"设置测试点规则"区域中设置。有关 DFT 审核的更多信息，请参阅"测试设计"。

> [!tip] SPECCTRA 不允许为网络分配多个测试点。此设置不会传递给 SPECCTRA。

**禁区传递给 SPECCTRA**

SailWind 布局到 SPECCTRA 链接支持通孔禁区，并将其他类型的禁区(用于走线、弯曲、元件和管脚)传递给 SPECCTRA。任何层上的铜形状都以这种方式传递。通过操作此现有的禁区功能，您可以将其他特定禁区传递给 SPECCTRA。

SailWind 布局支持布局编辑器中的禁区。

**开槽孔传递给 SPECCTRA**

非镀层开槽孔转换为所有层的禁区。镀层开槽孔在电气中心使用圆形钻孔。

**布线保护状态传递给 SPECCTRA**

您可以在 SailWind 布局中设置选项，防止在 SPECCTRA 中修改已布线的走线和通孔。此功能在交互式布线和自动布线器中的批量布线期间保护关键放置的布线。保护状态在 SPECCTRA 之间传递。与受保护布线或未布线相关联的元件、通孔、测试点和其他设计项也受到保护。

**受保护的走线和通孔传递给 SPECCTRA**

具有保护状态的已布线走线以 fix 属性传递给 SPECCTRA。您不能修改固定的走线，布线器也不能布线到此走线。

连接到至少一条受保护走线的通孔以 route 属性传递给 SPECCTRA。虽然您不能修改这些通孔，但可以布线到它们以完成连接。

表 139 列出了 SPECCTRA 链接用于确定通孔属性的规则。

| 通孔有受保护走线 | 锁定的测试点状态 | 胶合状态 | SPECCTRA 通孔状态 |
|-----------------------------|-----------------------------|-------------|---------------------|
| 是                         | 任意                         | 任意         | Route               |
| 否                          | 是                         | 任意         | Route               |
| 否                          | 否                          | 是         | Protect             |
| 否                          | 否                          | 否          | 正常(默认) |

**表 139. SPECCTRA 链接规则**

**受保护的未布线走线传递给 SPECCTRA**

布线保护状态仅对那些 SailWind 布局中作为完整连接(起始和终止于元件管脚)的未布线走线传递给 SPECCTRA。未布线的连接以带有 fix 属性的 fromto 形式传递给 SPECCTRA。

**带有布线走线的受保护元件传递给 SPECCTRA**

只要元件至少有一个管脚连接到具有布线保护的走线，就会以锁定状态传递给 SPECCTRA。

**从 SPECCTRA 接收布线走线的保护状态**

- 具有 fix 属性的 SPECCTRA 走线作为具有布线保护的走线返回到 SailWind 布局。

- 在 SPECCTRA 中具有 protect 属性的通孔在 SailWind 布局中转换为胶合状态。

- 在 SPECCTRA 中具有 route 属性的通孔在 SailWind 布局中不会获得特殊保护。

表 140 至表 142 提供了 SailWind 布局走线、通孔和未布线的传递和返回保护状态列表。

| SailWind 布局中的状态 | 传递给SPECCTRA 的状态 | SPECCTRA 中的保护 | 从 SPECCTRA传递的状态 | 返回到 SailWind布局的状态 |
|------------------------------|------------------------------|---------------------------|-----------------------------------|------------------------------------------|
| 常规走线                | 普通类型走线             | ---                       | 普通类型                       | 常规走线                            |
| 常规走线                | 普通类型                  | Protect                   | Protect 类型                      | 常规走线                            |
| 常规走线                | 普通类型                  | Fix                       | Protect 类型                      | 常规走线                            |
| 受保护走线              | Fix 类型                     | ---                       | Fix 类型                          | 受保护走线                          |
| 受保护走线              | Fix 类型                     | Protect/Unprotect     | Fix 类型                          | 受保护走线                          |
| 受保护走线              | Fix 类型                     | Fix/unfix                 | Fix 类型                          | 受保护走线                          |

**表 140. 走线的保护状态**

**表 141. 通孔的保护状态**

| SailWind 布局中走线的状态 |                     |                 |                              |                           |                                   |                                             |
|------------------------------------|---------------------|-----------------|------------------------------|---------------------------|-----------------------------------|---------------------------------------------|
| 有受保护走线         | 锁定TP 状态 | 胶合状态 | 传递给SPECCTRA 的状态 | SPECCTRA 中的保护 | 从 SPECCTRA传递的状态 | 返回到SailWind布局的状态 |
| 是                                | 任意                 | 任意             | Route                        | 任意                       | Route                             | 正常*                                     |
| 否                                 | 是                 | 任意             | Route                        | 任意                       | Route                             | 正常*                                     |
| 否                                 | 否                  | 是             | Protect                      | ---                       | Protect                           | 胶合                                       |
| 否                                 | 否                  | 是             | Protect                      | Unprotect                 | Normal                            | 正常**                                    |
| 否                                 | 否                  | 是             | Protect                      | Unfix                     | Protect                           | 胶合                                       |
| 否                                 | 否                  | 是             | Protect                      | Fix, protect              | Protect                           | 胶合                                       |
| 否                                 | 否                  | 否              | Normal                       | ---                       | Normal                            | 正常                                      |
| 否                                 | 否                  | 否              | Normal                       | Fix, protect              | Protect                           | 胶合                                       |

如果在原始 SailWind 布局设计中定义，通孔的胶合状态将丢失。测试点由 SPECCTRA 保留并返回到 SailWind 布局设计。

如果在 Unprotect 命令后在 SPECCTRA 中执行 route、edit 或 clean 命令，可以删除通孔。

| SailWind 布局中未布线的类型 | 传递给 SPECCTRA的形式 | 从 SPECCTRA 返回的形式 |
|---------------------------------------|--------------------------|---------------------------|
| 未受保护的未布线                 | 无特殊处理      | 无特殊处理       |

| SailWind 布局中未布线的类型                 | 传递给 SPECCTRA的形式 | 从 SPECCTRA 返回的形式                               |
|-------------------------------------------------------|--------------------------|---------------------------------------------------------|
| 完全未布线的受保护连接              | Fromto 类型, Fix         | 无特殊处理—在 SailWind 布局中不受保护 |
| 部分布线连接的受保护未布线 | 无特殊处理      | 无特殊处理                                     |

**表 142. 未布线的保护状态(续)**

**物理设计重用传递给 SPECCTRA**

作为物理设计重用元素的走线以 fix 属性传递给 SPECCTRA。因此，您不能修改或布线它们。SPECCTRA 仅连接到以 route 属性传递的物理设计重用中的通孔和铜。表 143 提供了物理设计重用处理的摘要。

| 重用元素       | 传递给 SPECCTRA的形式 | 从 SPECCTRA 返回                                                                                             |
|---------------------|--------------------------|--------------------------------------------------------------------------------------------------------------------|
| 元件           | lock_type fix            | 否(发出警告；无论是否更改，新放置都不会返回到 SailWind 布局。) |
| 通孔                 | type route               | 否                                                                                                                 |
| 走线               | type fix                 | 否                                                                                                                 |
| 跳线              | lock_type fix            | 否                                                                                                                 |
| 带有网络名的铜 | type route               | 否                                                                                                                 |

**跳线传递给 SPECCTRA**

您可以将跳线传递给 SPECCTRA。SPECCTRA 不会尝试布线 SailWind 布局跳线。


> [!tip] 不要使用 SPECCTRA 跳线；它们不向后兼容。

## SailWind 布局到 SPECCTRA 规则转换

设计规则使用关键字 RULE 和 CIRCUIT 转换为两种类型的 SPECCTRA 规则之一。转换中使用的类型针对每个 SPECCTRA 规则指示。

**布线、高速和间距规则**

布线、高速和间距规则支持类、网络、组和管脚对。此外，如表 144 所示，SailWind 布局默认规则在可能时传递。

| SailWind 布局布线规则                                                            | SPECCTRA 布线规则      |
|------------------------------------------------------------------------------------------|-----------------------------|
| 铜共享                                                                           | (rule (tjunction on/off))   |
| 优先级                                                                                 | (circuit (priority #))      |
| 选定层*                                                                         | (circuit (use_layer # # #)) |
| 选定通孔*                                                                           | (circuit (use_via a b c))   |
| *选定层和选定通孔规则需要 SPECCTRA 中的高级规则选项。 |                             |

**表 144. 布线规则**

链接将默认布线规则传递给 SPECCTRA。铜共享在 PCB 规则级别传递。

链接还通过创建一个包含所有未分配到类的网络的人工类来传递优先级、选定层和选定通孔。此人工类名为 CLASS_nnnnnnn，其中 nnnnnnn 是从 0 到 9999999 的数字。然后，默认布线规则在此人工类中传递给 SPECCTRA，如表 145 所示。

| SailWind 布局高速规则 | SPECCTRA 高速规则                                                                                                |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| 最小/最大长度                   | (circuit (length max min) (type actual))                                                                                 |
| 短截线长度                      | (rule (max_stub #))                                                                                                      |
| 匹配长度                    | (circuit (match_fromto_length on/off) (tolerance dist))                                                                  |
| 带间隙的屏蔽                  | (circuit (shield on (use_net net)))(rule (shield_gapdist))网络必须是电源网络，否则 SPECCTRA 将在输入时失败。 |
| 并行长度和间隙       | (rule (parallel_segment (gap dist) (limit dist)                                                                          |

**表 145. 高速规则**

链接将默认高速规则传递给 SPECCTRA。它通过创建一个包含所有未分配到类的网络的人工类来传递并行长度、串联长度和间隙、短截线长度和最小/最大长度。此人工类名为 CLASS_nnnnnnn，其中 nnnnnnn 是从 0 到 9999999 的数字。然后，高速规则在此人工类中传递给 SPECCTRA。

**间距规则**

如表 146 所示，SPECCTRA 每条规则仅接受一个走线宽度，因此传递推荐宽度。

| SailWind 布局        | SPECCTRA                                       |
|------------------------|------------------------------------------------|
|                        | (rule(width dist)                              |
| 走线到走线间距 | (clearance dist (type wire_wire))              |
| 通孔到走线间距   | (clearance dist (type via_wire))               |
| 通孔到通孔间距     | (clearance dist (type via_via))                |
| 焊盘到走线间距   | (clearance dist (type pin_wire))               |
| 焊盘到通孔间距     | (clearance dist (type pin_via))                |
| 焊盘到焊盘间距     | (clearance dist (type pin_pin))                |
| SMD 到走线间距   | (clearance dist (type smd_wire))               |
| SMD 到通孔间距     | (clearance dist (type smd_via))                |
| SMD 到焊盘间距     | (clearance dist (type smd_pin))                |
| SMD 到 SMD 间距     | (clearance dist (type smd_smd))                |
| 板到走线间距 | (clearance dist (type area_wire))              |
| 板到通孔间距   | (clearance dist (type area_via))               |
| 板到焊盘间距   | (clearance dist (type area_pin))               |
| 板到 SMD 间距   | (clearance dist (type area_smd))               |
| SMD 到通孔同网络    | (clearance dist (typesmd_via_same_net))    |
| SMD 到转角同网络    | (clearance dist (typesmd_to_turn_gap))     |
| 焊盘到转角同网络    | (clearance dist (typepad_to_turn_gap))     |
| 通孔到通孔同网络    | (clearance dist (typevia_to_via_same_net)) |
| 钻孔到钻孔间距 | (clearance dist (type drill_gap))              |
| 本体到本体间距   | 不支持                                    |

**表 146. 间距规则**

链接在 PCB 规则级别将默认间距规则传递给 SPECCTRA。

> [!tip]
铜被转换为 SPECCTRA 禁区。此外，板框被转换为边界。禁区和边界都使用上述区域间距。

**SPECCTRA 文本转换**

文本转换为禁区。在生成 SPECCTRA 禁区时，使用以下间距规则中定义的最大文本间距来扩展 SPECCTRA 禁区区域以允许所需的间距：

- 文本到走线间距

- 文本到通孔间距

- 文本到钻孔间距

- 文本到 SMD 间距

**差分对**

SPECCTRA 不直接支持差分对的最小/最大长度。但是，您可以使用应用于网络对的布线规则添加这些限制。

以下 SPECCTRA 语法支持网络对：

```
(pair (nets nm1 nm2 (gap dist)))
```

```
Pin pairs use the syntax:
```

```
(pair (wires nm1 nm2 (gap dist)))
```

**条件规则**

条件规则分为两类：高速和间距。SPECCTRA 可以接受层的条件规则。但是，任何其他规则只有在使用网络类时才能是有条件的。一个类只能包含网络，不能包含管脚对或组。因此，任何包含组或管脚对并且是高速规则的条件规则都不能传递给 SPECCTRA。

条件规则中的网络会自动放入使用命名约定 NEW_CLASS_#的虚拟 SPECCTRA 类中，如下所示：

```
(class NEW_CLASS1 $$$2016)
```

**高速条件规则**

高速条件规则像非条件高速规则一样转换，只是它必须是类对类的形式，如下所示：

```
### PADS Layout Conditional Rule ###

(class_class

(classes CLASS_0 CLASS_1)

(rule (parallel_segment (gap dist) (limit dist)))

(rule (tandem_segment (gap dist) (limit dist)))

)
```

**间距条件规则**

条件间距规则必须是对象对层的形式，如下所示：

```
### PADS Layout Group Rule ###

(group GROUP_0

(fromto U2-2 U1-2

)

(fromto U4-9 U1-9

)

(fromto U3-10 U4-10

)
(layer_rule 1

(rule

(width dist)

(clearance dist (type wire_wire))

(clearance dist (type via_wire))

etc.
```


> [!tip] 与文本相关的条件规则被忽略。SPECCTRA 不识别文本。

## SPECCTRA 输出文件位置和布线器设置

使用设置 SPECCTRA 完成对话框指定输出文件位置，并设置 SPECCTRA 布线器在完成布线时要执行的操作的指令，例如运行斜切通道、运行重新拐角和插入测试点。

🏃‍♂️‍**步骤**

1. 点击**主页>导出**菜单项。

2. 在文件导出对话框中，在"保存类型"列表中，点击 SPECCTRA 文件(*.dsn)。

3. 浏览以覆盖文件或键入新文件名。点击**保存**。

4. 在 SPECCTRA 链接对话框中，点击**DO 文件**。

5. 在 SPECCTRA DO 文件对话框中，点击**完成**。

6. 要指示走线文件，在走线文件框中键入或浏览到位置。

7. 要指示布线文件，在布线文件框中键入或浏览到位置。

8. 要指示会话文件，在会话文件框中键入或浏览到位置。

9. 在测试点区域选择您希望 SPECCTRA 安装的测试点选项。(更多信息，请参阅"传递给 SPECCTRA 的数据"，以及*SPECCTRA 帮助*中的"测试点"主题。)

10. 从斜切区域选择斜切转换类型。

11. 从重新拐角区域选择重新拐角选项。

12. 要删除交叉和间距冲突，点击**删除冲突**。

13. 要消除凹口和移除多余弯曲，点击**Critic**。

14. 如果有空间，要添加额外空间，点击**Spread**并在 Extra 框中键入扩展值。

15. 从报告区域选择您希望在报告中包含的数据类型。

16. 要指示报告文件，在报告文件框中键入或浏览到位置。

17. 点击**应用**。适当的行将添加到您的*.do*文件的最后一个指针位置。


> [!tip] 要删除一行，在编辑器区域中选择*.do*文件中的行，然后按键盘上的 Delete 键。

## 自动加载进出 SPECCTRA

当您从 SailWind 布局内部启动 SPECCTRA 时，SPECCTRA 链接对话框使您能够自动加载进出 SPECCTRA。

如果您在 SailWind 布局中设置了最大通孔数，SPECCTRA 链接会自动将它们传递给 SPECCTRA。


> [!danger] >如果您启用的许可 SPECCTRA 选项集不支持最大通孔数规则，SPECCTRA 可能会忽略此规则甚至禁用自动布线。
>
>SPECCTRA 链接自动将 SailWind 布局中的各种类型的禁区(如放置、走线和通孔禁区)传递给 SPECCTRA：放置禁区(作为 place_keepout)、走线禁区(作为 wire_keepout)和通孔禁区(作为 via_keepout)。

> [!tip] 如果您希望对 SPECCTRA 进行更精细的控制，请使用独立 SPECCTRA 链接对话框手动加载进出 SPECCTRA(见第 1012 页)。

🏃‍♂️‍**步骤**

1. 在文件菜单上，点击**导出**。

2. 在文件导出对话框中，在"保存类型"列表中，点击**SPECCTRA 文件(*.dsn)**。

3. 浏览以覆盖文件或键入新文件名。点击**保存**。

4. 在 SPECCTRA 链接对话框中，键入或浏览您想要使用的*.DO*文件。

5. 要创建或编辑*.DO*文件，点击 DO 文件。更多信息，请参阅"创建或编辑.do 文件"。

6. 要设置 SPECCTRA 自动启动信息，点击**设置**。(更多信息，请参阅"SPECCTRA 设置对话框"第 1729 页。)

7. 要指定输出文件(布线文件和会话文件)，在设置 SPECCTRA 完成对话框中键入它们的位置。要访问它，点击 SPECCTRA 链接对话框中的 DO 文件，然后点击**完成**在 SPECCTRA DO 文件对话框中并输入文件位置。(更多信息，请参阅"SPECCTRA 输出文件位置和布线器设置"。)

8. 要设置发送通孔禁区信息、传递高级规则、设置走线弧转换模式或返回未使用管脚网络的选项，点击**选项**。(更多信息，请参阅"设置 SPECCTRA 选项"。)

9. 点击**继续**。设计加载到 SPECCTRA 中，布线器以批处理模式运行。

当转换完成时，修改后的设计文件出现在屏幕上，加载到新的 SailWind 布局会话中(除非在设置对话框中清除了"启动 SailWind 布局会话")。链接启动新会话，因此不会中断任何当前会话。如果您通宵运行布线器，可以关闭 SailWind 布局会话以节省内存。

## 手动加载进出 SPECCTRA

如果您独立于 SailWind 布局启动 SPECCTRA，可以手动控制 SPECCTRA 界面。这使您对如何使用 SPECCTRA 有更多控制权。您可以导入和导出到 SPECCTRA，并可以设置 SPECCTRA 布线器在完成布线时要执行的操作的指令(例如，运行斜切通道、运行重新拐角和插入测试点)。


> [!tip] 如果您想从 SailWind 布局内部启动 SPECCTRA，请使用 SPECCTRA 链接对话框自动加载进出 SPECCTRA(见第 1012 页)。

🏃‍♂️‍**步骤**

1. 如果您在 SailWind 布局中，保存 *.pcb* 文件。

2. 使用 Windows 资源管理器导航到您的*C:\<安装文件夹>\SailWind<版本>\Programs*目录，并双击*pads2sp.exe*。

3. 在 SPECCTRA 链接对话框中，要设置 SPECCTRA 自动启动信息，点击**设置**。(更多信息，请参阅"设置 SPECCTRA 自动启动信息"。)

4. 要将 *.pcb* 文件转换为 SPECCTRA 格式，点击**到 SPECCTRA**。出现"到 SPECCTRA"对话框。(更多信息，请参阅"将设计数据从 SailWind 布局转换到 SPECCTRA"。)

5. 启动 SPECCTRA。

   > [!tip] 您也可以通过选中"到 SPECCTRA"对话框上的"启动 SPECCTRA"复选框来启动 SPECCTRA。

6. 使用 SPECCTRA 中的文件操作加载转换后的设计(*.dsn*)文件。

7. 当您完成 SPECCTRA 时，要再次运行链接以将输出转换回 *.pcb* 设计文件，点击**从 SPECCTRA**。(更多信息，请参阅"将设计数据从 SPECCTRA 转换到 SailWind 布局"。)

8. 将新的 *.pcb* 文件加载到 SailWind 布局中。

## 将设计数据从 SailWind 布局转换到 SPECCTRA

使用"到 SPECCTRA"对话框将 *.pcb* 设计文件转换为 SPECCTRA 设计文件。

🏃‍♂️‍**步骤**

1. 使用 Windows 资源管理器导航到您的*C:\<安装文件夹>\SailWind<版本>\Programs*目录，并双击*pads2sp.exe*。

2. 在 SPECCTRA 链接对话框中，点击**到 SPECCTRA**。

3. 要指示要发送到 SPECCTRA 的文件，在 PCB 文件框中键入或浏览到位置。

4. 要指示 SPECCTRA 输入的设计文件(*.dsn*)，在设计文件框中键入或浏览到位置。

5. 要指示要发送到 SPECCTRA 的*.do*文件，在 DO 文件框中键入或浏览到位置。*.do*文件是控制 SPECCTRA 操作的脚本文件。

6. 要指示 SPECCTRA 创建的输出文件(*.did*)，在 Did 文件框中键入或浏览到位置。此文件在后续 SPECCTRA 会话中用作输入*.do*文件。

7. 要在批处理转换完成后启动 SPECCTRA，点击**启动 SPECCTRA**。

8. 要创建或编辑*.DO*文件，点击**DO 文件**。(更多信息，请参阅"创建或编辑.do 文件。)

9. 要设置发送通孔禁区信息、传递高级规则、设置走线弧转换模式或返回未使用管脚网络的选项，点击**选项**。(更多信息，请参阅"设置 SPECCTRA 选项"。)

## 将设计数据从 SPECCTRA 转换到 SailWind 布局

使用"从 SPECCTRA"对话框将 SPECCTRA 修改的设计数据转换回 *.pcb* 设计文件。

🏃‍♂️‍**步骤**

1. 使用 Windows 资源管理器导航到您的*C:\<安装文件夹>\SailWind<版本>\Programs*目录，并双击*pads2sp.exe*。

2. 在 SPECCTRA 链接对话框中，点击**从 SPECCTRA**。

3. 要指示 SPECCTRA 处理后返回的布线信息文件，在 SPECCTRA 布线框中键入或浏览到位置。在*.do*文件末尾包含写入此文件的命令后自动布线。

4. 要指示放置和布线信息文件，在会话文件框中键入或浏览到位置。如果您没有使用任何 SPECCTRA 放置功能，则不需要提供此文件名。

5. 要指示原始(源) *.pcb* 文件，在原始 PCB 文件框中键入或浏览到位置。

6. 要指示要从 SPECCTRA 文件创建的文件，在新 PCB 文件框中键入或浏览到位置。

7. 要设置发送通孔禁区信息、传递高级规则、设置走线弧转换模式或返回未使用管脚网络的选项，点击**选项**。(更多信息，请参阅"设置 SPECCTRA 选项"。)

## 设置 SPECCTRA 选项

当您点击 SPECCTRA 链接对话框、"到 SPECCTRA"对话框(独立)或"从 SPECCTRA"对话框(独立)上的选项按钮时，会出现选项对话框。

此对话框控制发送通孔禁区信息、将高级规则传递给 SPECCTRA、设置走线弧转换模式以及从 SPECCTRA 返回未使用管脚网络的选项。(更多信息，请参阅"未使用管脚网络"。)

🏃‍♂️‍**步骤**

1. 在文件菜单上，点击**导出**。

2. 在文件导出对话框中，在"保存类型"列表中，点击**SPECCTRA 文件(*.do)**。

3. 浏览以覆盖文件或键入新文件名。点击**保存**。

4. 在 SPECCTRA 链接对话框中，点击**选项**。

5. 要从您的封装向 SPECCTRA 发送通孔禁区区域，从"包含通孔禁区形状的层"列表中选择您想要的层。

   > [!tip] SailWind 布局完全支持布局编辑器中的禁区。创建通孔禁区的首选方法是在您的封装中定义禁区。

6. 要将默认选定层和选定通孔规则传递给 SPECCTRA，点击**传递默认高级规则**。这些规则需要 SPECCTRA 中的高级规则选项。如果您有此 SPECCTRA 选项，请打开此选项；否则，请关闭此选项。(更多信息，请参阅"SailWind 布局到 SPECCTRA 规则转换"。)

7. 从三种模式中选择一种执行走线弧转换：

   转换为单段 — 用单段替换每个走线弧。这是默认模式。

   转换为多段 — 用多段替换走线弧。原始走线弧被分成较小的弧(大约等于 5 度)，然后每个较小的弧被单个段替换。结果是一个多段折线而不是弧。

   转换为四分之一弧(QARCs) — 将现有弧分成四分之一弧和其他段。(四分之一弧是起点和终点正好为 0-90、90-180、180-270 和 270-360 度的弧。)四分之一弧转换为 SPECCTRA QARC 结构。弧的其余部分转换为折线。

8. 要将未使用管脚和扇出信息返回到 SailWind 布局，点击"返回 UNUSED_PINS 布线到 SailWind 布局"。键入 SailWind 布局设计中将包含未使用管脚的网络的名称。如果您不想使用默认名称，请提供新名称。

SailWind 布局中的最大网络名称长度为 47 个字符。您可以使用任何字母数字字符，但不能使用大括号{ }、星号*或空格。

清除此选项以在返回到 SailWind 布局时忽略未使用管脚和扇出信息。


> [!tip] SPECCTRA 将未使用管脚网络命名为+UNUSED_PINS+，而早期版本将其命名为*UNUSED_PINS*。SPECCTRA 链接解释这两个名称。

## 设置 SPECCTRA 自动启动信息

使用 SPECCTRA 设置对话框设置 SPECCTRA 自动启动信息。

🏃‍♂️‍**步骤**

1. 在文件菜单上，点击**导出**。

2. 在文件导出对话框中，在"保存类型"列表中，点击**SPECCTRA 文件(*.do)**。

3. 浏览以覆盖文件或键入新文件名。点击**保存**。

4. 在 SPECCTRA 链接对话框中，点击**设置**按钮。

5. 要指示运行 SPECCTRA 所需的可执行文件，在可执行文件框中键入或浏览到位置。

6. 要指示运行 SPECCTRA 所需的密码文件，在密码/服务器框中键入或浏览到位置。

   > [!tip] 对于 teal key 节点锁定或浮动许可，在标准 port@host 格式中指向您的许可服务器。例如，7508@myserver。

7. 要指示 SPECCTRA 消息输出文件，在消息输出框中键入或浏览到位置。

8. 要指示 SPECCTRA 状态文件，在状态框中键入或浏览到位置。

9. 要指示 SPECCTRA 颜色映射文件，在颜色映射框中键入或浏览到位置。

10. 要禁用 SPECCTRA 图形显示并使 SPECCTRA 运行更快，点击**无图形**。

11. 要在处理*.do*文件命令后关闭 SPECCTRA，点击**处理后退出**。

12. 要在进入 SPECCTRA 前删除所有预布线，点击**无预布线**。

13. 要忽略没有网络分配的铜(在 SPECCTRA 中没有网络关联)，点击**不剥离孤立形状**。

14. 要将一英寸见方或更小的多边形转换为简单矩形，点击**简化多边形**。

15. 选择您想要的许可类型：浮动、节点锁定(Flexid Key)或节点锁定(SSI key)。

16. 要在处理*.do*文件命令后将布线设计重新加载到 SailWind 布局中，点击**启动 SailWind 布局会话**。

## 创建或编辑.do 文件

*.do*文件是一个可编辑的批处理脚本文件，控制 SPECCTRA 操作。您可以在*.do*文件中添加或编辑命令行。当您启动编辑器时，将读取您在 SPECCTRA 链接对话框中指定的*.do*文件进行编辑。

🏃‍♂️‍**步骤**

1. 在文件菜单上，点击**导出**。

2. 在文件导出对话框中，在"保存类型"列表中，点击**SPECCTRA 文件(*.do)**。

3. 浏览以覆盖文件或键入新文件名。点击**保存**。

4. 在 SPECCTRA 链接对话框中，执行以下操作之一：

	- 要创建新文件，在 DO 文件名框中键入新*.do*文件的名称，然后点击**DO 文件**。

	- 要编辑现有文件，在 DO 文件名框中键入或浏览到*.do*文件的名称，然后点击**DO 文件**。

5. 设置和所有区域的内容根据您在设置区域中选择的选项而变化。选择您想要的选项，然后点击**应用到编辑器**将信息写入*.do*文件。命令出现在编辑器区域中。

	- 顺序 - 更改原始网络排序并控制网络是以菊花链还是星爆方式布线。(更多信息，请参阅*SPECCTRA 帮助*中的"顺序"和"选择星爆或菊花链布线"主题。)

	- 操作 - 控制走线重新布线、网络布线以及连接、通孔和层对自动布线的可用性。(更多信息，请参阅*SPECCTRA 帮助*中的"保护/取消保护"、"固定/取消固定"和"选择/取消选择"主题。)

	- 成本 - 控制布线成本并覆盖自动布线器内部成本表。(更多信息，请参阅*SPECCTRA 帮助*中的"成本"、"限制"、"税收"和"使用标准自动布线命令"主题。)
	
	  如果您在成本区域点击成本，在所有区域点击层，类型区域会出现选项。(更多信息，请参阅*SPECCTRA 帮助*中的"类型"、"长度"、"方式(成本)"和"方式(限制)"主题。)
	
	- 测试点规则 - 控制将 DFT 审核测试点放置选项传递给 SPECCTRA，供其测试点放置例程使用。(更多信息，请参阅"传递给 SPECCTRA 的数据"，以及*SPECCTRA 帮助*中的"测试点"和"测试点天线"主题。)

   | 选项                  | 功能                                                                                                                                                               |
   |-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 插入测试点      | 允许插入测试点并使测试点区域中的选项可用。                                                                            |
   | 允许在管脚上放置点    | 允许在元件管脚上放置测试点。DFT 审核中没有等效项；测试点始终允许在管脚上。                                  |
   | 允许天线          | 允许天线。设置长度。DFT 审核中没有等效项。                                                                                                 |
   | 最大长度              | 设置天线的长度限制。默认最大长度为负一(-1)，无长度限制。                                                |
   | 中心到中心        | 测试点中心之间的距离。                                                                                                                       |
   | 中心到元件边缘     | 测试点中心与元件边框之间的距离。                                                                                     |
   | 图像边框间距 | 元件边框与测试点载体(通孔或元件管脚)之间的间距。如果图像边框间距为负，则设置为零(0)。 |
   | 测试侧               | 在指定侧搜索测试点放置。                                                                                                               |
   | 使用通孔                 | 使用通孔作为测试点。                                                                                                                                              |
   | 网格 X, Y               | 测试点网格。                                                                                                                                                   |
   |                         | 更多信息，请参阅"网格选项第 1537 页"。                                                                                                               |

	**表 147. SPECCTRA 链接对话框选项**

	- 所有区域 - 将操作限制为某些选定对象。此区域的内容根据您在设置区域中选择的选项而变化。

	- 仅区域 - 将操作限制为某些选定对象。

6. 使用布线区域设置扇出规则：方向、管脚类型和最大长度，并设置总线方向并为每种类型输入通道数。
7. 要根据设计的收敛情况自动布线您的设计，点击**智能布线**。更多信息请参阅*SPECCTRA 帮助*。
8. 要将命令写入*.do*文件，点击**应用到编辑器**。命令出现在编辑器区域中。
9. 点击**启动**设置启动信息。(更多信息，请参阅"设置 SPECCTRA 自动启动信息"。)
10. 点击**完成**并在设置 SPECCTRA 完成对话框中设置参数。(更多信息，请参阅"SPECCTRA 输出文件位置和布线器设置"。)
11. 点击**应用**保存参数。
12. 点击**另存为**保存文件并输入文件名。这是可选的。
13. 点击**继续**开始转换和加载过程。

## 设置 SPECCTRA .do 文件启动选项

使用设置 SPECCTRA 启动对话框在您的*.do*文件中包含一行引用先前输入的布线(保存在走线或最佳保存文件中)。SPECCTRA 在启动时引用这些文件。您还可以包括状态文件的名称以及 SMD 通孔、种子通孔和种子通孔最小距离的参数。

有关这些文件和功能的详细信息，请参阅 SPECCTRA 设计语言参考 PDF 文件*spdlr.pdf*(在 SPECCTRA 组中)。

🏃‍♂️‍**步骤**

1. 点击**主页>导出**菜单项。
2. 在文件导出对话框中，在"保存类型"列表中，点击**SPECCTRA 文件(*.do)**。
3. 浏览以覆盖文件或键入新文件名。点击保存。
4. 在 SPECCTRA 链接对话框中，点击**DO 文件**。
5. 在 SPECCTRA DO 文件对话框中，点击**启动**。
6. 要指示走线文件，在走线文件框中键入或浏览到位置。
7. 要指示状态文件，在状态文件框中键入或浏览到位置。
8. 要指示最佳保存文件，在最佳保存框中键入或浏览到位置。
9. 要允许在 SMD 焊盘上放置通孔，在"SMD 通孔"区域选择"开"。要确保通孔位于网格点上，在"网格"区域选择"开"。要确保通孔适合焊盘，在"适合"区域选择"开"。
10. 要断开大于特定长度的两管脚连接，点击"种子通孔"并在距离框中键入长度值。
11. 点击**应用**。

## SPECCTRA 与分割/混合平面

如果您计划使用 SPECCTRA 将电源网络扇出或以其他方式布线到其关联的平面区域多边形，请在 SailWind 布局中定义平面多边形之前阅读此重要信息。

在 SailWind 布局中开发分割/混合平面功能期间，发现了有关 SPECCTRA 布线命令如何尊重平面多边形的一些操作细节。要在 SPECCTRA 中实现电源网络与平面多边形的正确连接，请使用以下分割平面定义过程之一。遵循这些步骤将确保从 SPECCTRA 获得最高质量的布线结果。

- 如果您通常在 SPECCTRA 中布线设计后定义分割平面，请参阅"在 SPECCTRA 中布线后定义分割平面"主题。

- 如果您通常在 SPECCTRA 中布线设计前定义分割平面，请参阅"在 SPECCTRA 中布线前定义分割平面"主题。

SPECCTRA 将没有布线、命名铜或平面多边形的分割/混合平面层转换为电源层。SPECCTRA 不将电源层视为布线层，因此不能在这些层上布线。这最小化传递给布线器的层数。例如，您可以在许可用于两个布线层的 SPECCTRA 配置中布线具有两个电源层的四层设计。

SPECCTRA 将整个平面视为连接元件管脚到所有平面网络的区域。SPECCTRA 扇出和布线命令通过从管脚布线短走线到通孔来连接 SMD 元件管脚，以满足与平面的连接。

为了获得最佳结果：

- 在执行多次布线通道之前，通过插入扇出通道数对电源管脚执行多次扇出。例如，将"fanout (pin_type power)"更改为"fanout 5 (pin_type power)"。

- 选择创建或编辑.do 文件中定义的适当扇出选项。

- 避免为与分割/混合平面层关联的网络分配设计规则。如果存在设计规则，设计将无法在 SPECCTRA 中打开。SPECCTRA 链接会自动删除或忽略与分割/混合平面层关联的设计规则。

**SailWind 布局分割/混合平面层上的布线走线**

使用 SailWind 布局，您可以在分割/混合平面层上布线走线。这在 SPECCTRA 中也是可能的，但文件会自动调整以在 SPECCTRA 中获得适当的结果。这些更改导致 SPECCTRA 中布线命令的行为修改，可能导致意外的布线模式。

**对设计的调整**

SPECCTRA 将具有布线或命名铜的 SailWind 布局分割/混合平面层转换为混合层，而不是电源层。因此，SPECCTRA 如有必要会在这些层上布线以完成设计。

**SPECCTRA 中的行为变化**

混合层被转换为布线层，增加了传递给 SPECCTRA 的层数。例如，具有两个布线层、一个电源层和一个混合层的四层设计被视为三个布线层设计，不能在仅许可用于两个布线层的 SPECCTRA 配置中打开。

SPECCTRA 将混合层上的平面多边形视为可用于将元件管脚连接到平面网络的区域，但不认为它们是布线的障碍。因此，扇出和布线命令可以添加通过 SPECCTRA 混合层上的平面多边形的布线。

可能会出现孤立的布线失败实例。失败可能包括扇出命令无法将管脚连接到平面多边形，或者当布线命令将连接的平面网络管脚移动到平面多边形定义的区域之外时，从而将管脚与平面网络隔离。

为避免行为变化，请在您的设计过程中使用以下过程之一：

- 布线后分割平面。更多信息，请参阅"SPECCTRA 与分割/混合平面"。

- 在继续之前取消布线违规走线。在将设计传递给 SPECCTRA 之前，取消布线分割/混合层中的任何走线。移除任何命名铜。在 SPECCTRA 中完成布线并将设计返回到 SailWind 布局后，重新布线您先前取消布线的走线，并将命名铜形状恢复到适当的分割/混合层。


## 在 SPECCTRA 中布线前定义分割平面

当您可以在布线前定义分割平面时，您可以使用 SailWind 布局和 SPECCTRA 的高级功能快速布线您的分割平面设计。

🏃‍♂️‍**步骤**

1. 将层分配为分割/混合层类型：在您可以将分割平面网络和数据添加到层之前，必须将层分配为分割/混合。(更多信息，请参阅"层设置对话框和平面层网络对话框"第 1640 页。)

   为了获得最佳结果，将分割/混合分配限制为内部嵌入式平面层。将外部布线层分配为分割/混合层可能会产生意外结果。

2. 定义平面多边形：使用"创建平面区域"和"自动分离"中描述的步骤为分配给平面层的每个网络创建分割平面多边形。

   使用 SailWind 布局，您可以定义重叠的平面多边形，但平面填充会检测重叠并自动调整平面填充区域以消除重叠。SPECCTRA 不提供自动调整重叠多边形的功能，并且在翻译大量重叠多边形时可能会产生意外结果。

   为了获得最佳结果：

    - 仅使用自动分离命令定义您的平面。这消除了平面区域或平面区域切口重叠的可能性。

    - 如果您更喜欢将平面创建为多边形矩形和圆形，请先创建较小的多边形，然后在它们周围添加多边形，而不是创建较大的多边形并在其中嵌入较小的多边形。

3. 在 SPECCTRA 中布线设计：一旦为平面层分配了适当的层和网络数据，您就可以将设计传输到 SPECCTRA。(更多信息，请参阅"自动加载进出 SPECCTRA"。)

4. 填充分割/混合平面多边形：在 SPECCTRA 中完成布线并将设计返回到 SailWind 布局后，填充平面多边形。

5. 验证平面网络连续性：填充平面后，验证平面网络的连续性。此过程扫描平面多边形和布线数据，并报告与平面多边形断开连接的网络部分。有关如何执行此操作的信息，请参阅"验证设计"、"平面检查设置"、"手动创建覆铜平面"、"自动创建覆铜平面"和"平面检查设置"。

## 在 SPECCTRA 中布线后定义分割平面

当您的设计过程涉及在 SPECCTRA 中布线设计后分割平面时，您可以在 SailWind 布局中执行此操作。

🏃‍♂️‍**步骤**

1. 将层分配为分割/混合平面层类型：在您可以将分割平面网络和数据添加到层之前，必须将层分配为分割/混合。(更多信息，请参阅"层设置对话框"和"平面层网络对话框"。)

    为了获得最佳结果：

    - 在 SPECCTRA 中自动布线之前，不要为分割/混合层定义平面区域多边形。SPECCTRA 认为整个平面层属于所有网络，并为连接到平面网络的 SMD 管脚提供短扇出走线。

    - 将分割/混合分配限制为内部嵌入式平面层。将外部布线层分配为分割/混合层可能会产生意外结果。

2. 在 SPECCTRA 中布线设计：一旦为平面层分配了适当的层和网络数据，您就可以将设计传输到 SPECCTRA。(更多信息，请参阅"自动加载进出 SPECCTRA"。)

3. 定义平面多边形：使用"创建平面区域"和"自动分离"中描述的步骤为分配给平面层的每个网络创建分割平面多边形。

    > [!tip]     如果您想在定义分割/混合平面后再次将此设计传递给 SPECCTRA，请参阅以下信息。另请参阅 SailWind 布局分割/混合平面层上的布线走线。

    使用 SailWind 布局，您可以定义重叠的平面多边形，但平面填充会检测重叠并自动调整平面填充区域以消除重叠。然而，SPECCTRA 不提供自动调整重叠多边形的功能。SPECCTRA 在翻译大量重叠多边形时可能会产生意外结果。

    为了获得最佳结果：

    - 仅使用自动分离定义平面。这消除了平面区域或平面区域切口重叠的可能性。

    - 如果您更喜欢将平面创建为多边形矩形和圆形，请先创建较小的多边形，然后在它们周围添加多边形，而不是创建较大的多边形并在其中嵌入较小的多边形。

4. 填充分割/混合平面多边形：在完成布线并将设计返回到 SailWind 布局后，填充平面多边形。

5. 验证平面网络连续性：填充平面后，验证平面网络的连续性。此过程扫描平面多边形和布线数据，并报告与平面多边形断开连接的网络部分。有关如何执行此操作的信息，请参阅"验证设计"、"平面检查设置"、"手动创建覆铜平面"、"自动创建覆铜平面"和"平面检查设置"。