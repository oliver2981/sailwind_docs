# 第 43 章 故障排除

以下主题说明如何处理致命设计错误、*powerpcb.reg*问题以及锁定测试点难题。

## 修复包含致命错误的设计

当 `SailWind Layout` 遇到不可恢复的问题时，会出现带有错误代码的致命错误警告。

以下主题说明遇到致命数据库错误时应采取的措施，以及恢复丢失数据的步骤。

相关信息请参阅"错误检测、BMW 和 BLT、脚本和宏"。

从文件打开时的致命错误中恢复 从正常操作中的致命错误中恢复 正常使用期间的数据库完整性检查

### 从文件打开时的致命错误中恢复

如果 `SailWind Layout` 在打开设计时崩溃或显示致命错误，设计文件可能已损坏。在提交支持中心服务请求前，尝试使用 `SailWind Router` 数据库完整性检查修复文件。

🏃‍♂️‍**操作步骤**

1. 致命错误发生后，立即创建一个名为*<设计名称>_save*的新文件夹，并将损坏的设计文件及其备份（*Layout.pcb*、*Layou1.pcb*、*Layou2.pcb*和*Layou3.pcb*）复制到新文件夹。（您可能需要将这些文件作为服务请求的一部分提交。）

2. 打开独立的 `SailWind Router` 会话，并打开损坏的文件。如果文件无法打开，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果文件打开，继续步骤 3。

3. 点击**主页**菜单 > **另存为**，以不同名称保存文件，扩展名为 *.pcb* 。

4. 关闭 `SailWind Router`。

5. 在 `SailWind Layout` 中打开新的 *.pcb* 文件。如果文件无法打开，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果文件打开，继续以下步骤。

6. 以 ASCII 格式导出并重新导入设计，步骤如下：

    a. 点击**主页菜单 > 导出**。

    b. 在文件导出对话框中，浏览到适当文件夹，将新的*.asc*文件命名为*<设计名称>_ascii.asc*，点击**保存**。

    c. 在 ASCII 输出对话框中：

    ​	i. 点击**全选**。

    ​	ii. 保持"扩展属性"未勾选。

    ​	iii. 从单位列表中选择"基本"。

    ​	iv. 点击**确定**。

    d. ASCII 文件保存后，点击**主页 > 新建**。（如有提示，接受默认启动文件，对"保存旧文件"提示点击否。）

    e. 点击**主页 > 导入**。

    f. 浏览到刚导出的*<设计名称>_ascii.asc*文件，选择它并点击**打开**。如果显示*ascii.err*文件，客户支持需要审查设计；提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果未显示*ascii.err*文件，继续步骤 7。

7. 使用"从 `SailWind Logic` 前向标注设计变更"中描述的程序之一比较此 *.pcb* 设计及其相关原理图的网表，如有必要更新 *.pcb* 文件。这将恢复 *.pcb* 中丢失的任何部件或网络连接。

8. 设计已修复；将文件保存为*<设计名称>_fixed.pcb*。

### 从正常操作中的致命错误中恢复

如果 `SailWind Layout` 在正常操作期间崩溃或显示致命错误， *.pcb* 文件可能已损坏。在提交支持中心服务请求前，创建所有文件的副本并尝试一些可能修复设计数据库的简单方法。

🙊**限制和约束**

您不能使用此流程修复无法打开的设计。这种情况下，尝试使用"从文件打开时的致命错误中恢复"中的流程恢复文件。


> [!tip] 以下流程中会创建多个文件；流程指定了这些文件的位置和名称，以确保您在每一步都使用正确的文件。

🏃‍♂️‍**操作步骤**

1. 退出致命错误消息。设计将保存到备份文件并关闭。

2. 立即创建一个名为*<设计名称>_save*的新文件夹，并将损坏的设计文件及其备份（*Layout.pcb*、*Layou1.pcb*、*Layou2.pcb*和*Layou3.pcb*）复制到新文件夹。（您可能需要将这些文件作为服务请求的一部分提交。）

3. 为修复流程文件创建另一个名为*<设计名称>_repair*的新文件夹，并将损坏的设计文件复制到新文件夹中，命名为*<设计名称>_bad.pcb*。

4. 重新启动 `SailWind Layout`，尝试打开*<设计名称>_bad.pcb*。（根据错误类型，您可能能够打开文件并继续。）如果文件无法打开，退出此流程并使用"从文件打开时的致命错误中恢复"中的流程。如果文件打开，继续步骤 5。

5. 输入无模命令 I 并按 Enter 键，运行数据库完整性检查，如"正常使用期间的数据库完整性检查"中所述。

6. 重复导致错误的操作。如果没有出现错误/警告，跳至步骤 13。如果出现错误/警告，继续步骤 7。

7. 以 ASCII 格式导出并重新导入设计，步骤如下：

    a. 点击**主页菜单 > 导出**。

    b. 在文件导出对话框中，浏览到*<设计名称>_repair*文件夹，将新的*.asc*文件命名为*ascii_1.asc*，点击**保存**。

    c. 在 ASCII 输出对话框中：

    ​	i. 点击**全选**。

    ​	ii. 保持"扩展属性"未勾选。

    ​	iii. 从单位列表中选择"基本"。

    ​	iv. 点击**确定**。

    d. ASCII 文件保存后，点击**主页 > 新建**。（如有提示，接受默认启动文件，对"保存旧文件"提示点击否。）

    e. 点击**主页 > 导入**。

    f. 浏览到刚导出的*ascii_1.asc*文件，选择它并点击**打开**。如果显示*ascii.err*文件，退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果未显示*ascii.err*文件，继续步骤 8。

8. 重复导致错误的操作。如果没有出现错误/警告，跳至步骤 14。否则继续步骤 9。

9. 将设计另存为*<设计名称>_1.pcb*，关闭 `SailWind Layout`。

10. 在 `SailWind Router` 中打开并保存设计，步骤如下：

    a. 启动独立的 `SailWind Router` 会话，打开*<设计名称>_1.pcb*。如果文件无法打开，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果文件打开，继续步骤 10b。

    b. 点击**主页菜单 > 另存为**，将文件保存为*<设计名称>_2.pcb*。

    c. 关闭 `SailWind Router`。

11. 在 `SailWind Layout` 中打开*<设计名称>_2.pcb*。如果文件无法打开，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果文件打开，继续步骤 12。

12. 重复导致错误的操作。如果仍然出现错误/警告，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果没有出现错误/警告，继续步骤 13。

13. 以 ASCII 格式导出并重新导入设计，步骤如下：

     a. 点击文件菜单 > 导出。

     b. 在文件导出对话框中，浏览到适当文件夹，将新的*.asc*文件命名为*<设计名称>_ascii.asc*，点击**保存**。

     c. 在 ASCII 输出对话框中：

     ​	i. 点击**全选**。

     ​	ii. 保持"扩展属性"未勾选。

     ​	iii. 从单位列表中选择"基本"。

     ​	iv. 点击**确定**。

     d. ASCII 文件保存后，点击**主页 > 新建**。（如有提示，接受默认启动文件，对"保存旧文件"提示点击否。）

     e. 点击**主页 > 导入**。

     f. 浏览到刚导出的*<设计名称>_ascii.asc*文件，选择它并点击**打开**。如果显示*ascii.err*文件，客户支持需要审查设计；退出此流程并提交新的支持中心服务请求，包含保存在*<设计名称>_save*中的文件。如果未显示*ascii.err*文件，继续步骤 14。

14. 使用"从 `SailWind Logic` 前向标注设计变更"中描述的程序之一比较此 *.pcb* 设计及其相关原理图的网表，如有必要更新 *.pcb* 文件。这将恢复 *.pcb* 中丢失的任何部件或网络连接。

15. 设计已修复；将文件保存为*<设计名称>_fixed.pcb*。

### 正常使用期间的数据库完整性检查

当您使用无模命令 I 运行数据库完整性检查时，`SailWind Layout` 会验证设计数据库中的值是否在可接受范围内。如果发现问题，系统会提示您确认自动数据库更正。

使用自动更正例程修复错误后，您应该对新数据库运行一组交互式检查。这些交互式检查包括但不限于：

- 间距检查

- 网表比较

- 连续性检查

- 连接平面检查

有关如何运行这些检查的说明，请参阅"验证设计"。

## 警告：测试点锁定对话框

当您修改作为锁定测试点的过孔、管脚或跳线管脚，或包含测试点的簇，或连接到锁定测试点的布线时，会出现警告对话框。此警告对话框的功能根据您修改的是过孔、管脚还是布线而有所不同。

以下主题讨论在以下每种情况下处理锁定测试点的选项：

修改作为锁定测试点的跳线管脚 修改作为锁定测试点的管脚 修改连接到锁定测试点的布线 修改作为锁定测试点的过孔或虚拟管脚 顺序移动包含锁定测试点的元件、联合或簇 移动、分散或对齐包含锁定测试点的元件、簇或联合