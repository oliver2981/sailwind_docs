# 第 24 章 虚拟过孔

阅读以下主题以了解虚拟过孔的设置与管理。

## 虚拟过孔概述

虚拟过孔类似于可添加到网络中的元件管脚，它能成为新管脚对的起点和/或终点，从而提供更精细的（子管脚对级）网络控制。例如，可使用虚拟过孔从网络分支创建独立的等长管脚对。

![](/layout/guide/24/_page_0_Picture_5.jpeg)

> [!tip] 在 `SailWind Router` 中也可添加虚拟过孔。

虚拟过孔使用过孔的焊盘栈，可以是通孔、部分孔或单层焊盘。当为网络添加虚拟过孔时，该网络的管脚对总数将增加 1，如下图所示：

![](/layout/guide/24/_page_1_Figure_2.jpeg)

![](/layout/guide/24/_page_1_Figure_4.jpeg)

虚拟过孔上的管脚对规则设置方式与元件管脚相同。在显示界面中，虚拟过孔通过板框颜色的标记进行标识。

![](/layout/guide/24/_page_1_Figure_7.jpeg)

![](/layout/guide/24/_page_1_Figure_8.jpeg)

使用虚拟过孔需具备高级规则许可证。

## 虚拟过孔设置

虚拟过孔使用焊盘栈属性对话框定义的过孔类型。如需创建专用于虚拟过孔的过孔类型（如非钻孔单层焊盘），请参照"过孔设置"流程。

## 为网络添加虚拟过孔

可为未布线、部分布线或完全布线的网络添加虚拟过孔。添加时的行为如下：

- 若为网络首次添加虚拟过孔，且该网络无管脚对规则、无布线且拓扑为"最小化"时，将创建以虚拟过孔为中心的星型管脚对结构（此为唯一生成星型结构的情况）。
  
  > [!warning] 若网络曾添加并删除过虚拟过孔，其拓扑将变为"保护"状态，此时新虚拟过孔仅连接至最近的元件管脚。

- 若网络已有管脚对规则、布线或非最小化拓扑，新虚拟过孔仅连接至最近的元件管脚。

- 若非首次添加虚拟过孔，则仅连接至最近的虚拟过孔。


> [!danger] 
> - 不可在已布线网络的走线上创建星型结构
> 
> - 不可为平面网络添加虚拟过孔

🏃‍♂️‍**步骤**

1. 在设计区域选择目标网络

2. 右键点击选择**添加虚拟过孔**，指针处将出现新虚拟过孔

3. 定位后点击放置，右键选择**取消**可终止操作

👀‍**结果**

- 创建星型结构时，新管脚对生成且网络拓扑变为"保护"状态。状态栏将显示虚拟过孔实例编号（如 VP2）

- 非星型结构需在 `SailWind Router` 中重新调度网络

## 移动虚拟过孔

操作方式与移动过孔相同。

> [!danger] 每次仅能移动一个虚拟过孔。

🏃‍♂️‍**步骤**

1. 在空白处右键选择**选择虚拟过孔**

2. 选中目标后右键选择**移动**

3. 移动时遵循设计网格（初始放置遵循过孔网格）

## 删除虚拟过孔

可从已布线/未布线连接中删除虚拟过孔。

🏃‍♂️‍**步骤**

1. 在空白处右键选择**选择虚拟过孔**

2. 选中目标后右键选择**删除**

👀‍**结果**

- 单连接虚拟过孔：完全删除

- 多连接虚拟过孔（均未布线）：删除后自动重建连接

- 含布线的多连接虚拟过孔：

  - 保留走线并分配新管脚对

  - 跨层连接处可能生成零长度未布线

  - 虚拟过孔位置可能被连接点替代

## 将虚拟过孔转换为过孔

🏃‍♂️‍**步骤**

1. 右键选择**选择虚拟过孔**

2. 选中目标后右键选择**转换为过孔**

👀‍**结果**

- 虚拟过孔变为过孔

- 原有走线/未布线保持连接

- 自动分配穿过新过孔的管脚对

## 固定虚拟过孔

🏃‍♂️‍**步骤**

1. 右键选择**选择虚拟过孔**

2. 选中目标后右键选择**属性**

3. 在对话框中勾选"固定"选项

4. 点击**确定**

## 更改虚拟过孔的过孔类型

🏃‍♂️‍**步骤**

1. 右键选择虚拟过孔属性

2. 从"过孔名称"列表选择新类型

3. 点击**确定**

## 导出至其他格式的支持

虚拟过孔在导出为 PADS-ASCII（9.5 及以上版本）或 DXF 格式时保留原始属性，其他格式（包括早期 PADS-ASCII）将自动转换为过孔。详见"文件导出格式"。

## `ECO` 导入支持

`ECO` 操作默认忽略虚拟过孔，但以下情况会影响含虚拟过孔的网络：

- 网络剩余元件管脚少于 2 个时：删除整个网络及虚拟过孔

- 剩余 2 个以上元件管脚时：保留虚拟过孔并创建新管脚对

- 网络在虚拟过孔处分裂时：虚拟过孔保留在其中一个新网络

## 设计复用支持

物理设计复用不支持虚拟过孔功能。