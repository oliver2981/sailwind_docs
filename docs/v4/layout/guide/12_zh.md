# 第 12 章 使用 SailWind Logic

阅读以下主题，了解如何从 SailWind Logic 原理图创建 PCB 布局、交叉探测以及设计变更的前向和后向标注。

## 通过手动导入 SailWind Logic 网表创建新的 PCB 设计

如果您的计算机上没有同时安装 SailWind Logic 和 SailWind Layout，请使用此方法。此手动方法要求您从 SailWind Logic 手动导出网表，然后将其导入 SailWind Layout。

或者，如果您的计算机上同时安装了 SailWind Logic 和 SailWind Layout，可以使用 SailWind Logic 中的 SailWind Layout Link 功能，这是一种更简单的方法。更多信息，请参阅《SailWind Logic 指南》中的"使用自动化的 SailWind Layout Link 创建新的 PCB 设计"。

**警告：** 对现有设计进行变更前向标注需要不同的流程。请参阅"从 SailWind Logic 前向标注设计变更"。

**前提条件**

这是 SailWind Logic 中启动的流程的延续。您必须拥有网表(*\*.asc*)文件。更多信息，请参阅《SailWind Logic 指南》中的"SailWind Logic 与 SailWind Layout 之间的手动网表处理流程"。

**操作步骤**

1. 在 SailWind Layout 中，点击**文件>导入**菜单项。

2. 在文件类型列表中选择"ASCII 文件(*.asc)"。

3. 导航至从 SailWind Logic 设计创建的网表文件位置，选择它并点击打开。

**结果**

导入流程会从库中获取所有零件类型和封装，并将封装堆叠在原点处。然后您可以点击**工具>分散元件**菜单项来展开元件。或者，您可以根据原理图排列零件。

如果生成了错误报告文件(*ascii.err*)并在网表中发现错误，请参阅"网表处理故障排除"获取更多信息。

## 网表处理故障排除

如果 SailWind Layout 在网表导入过程中发现错误，它会生成错误报告文件(*ascii.err*)并在记事本窗口中显示错误报告文件。如果未发现任何错误，SailWind Layout 不会生成错误文件。

以下是报告的错误及修复这些错误的步骤：

- 库问题

- 单引脚或无引脚网络

- 完全浮动的连接或子网

- 未命名的悬空连接(一端浮动)

- 用于网络的电源和地符号，其名称与符号上的默认名称不同

- 多个子网网络，其中一个或多个子网缺少页间符号

- 带有页间符号的单子网网络(孤立子网警告)

- 用户命名的子网没有可见的网络名称标签

**操作步骤**

1. 在 SailWind Layout 中，点击**文件>新建**菜单项。

2. 当提示保存设计时，点击**否**。

3. 将*ascii.err*文件中列出的任何缺失组件添加到您的库中，可以通过将包含缺失组件的库添加到库列表，或创建缺失的零件类型和封装。(有关说明，请参阅第 144 页的"向库列表添加库"、"创建和修改零件类型"和"创建和编辑 PCB 封装")。

4. 解决*ascii.err*文件中发现的其他错误。

5. 当所有错误都解决后，重复您用于将网表从 SailWind Logic 传递到 SailWind Layout 的流程。

## 按原理图分散元件

从 SailWind Logic 接收网表后，您可以使用"按逻辑分散"功能分散元件，同时保持它们在原理图中指示的相对位置。您还可以指定要对分散元件执行的操作。

**前提条件**

- 您必须拥有从 SailWind Logic 传递到 SailWind Layout 的网表(*\*.asc*)文件，并且已解决*ascii.err*文件中的所有错误。

- 与此功能一起使用的网表必须由 V3.0.34 之后版本的 SailWind Logic 生成。

**操作步骤**

1. 在未选择任何内容的情况下，右键点击并选择**按逻辑分散**弹出菜单项。

2. 在"按逻辑分散"对话框中，指定分散策略，详细信息如下所述。

| 字段              | 描述                                                                                                                                                                                                                                                                         |  |  |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|
| 最小间距          | 指定分散零件之间的最小允许间距(以 mil 为单位)。                                                                                                                                                                                                       |  |  |
| 联合/簇区域       | 指定通过点击分散全部/分散对分散零件执行的操作，选项如下：<br>• 无(默认)：不执行其他操作<br>• 创建联合：使用零件创建联合。<br>• 创建簇：使用零件创建簇。       |  |  |
| 图纸/零件区域     | • 左侧的图纸列表：列出所有原理图图纸。<br>• 右侧的零件表：显示所选原理图图纸中的零件信息，包括参考标识符、PCB<br>封装和值。根据图纸列表中的选择而变化。 |  |  |
| 分散全部          | 分散所有原理图图纸中的零件，除了那些被粘合或在联合/簇中的零件。                                                                                                                                                                                           |  |  |
| 分散              | 分散所选原理图图纸中的零件，除了那些被粘合或在联合/簇中的零件。<br>注意：<br>如果没有可用空间放置，零件会附着到指针上以便在设计中进行手动放置。                                                            |  |  |

## 与 SailWind Logic 交叉探测

您可以通过使用 SailWind Logic 中的 SailWind Layout Link 功能来控制与 SailWind Logic 的交叉探测。

有关说明，请参阅《SailWind Logic 指南》中的"SailWind 产品之间的交叉探测"。

## 从 SailWind Logic 前向标注设计变更

您可以将设计变更从 SailWind Logic 导入 SailWind Layout。通过比较原理图和布局设计创建包含设计变更的 ECO 文件。然后，您可以使用以下三种方法之一将设计变更从 SailWind Logic 设计向前传递。

**提示** 如果您是通过首次导入网表来创建新的 PCB，请参阅第 271 页的"通过手动导入 SailWind Logic 网表创建新的 PCB 设计"。

**警告：**

前向标注导致的设计变更可能导致现有的"电气网络"被截断、分割或完全删除。如果更新组件的参考标识符前缀在电气网络对话框中指定，它也可能导致现有电气网络被扩展或创建新的电气网络。更多信息，请参阅第 337 页的"电气网络"。

如果您的计算机上同时安装了 SailWind Logic 和 SailWind Layout，使用 SailWind Logic 中的"SailWind Layout Link"功能是最简单、最快速的自动化流程。更多信息，请参阅《SailWind Logic 指南》中的"使用自动化的 SailWind Layout Link 进行前向标注"。

如果您的计算机上没有 SailWind Logic，您必须在 SailWind Logic 或 SailWind Layout 中比较原理图和布局设计，生成*.eco*文件以应用于布局设计。在 SailWind Layout 中使用比较/ECO 工具需要更少的步骤，因为它还可以自动导入生成的*.eco*文件的差异。

使用 SailWind Layout 生成的 ECO 文件进行前向标注 通过从 SailWind Logic 导入 ECO 文件进行前向标注

### 使用 SailWind Layout 生成的 ECO 文件进行前向标注

SailWind Logic 为您提供更新的网表文件，您可以将其与当前 PCB 布局进行比较以生成*.eco*文件。然后您可以导入该文件以更新 PCB 布局。

此流程是《SailWind Logic 指南》中方法 2——在 SailWind Layout 中生成 ECO 文件流程的延续。

![](/layout/guide/12/_page_4_Picture_13.jpeg)

**警告：**

前向标注导致的设计变更可能导致现有的电气网络被截断、分割或完全删除。如果更新组件的参考标识符前缀在电气网络对话框中指定，它也可能导致现有电气网络被扩展或创建新的电气网络。更多信息，请参阅第 337 页的"电气网络"。

**限制和约束**

- 在设计比较期间，重用定义被忽略，物理设计重用中的实际元素用于比较。

- 传输非 ECO 注册零件和非电气零件受到限制。请参阅 SailWind Logic 选项对话框设计类别中的覆盖设置。

**前提条件**

您必须拥有更新的原理图网表(*.asc*)文件，并且在 SailWind Layout 中打开 PCB 设计。

**操作步骤**

1. 导入*.eco*文件后无法撤销。如果您认为可能需要恢复到导入前的设计状态，应保存 PCB 布局的副本。

2. 在 SailWind Layout 中点击**工具>比较/ECO**菜单项。

3. 在比较/ECO 对话框中，点击第 1185 页的文档选项卡。

4. 在"要比较和更新的原始设计"区域，选择"使用当前 PCB 设计"复选框。如果该复选框不可用，您需要先清除"具有变更的新设计"区域中同名的复选框。

5. 在"具有变更的新设计"区域，浏览更新的原理图网表(*.asc*)文件。您需要将文件类型更改为"ASCII 文件(*.asc)"以定位您的文件。

6. 点击第 1181 页的比较选项卡，选择您想要用于设计比较的选项。

![](/layout/guide/12/_page_5_Picture_13.jpeg)

**提示** 为避免前向标注期间的意外变更，考虑在前向标注前比较数据。在**文档**选项卡中仅选择生成差异报告复选框，并点击**运行**。网表和 PCB 文件被比较，差异写入*\SailWind Projects*文件夹中的*Layout.rep*。点击流程状态对话框中的**显示报告**查看差异。

7. 在**文档**选项卡中，选择生成 ECO 文件复选框，并验证 ECO 文件名。给文件一个唯一的名称以避免覆盖任何现有的 ECO 文件。

8. 点击第 1187 页的更新选项卡，选择更新原始设计复选框。这将避免您手动导入生成的 ECO 文件。

9. 设置其他更新选项。

10. 点击**运行**。流程状态对话框打开。输出文件写入*\SailWind Projects*文件夹。比较期间发生的消息或错误也写入*\SailWind Projects*文件夹中的*Layout\_Session.log*和*Layout.err*。

**结果**

生成的文件有：

- *<pcb\_name>mine.eco*  ECO 文件。包含描述将原始设计更新以匹配新设计所需变更的 ECO 命令。当您在比较/ECO 工具对话框的**文档**选项卡中选择生成 ECO 文件复选框时生成。更多信息，请参阅《SailWind Layout 命令参考》中的"ECO 文件命令"。

- *Layout.rep*  差异报告文件。描述"旧"和"新"比较文件之间的差异。当您从比较/ECO 工具对话框的**文档**选项卡中选择生成差异报告复选框时生成。更多信息，请参阅第 848 页的"差异报告"。

- *ecogtmp0.asc*  "旧"网表的临时副本

- *ecogtmp1.asc*  "新"网表的临时副本

- *ecogtmp[ 0|1 ].err*  仅在网表中发现错误时生成。此文件的链接显示在输出窗口中。

### 通过从 SailWind Logic 导入 ECO 文件进行前向标注

您将设计变更的*.eco*文件导入 SailWind Layout。

更多信息，请参阅《SailWind Logic 指南》中的方法 3——在 SailWind Logic 中生成 ECO 文件。

**警告：**

前向标注导致的设计变更可能导致现有的电气网络被截断、分割或完全删除。如果更新组件的参考标识符前缀在电气网络对话框中指定，它也可能导致现有电气网络被扩展或创建新的电气网络。更多信息，请参阅第 337 页的"电气网络"。

**限制和约束**

- 在设计比较期间，重用定义被忽略，物理设计重用中的实际元素用于比较。

- 传输非 ECO 注册零件和非电气零件受到限制。请参阅 SailWind Logic 选项对话框设计类别中的覆盖设置。

![](/layout/guide/12/_page_6_Picture_15.jpeg)

**提示** 只要 PCB 设计没有经过工程变更，可以将 SailWind Logic 导出的最后一个*.asc*文件与 SailWind Logic 中的当前设计进行比较，生成设计中的工程变更*.eco*文件。如果最后导出的*.asc*文件丢失，您可以从 SailWind Layout 导出第 291 页的*.asc*文件，与当前原理图进行比较，生成导入 SailWind Layout 以更新 PCB 布局的*.eco*文件。使用"使用 SailWind Layout 生成的 ECO 文件进行前向标注"方法会产生相同的效果，但该方法通过自动导入*.eco*文件实现半自动化流程。

**前提条件**

您必须获取*.eco*文件，并且在 SailWind Layout 中打开 PCB 设计。

**操作步骤**

1. 导入*.eco*文件后无法撤销。如果您认为可能需要恢复到导入前的设计状态，应保存 PCB 布局的副本。

2. 点击**文件>导入**菜单项。

3. 在文件导入对话框中，选择"ECO 文件(*.eco)"文件类型。

4. 浏览至要导入的文件并点击**打开**。

**结果**

如果在导入过程中出现错误，*eco.err*文件会在您的默认文本编辑器中打开。在*.eco*文件无错误导入之前，不会对 PCB 布局进行任何更改。ECO 导入错误文件的链接也会写入输出窗口。

## 从 SailWind Layout 后向标注到 SailWind Logic

使用称为*后向标注*的流程，您可以将 PCB 布局变更"回传"到原理图。您可以发送零件、门、引脚、网络和属性变更。

**警告：**

虽然有三种方法可以后向标注设计变更，但只推荐一种方法——使用 SailWind Layout 的 ECO 文件进行后向标注。其他方法通过设计比较生成*.eco*文件——这是一个不太准确的过程。推荐的方法是在 SailWind Layout 中进行 ECO 变更时记录*.eco*文件，并手动将其导入 SailWind Logic 以获得最佳结果。更多信息，请参阅第 814 页的"记录与生成 ECO 文件"。

使用自动化的 SailWind Layout Link 进行后向标注 使用 SailWind Layout 的 ECO 文件进行后向标注 使用在 SailWind Logic 中创建的 ECO 文件进行后向标注 后向标注结果

### 使用自动化的 SailWind Layout Link 进行后向标注

如果 SailWind Logic 和 SailWind Layout 位于同一台计算机上，您可以使用 SailWind Layout Link 对话框比较更新的 PCB 设计与较旧的原理图，并从更新的 PCB 设计更新较旧的原理图。您还可以创建差异报告。

**限制和约束**

传输非 ECO 注册零件和非电气零件受到限制。有关详细信息，请参阅选项对话框设计类别。

在设计比较期间，重用定义被忽略，物理设计重用中的实际元素用于比较。

![](/layout/guide/12/_page_8_Picture_11.jpeg)

**警告：**

此方法生成新的*.eco*文件，不使用记录的*.eco*文件。在*.eco*文件中记录确切的变更可获得最佳的后向标注结果。使用"使用 SailWind Layout 的 ECO 文件进行后向标注"可获得最佳结果。更多信息，请参阅第 814 页的"记录与生成 ECO 文件"。

**前提条件**

您必须在 SailWind Logic 中打开较旧的原理图，在 SailWind Layout 中打开更新的 PCB 设计。

**操作步骤**

1. 在 SailWind Logic 中，点击**工具>SailWind Layout**菜单项。

2. 如果 SailWind Layout 尚未打开设计，将显示连接到 SailWind Layout 对话框。

	a. 点击**打开**在 SailWind Layout 中打开您要从中标注的 PCB 设计。

	b. 在文件打开对话框中，选择*.pcb*文件并点击**打开**。

3. 在 SailWind Layout Link 对话框中，点击设计选项卡。

![](/layout/guide/12/_page_9_Picture_7.jpeg)

**提示** 为避免后向标注期间的意外变更，考虑在后向标注前比较数据。如果您想在更新前检查设计差异，点击**比较 PCB**按钮。两个版本被比较，差异写入*\SailWind Projects*文件夹中的*Logic.rep*。点击输出窗口中的*logic.rep*链接查看报告。

4. 在首选项选项卡上，设置适当的选项。

5. 在 ECO 名称选项卡上，设置适当的选项。

6. 在设计选项卡上：

	a. 如果需要，选择"比较设计规则"和"显示网络列表错误报告"复选框。

	b. 点击**从 PCB 生成 ECO**按钮。

**结果**

如果您收到原理图网络列表可能有错误的消息，您不应继续，而应选择显示网络列表错误报告复选框并再次运行从 PCB 生成 ECO 以调查和修复错误，然后再继续。

### 使用 SailWind Layout 的 ECO 文件进行后向标注

使用 SailWind Layout 创建设计变更的*.eco*文件，然后将其导入 SailWind Logic 设计。

记录设计工程变更是生成*.eco*文件的首选方法，因为它创建了变更的完美"前后"记录。您可以通过比较设计生成*.eco*文件；但是，它不会为零件类型和连接完全相同的组件创建完美的前后记录。更多信息，请参阅第 814 页的"记录与生成 ECO 文件"。

**限制和约束**

- 传输非 ECO 注册零件和非电气零件受到限制。有关详细信息，请参阅"选项对话框设计类别"。

- 在设计比较期间，重用定义被忽略，物理设计重用中的实际元素用于比较。

**前提条件**

如果您忘记记录*.eco*变更并且必须通过比较两个设计生成*.eco*文件，请参阅"比较设计的两个版本"。

**操作步骤**

1. 在*.eco*文件中记录工程/网表变更。更多细节，请参阅第 814 页的"记录 ECO 变更"。
2. 在 SailWind Logic 中，点击**工具>选项**菜单项。在选项对话框中，点击**设计**类别。
3. 适当设置"允许用库中的空白值覆盖设计中的属性值"复选框，以允许或防止用库中的空白("占位符")值覆盖非空白属性值。
4. 点击**确定**。
5. 在 SailWind Logic 中，打开您的设计，点击**文件>导入**菜单项。
6. 在文件导入对话框中，在文件类型列表中，选择"ECO 文件(*.eco)"。
7. 浏览并选择要导入的 ECO 文件。
8. 点击打开。

**结果**

如果没有错误发生，原理图会被更新。如果发生错误，原理图不会被更新，错误以及 ECO 导入错误文件(*eco.err*)的链接会写入输出窗口。

### 使用在 SailWind Logic 中创建的 ECO 文件进行后向标注

您可以获取*.asc*文件格式的布局设计，并使用 SailWind Logic 比较/ECO 工具与原理图设计进行比较。然后您可以将设计变更的*.eco*文件导入 SailWind Logic 原理图设计。

**限制和约束**

- 传输非 ECO 注册零件和非电气零件受到限制。有关详细信息，请参阅"选项对话框设计类别"。

- 在设计比较期间，重用定义被忽略，物理设计重用中的实际元素用于比较。

![](/layout/guide/12/_page_11_Picture_4.jpeg)

**警告：**

此方法生成新的*.eco*文件，不使用记录的*.eco*文件。在*.eco*文件中记录确切的变更可获得最佳的后向标注结果。使用"使用 SailWind Layout 的 ECO 文件进行后向标注"可获得最佳结果。更多信息，请参阅第 814 页的"记录与生成 ECO 文件"。

**前提条件**

您必须拥有从 SailWind Layout 导出的*.asc*文件。更多细节，请参阅第 291 页的"导出 ASCII 文件"。

**操作步骤**

1. 在 SailWind Logic 中，点击**工具>选项**菜单项。在选项对话框中，点击**设计**类别。

2. 适当设置"允许用库中的空白值覆盖设计中的属性值"复选框，以允许或防止用库中的空白("占位符")值覆盖非空白属性值。

3. 点击**确定**。

4. 在 SailWind Logic 中，点击**工具>比较/ECO**菜单项。

5. 在比较/ECO 对话框中，点击文档选项卡。

6. 在"要比较和更新的原始设计"区域，选择使用当前原理图设计复选框。如果该复选框不可用，您需要先清除"具有变更的新原理图设计"区域中同名的复选框。

7. 在"具有变更的新原理图设计"区域，浏览从 SailWind Layout 导出的新*.asc*文件。在新设计文件名对话框中，将文件类型更改为"ASCII 文件(*.asc)"以定位您的文件。

8. 点击比较选项卡，选择您想要用于设计比较的选项。

9. 可选地，如果您想在创建 ECO 文件前检查设计差异：

	a. 在**文档**选项卡中选择生成差异报告复选框。

	b. 清除生成 ECO 文件复选框。

	c. 点击**运行**。网表和 PCB 文件被比较，差异写入*\SailWind Projects*文件夹中的*Logic.rep*。点击流程状态对话框中的**显示报告**查看差异。

10. 选择生成 ECO 文件复选框，并验证 ECO 文件名。给文件一个唯一的名称以避免覆盖任何现有的 ECO 文件。

11. 点击**运行**。输出文件写入*\SailWind Projects*文件夹。比较期间发生的消息或错误也写入*\SailWind Projects*文件夹中的*Logic\_Session.log*和*Logic.err*。

12. 在 SailWind Logic 中，点击**文件>导入**菜单项。

13. 在文件导入对话框中，在文件类型列表中，点击"ECO 文件(*.eco)"。

14. 浏览并选择要导入的 ECO 文件。

15. 点击*打开*。

**结果**

如果没有错误发生，原理图会被更新。如果发生错误，原理图不会被更新，错误以及 ECO 导入错误文件(*eco.err*)的链接会写入输出窗口。您必须纠正错误才能导入文件。

### 后向标注结果

后向标注流程在向后标注到原理图时以不同方式处理各种布局变更。

**属性级别后向标注**

您可以后向标注新属性和删除的属性。

**新属性**

- 零件中的新属性更新所有相同类型的零件。如果属性名称不存在，则添加具有指定值的属性。

- 如果零件不存在，则创建错误。

- 忽略不支持的类型属性，如网络或网络类。

**删除的属性**

- 删除零件类型的属性会删除设计中该类型所有零件的属性。

- 如果零件或属性名称不存在，则生成错误消息。

- 如果属性命令指定了一般属性不支持的对象类型，如网络或网络类，则忽略属性命令。

**零件级别后向标注**

您可以后向标注添加的零件、变更的零件、删除的零件和参考标识符名称。

**添加的零件**

- 创建新图纸并将所有新零件添加到图纸中。零件放置在网格上，以便中等大小的零件不会重叠。不尝试避免较大零件的重叠。

- 如果新添加零件的参考标识符已存在或零件在库中不存在，则生成错误消息。

- 如果参考标识符已存在，则不会将零件添加到原理图。

- 如果零件包含信号引脚，这些引脚包含在添加引脚功能中。后向标注当前不支持信号引脚，因此会创建错误消息。

**变更的零件**

- 如果变更的零件是多门零件，则所有门都更新为新零件类型。

- 如果新零件在设计或库中不存在，或者门或引脚计数不兼容，则生成错误消息。

**删除的零件**

- 如果删除的零件是多门零件，则删除所有门。

- 如果零件仍连接到网络或零件不存在，则生成错误消息。

**参考标识符名称**

• 如果重命名的零件是多门零件，则更新所有门。如果旧参考标识符不存在，则生成错误消息。

**门级别后向标注**

您可以后向标注交换的门。

• SailWind Logic 在每个交换的门处创建页间符号。如果门不存在，则创建错误消息。

**网络级别后向标注**

您可以后向标注连接的网络、通过分割现有网络创建的网络和重命名的网络。

**连接的网络**

• 第一个网络重命名为与第二个网络相同的名称。

**通过分割现有网络创建的网络**

• 执行从网络中删除引脚操作以将它们从现有网络中移除，然后执行添加引脚到网络操作以将引脚添加到新网络。

**重命名的网络**

- 重命名所有图纸上旧网络的所有子网。如果任何子网包含没有网络名称的电源或地符号，则向这些符号添加网络名称。

- 如果新网络已存在，则创建错误消息。

**引脚级别后向标注**

您可以后向标注交换的引脚、添加到网络的引脚和从网络断开的引脚。

**交换的引脚**

• SailWind Logic 在每个交换的引脚处创建页间符号。

**添加到网络的引脚**

- 仅当引脚尚未连接到另一个网络时才能添加引脚。如果引脚是门引脚(门符号上的可见终端引脚)，则创建页间符号。

- 如果引脚已连接或引脚是已分配到网络的信号引脚，则创建错误。

**从网络断开的引脚**

- 如果引脚是门引脚，则删除连接到连接点或页间符号的连接。如果连接通向另一个门引脚，则断开连接，并添加页间符号。

- 如果引脚未连接到相关网络，则此命令生成错误消息。