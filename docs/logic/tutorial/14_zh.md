# 模拟仿真设计教程
模拟器件需要特殊的模拟属性。SPICE 网表功能使用这些模拟属性来为 SPICE 仿真器构建 SPICE 网表。SPICE 模型也可以链接到器件，为网表生成器提供所需的值。

**本课程内容：**

1. 创建 RLC 电路
2. 创建运算放大器电路
3. 向库中添加模型

🙊**限制**

本教程需要 SailWind SPICEnet 许可选项。在帮助菜单中，点击**已安装选项**以确认您是否可以继续。

😎**前提**

如果尚未运行，请启动 SailWind Logic。

## 创建 RLC 电路 \{#1}
使用模拟器件构建电阻-电感-电容电路。为器件添加模拟属性以便生成 SPICE 工具所需的网表。

### 新建原理图 \{#1-1}
点击**新建**按钮。在提示时，点击**否**不保存文件。

### 添加 SPICE 库 \{#1-2}
设计所需的器件位于 Spice 库中。将该库添加到库管理器。

1. **文件**菜单 > **库**
2. 在库管理器对话框中，点击**管理库列表**
3. 在库列表对话框中，点击**添加**
4. 在添加库对话框中，选择**spice**库并点击**打开**
5. 在库列表中选择**spice**库，点击**上移**按钮直到 spice 库位于列表顶部
6. 点击**确定**
7. 在库管理器对话框中，点击**关闭**

### 添加模拟器件 \{#1-3}
通过将所需器件添加到原理图来开始构建 RLC 电路。

1. 点击添加器件按钮
2. 在"从库添加器件类型"对话框中，在筛选区域确保**spice**库显示在库列表中且项目框包含"*"以显示所有库项目。如果在筛选器中做了任何更改，请点击**应用**
3. 选择**CAP0805**电容然后点击**添加**


4. 点击将电容器放置在原理图中
5. 按**Esc**取消添加更多电容器
6. 在"从库添加器件"对话框中，对以下器件类型重复步骤 3-5

    | 器件类型       |
    |----------------|
    | IND-MOLDED     |
    | RES0805        |
    | VOLTAGE_SUPPLY*|

    *如果提示，使用 V 作为字母前缀

7. 完成后，在"从库添加器件"对话框中点击**关闭**

### 连接模拟器件 \{#1-4}
按照上一节中的图片指导连接所有组件。

1. 点击添加连接按钮
2. 选择一个管脚开始连接，点击创建拐角，再选择一个管脚完成连接
3. 选择电容器和电源之间的连接
4. 拖动创建电源支路，向下移动指针
5. **右键点击**并选择**地**
6. 点击放置地符号
7. 按**Esc**退出添加连接模式

### 标记连接 \{#1-5}
标记组件之间的连接。标签使 SPICE 网表易于理解。

1. **右键点击**并选择**选择任意对象**
2. 双击电源和电阻之间的网络
3. 在网络属性对话框中，选中**网络名称标签**复选框
4. 在"网络名称"框中输入**INPUT**然后点击**确定**
5. 对其余网络重复步骤 2-4。使用下表中的网络名称

| 网络位于        | 网络名称 |
|----------------|----------|
| 电阻和电感之间  | MID      |
| 电感和电容之间  | OUT      |

地连接在添加地符号时会自动标记。

### 检查模拟属性 \{#1-6}
属性可以在库中或原理图中添加到器件。检查原理图中器件上预定义的 SPICE 属性。

1. **右键点击** > **选择器件** > 选择一个器件 > **右键点击** > **属性**
2. 在器件属性对话框中，检查 Sim.Analog.Order 和 Sim.Analog.Prefix 属性。所有模拟属性都包含 Sim.Analog 前缀
3. 点击**确定**关闭器件属性对话框

    > [!TIP]
    >
    > 详细的 SPICE/模拟属性列表可在帮助中找到。在帮助的主题选项卡中，指向 SPICE 网表属性词汇表。

### 设置网表生成器 \{#1-7}
SPICE 网表生成器可为多种不同的 SPICE 工具创建网表格式。

1. **工具**菜单 > **SPICE 网表**
2. 在 SPICEnet 对话框的选择图纸列表区域，选中**Sheet 1**复选框
3. 在输出格式列表中，选择您将使用的 SPICE 软件的供应商格式
4. 点击**仿真设置**
5. 选中**交流分析**复选框
6. 点击**交流分析**按钮
7. 确保间隔设置为每十倍频程 10 个点
8. 确保频率从 1Hz 开始到 1kHz 结束，然后点击**确定**
9. 在仿真设置对话框中点击**确定**
10. 在 SPICEnet 对话框中点击**确定**生成网表

### 检查网表 \{#1-8}
网表会在默认文本编辑器中打开，可以在导入 SPICE 软件前查看或编辑。

1. 注意交流分析的参数
2. 注意连接和属性值列在所引用的器件旁边
3. 不要保存文件副本

## 完成运算放大器电路 \{#2}
完成另一个常见的模拟电路——运算放大器电路。从库中添加运算放大器并检查 SPICE 网表。

### 打开运算放大器电路 \{#2-1}
点击打开按钮，打开\SailWind Projects\Samples 文件夹中名为**opamp.sch**的文件。

### 添加缺失的运算放大器 \{#2-2}
1. 点击添加器件按钮
2. 在"从库添加器件类型"对话框中，选择 OP-471 器件然后点击**添加**
3. 将器件定位在原理图中开放连接的顶部并点击放置门
4. 按**Esc**取消添加更多运算放大器门
5. 在"从库添加器件类型"对话框中点击**关闭**

### 添加属性值 \{#2-3}
为放大器的模拟属性添加网络名称值。

1. 未选择任何对象时 > **右键点击** > **选择器件**
2. 选择**U1-A**器件
3. **右键点击**并点击**属性**
4. 双击 Neg 属性的**值**框
5. 在值框中输入**OP_VIN**

6. 对每个属性重复步骤 4 和 5，使用以下值

    | 属性 | 值   |
    |------|------|
    | Out  | VOUT |
    | Pos  | GND  |

7. 点击**确定**

### 设置网表生成器 \{#2-4}
1. **工具**菜单 > **SPICE 网表**
2. 在 SPICEnet 对话框的选择图纸列表中，选中**Sheet 1**复选框
3. 在输出格式列表中，选择您将使用的 SPICE 软件的供应商格式
4. 点击**仿真设置**
5. 选中**瞬态**复选框并清除所有其他复选框
6. 点击**瞬态**按钮
7. 确保存在以下参数

    | 参数             | 值  |
    |------------------|-----|
    | 数据步长时间     | 1ms |
    | 总分析时间       | 10ms|

8. 选中**使用初始条件**复选框然后点击**确定**
9. 在仿真设置对话框中点击**确定**
10. 在 SPICEnet 对话框中点击**确定**生成网表

### 检查网表 \{#2-5}
检查网表中的错误。

注意行**\* 无法打开数据文件 lm741n.mod**

> [!TIP]
>
> 原理图中的放大器引用了模拟模型，但库中没有模型文件。

## 向库中添加模型 \{#3}
向库中的 lm741 器件添加 SPICE 模型，为网表生成器提供仿真所需的基本值。

1. 使用资源管理器窗口，导航到您的库文件夹。C:\<安装目录>\<版本>\Libraries\
2. 添加名为**spice**的新文件夹
3. 在 spice 文件夹中，添加名为**Analog Models**的新文件夹
4. 从 C:\SailWind Projects\Samples 文件夹复制 lm741n.mod 文件并粘贴到 Analog Models 文件夹中

### 运行 SPICE 网表生成器 \{#3-1}
使用库中添加的模型创建无错误的 SPICE 网表。

1. **工具**菜单 > **SPICE 网表**
2. 确保您的设置没有更改
3. 在 SPICE 网表对话框中点击**确定**生成网表
4. 点击**是**覆盖现有文件
5. 检查网表查看额外的 SPICE 模型信息

**您已完成创建库器件教程。**