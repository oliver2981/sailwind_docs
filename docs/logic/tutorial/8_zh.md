# 分配约束教程
为设计分配约束可以轻松控制和验证关键设计区域。约束类型包括间距、布线规则和高速规则，可以分配给网络、层、类（网络集合）、组（管脚对集合）或单个管脚对。您还可以分配一组默认设计规则，适用于所有没有特殊规则的物体。

**本课程内容：**

- 建立 PCB 层排列
- 设置默认间距规则
- 设置网络间距规则
- 设置条件规则

😎**前提**

如果尚未运行，请启动 SailWind Logic 并打开 `\SailWind Projects\Sample` 文件夹中的**previewchange.sch**文件。

## 建立 PCB 层排列 \{#1}
您可以定义 PCB 的层排列，包括层数、与嵌入式平面层关联的网络、层堆叠和层厚度。

本教程设计是一个四层 PCB，具有两个支持多个平面网络的内层平面层。在本节中，您将使用层定义工具定义教程设计的层排列。

**增加层数**

当您首次开始设计时，默认是两层 PCB。要更改层数：

1. **设置**菜单 > **层定义**
2. 在层设置对话框中，在电气层区域，点击**修改**
3. 在修改电气层数对话框中，输入**4**
4. 点击**确定**将层数从 2 层增加到 4 层
5. 在重新分配层对话框中，点击**确定**

**设置层排列和名称**

设置正确的层数后，为每层分配层类型并输入层名称。

**设置第一层：**

1. 在层设置对话框中，从层列表中选择**顶层**
2. 在名称框中输入**主元件面**
3. 在电气层类型区域，点击**元件**层类型
4. 在平面类型区域，点击**无平面**
5. 设置布线方向为**垂直**

**设置第二层：**

1. 选择第二层，**内层 2**，重命名为**地平面**
2. 在平面类型区域，点击**CAM 平面**
3. 点击**分配网络**按钮
4. 在平面层网络对话框中，在所有网络列表中，向下滚动，点击网络 **GND** ，点击**添加**将网络与地平面层关联
5. 点击**确定**
6. 设置布线方向为**任意**

**设置第三层：**

1. 选择第三层，**内层 3**，重命名为**电源平面**
2. 在平面类型区域，点击**混合平面**
3. 点击**分配网络**按钮
4. 在平面层网络对话框中，选择网络 **+5V** 和 **+12V** ，点击**添加**将网络与电源平面层关联
5. 点击**确定**
6. 设置布线方向为**任意**

**设置第四层：**

1. 选择第四层，**底层**，重命名为**次元件面**
2. 在电气层类型区域，点击**元件**层类型
3. 在平面类型区域，点击**无平面**
4. 设置布线方向为**水平**

**设置层堆叠**

典型的四层 PCB 层堆叠由一对覆铜玻璃纤维基板组成，中间有绝缘/粘合材料。绝缘/粘合材料通常是树脂片，当制造多层板时，它将基板对粘合在一起。这种粘合材料也称为*预浸料*。层堆叠：

![](/logic/tutorial/8/_page_1_Figure_25.jpeg)

使用层厚度对话框设置层堆叠值。

1. 在层设置对话框中，点击**厚度**
2. 在层厚度对话框中，在铜厚度单位区域点击**重量(oz)**
3. 在层列表中，对于**主元件面**，在厚度框中双击并输入**2**，表示铜重量为两盎司
    > [!TIP]
	>
    >  1 盎司铜重量=0.00135 英寸铜厚度
5. 对于**地平面**，在厚度框中输入**1**，表示铜重量为一盎司
6. 对于**电源平面**，输入**1**，表示铜重量为一盎司
7. 对于**次元件面**，输入**2**，表示铜重量为两盎司
8. 在地平面和电源平面之间的衬底列表框之间双击，切换到**预浸料**，将此层设置为绝缘/粘合层
9. 在预浸料层的厚度框中双击，输入**35**
    > [!TIP]
	>
    > 介电常数是为制造材料(如 FR-4)提供的值，用于描述电气特性
11. 点击**确定**关闭层厚度对话框
12. 点击**确定**关闭层设置对话框

## 设置默认间距规则 \{#2}
您可以为设计规则层次结构的每个级别定义间距、布线和高速规则。

![](/logic/tutorial/8/_page_2_Figure_14.jpeg)

间距规则对话框的间距区域包含 PCB 设计数据矩阵。您可以为矩阵中的每个或所有数据类型指定值。

1. **设置**菜单 > **设计规则** > **默认**按钮 > **间距**按钮
2. 点击**全部**设置全局默认间距值
3. 在输入间距值对话框中，输入**8**并点击**确定**
4. 在走线宽度区域，在最小值框中输入**6**，在推荐值框中输入**8**，在最大值框中输入**12**
5. 在相同网络和其他间距文本框中输入**12**，除了走线到 Crn 框。将此框设置为**0**
6. 点击**确定**

**设置默认布线规则**

为避免在平面层上布线，请从布线规则定义的选定布线层中移除它们。

1. 在规则对话框中，点击**布线**按钮
2. 在选定层列表中，选择**地平面**，按住**Ctrl**键点击**电源平面**添加到选择中
3. 点击**移除**禁止在平面层上布线
4. 点击**确定**关闭布线规则对话框
5. 点击**关闭**关闭默认规则对话框

## 设置网络间距规则 \{#3}
您可以为网络分配特定的间距，这些间距将覆盖之前输入的默认规则。

1. 在规则对话框中，点击**网络**按钮
2. 滚动浏览网络列表，按住 Ctrl 键点击 **+5V** 、 **+12V** 和 **GND** 
3. 点击**间距**按钮为所有三个网络设置相同的间距规则
4. 点击间距矩阵左上角的**全部**设置全局默认间距值
5. 在输入间距值对话框中，输入**10**作为全局间距，点击**确定**
6. 在走线宽度区域，在最小值框中输入**10**，在推荐值框中输入**12**，在最大值框中输入**15**
7. 点击**确定**完成定义
8. 关闭网络规则对话框

## 设置条件规则 \{#4}
当两个网络之间需要特定间距时（以避免对电路产生不利影响），必须定义条件规则。

1. 在规则对话框中，点击**条件规则**按钮
2. 在源规则对象区域，点击**网络**
3. 选择网络  **+5V** 
4. 在目标规则对象区域，点击**网络**
5. 选择网络  **+12V** 
6. 点击**创建**定义条件规则
7. 在当前规则集区域，在对象到对象框中输入**25**
8. 关闭所有打开的对话框
9. 不要保存设计副本

**您已完成分配约束教程**