# 创建库元件教程
您可以使用库管理器和 PCB 封装编辑器创建构成 SailWind 库中元件类型的库元素。

**本课程内容：**

1. 理解 SailWind 元件类型
2. 创建 CAE 封装
3. 创建新元件类型

😎**前提**

如果尚未启动，请启动 SailWind Logic 软件。

## 理解元件类型
在将元件添加到原理图之前，它必须作为元件类型存在于库中。元件类型由三个元素组成：

- 原理图符号，在库中称为 CAE 封装
- 元件封装，在库中称为 PCB 封装
- 电气参数，如管脚编号和门分配

| 元素                 | 描述                                        |
|----------------------|--------------------------------------------|
| 元件类型名称:        | 7404                                       |
| CAE 封装:             | INV(反相器)                                |
| PCB 封装:             | DIP14(14 管脚双列直插封装)                  |
| 电气参数:            | 使用 12 个逻辑门(A 到 F)使用 14 个管脚中的 12 个，1 个电源管脚和 1 个地线管脚 |

**元件类型示例：7404**

您可以在 SailWind Logic 或 `SailWind Layout` 中创建元件类型，但 CAE 封装只能在 SailWind Logic 中创建，PCB 封装只能在 `SailWind Layout` 中创建。

**CAE 封装**

添加到原理图的每个元件都必须有一个 CAE 封装来图形化表示元件的逻辑功能。

虽然有些元件完全用单个 CAE 封装表示，但其他元件由同一 CAE 封装的多个实例组成，如 7404 元件(上述多门反相器)。

CAE 封装由连接到终端周围的管脚封装组成，这些终端围绕图形符号间隔放置。

该实体表示设备全部或部分。终端可以分配管脚名称来表示管脚的逻辑功能，如 IN、OUT 或 VSS。所有 CAE 封装的元素都在元件编辑器中创建。

![](/logic/tutorial/3/_page_1_0.jpeg)

## 创建 CAE 封装
在本练习中，您将使用 CAE 封装向导和其他功能为 87C256 元件类型创建 CAE 封装，如下方图形所示。

![](/logic/tutorial/3/_page_1_3.jpeg)

**创建 CAE 封装**

1. 工具菜单 > 元件编辑器
2. 在元件编辑器工具栏上点击**编辑图形**按钮，然后点击**确定**确认创建具有默认名称的新 CAE 封装

进入 CAE 封装编辑器后，会出现几个文本标签和一个 CAE 封装原点标记。

每个标签都是 CAE 封装相关文本对象的占位符。这些标签在 CAE 封装上的位置决定了 CAE 封装文本对象在原理图中出现的位置。

原点标记作为移动或定位 CAE 封装的原点。

选择标签并将其移动到所需位置。

**标签占位符**

| REF           | 参考标识符                |
|---------------|-------------------------|
| PART-TYPE     | 元件类型(7404, 74LS74 等) |
| *Free Label 1 | 显示的第一个元件类型属性 |
| *Free Label 2 | 其他显示的元件类型属性 |

> [!TIP]
>
>  属性是可以包含在元件库描述中并导出到元件清单的特定类型元件信息。例如元件制造商、封装类型和零件号。

**使用 CAE 封装向导创建 CAE 封装**

1. 封装编辑器工具栏按钮 > CAE 封装向导按钮
2. 在 Box 参数区域，在 Min width 框中输入**800**
3. 在 Left Pins 区域，选择**PIN**作为管脚封装，在 Pin count 框中输入**19**
4. 在 Right Pins、Upper Pins 和 Lower Pins 的 Pin count 框中输入**0**
5. 点击**确定**创建 CAE 封装

您现在有了 CAE 封装的开始部分。此过程创建了一个具有 19 个终端(管脚封装末端的小 X)的 CAE 封装，每个终端有一个 PIN 类型的管脚封装。

**参见：** *SailWind Logic 帮助*了解终端与管脚封装之间的关系

**添加新终端**

此时，CAE 封装尚未完成。您必须添加输出管脚并修改输入管脚上的部分符号。

1. 添加终端按钮**。**
2. 从 Pins 列表点击**PIN**封装，点击**确定**
3. 新终端附加到指针后，右键点击**X 镜像**，在 X 轴或水平方向镜像终端
4. 将终端定位在符号右侧 X**1000**，Y**1900**处，点击放置终端

**使用步进重复添加新终端**

添加终端后，SailWind Logic 保持在添加终端模式；下一个新终端将附加到指针。使用步进重复功能可以快速添加多个终端，而不是像上面那样逐个添加。

1. 下一个新终端附加到指针后，右键点击**步进重复**
2. 选择**向下**作为方向，在 Pin count 框中输入**7**，在 Distance 框中输入**100**
3. 点击**确定**
4. 右键点击**取消**退出添加终端模式

**修改终端**

添加输出管脚后，使用其他终端命令修改输入管脚排列并完成 CAE 封装。输入管脚包括 15 个地址输入、3 个控制输入和 1 个额外输入管脚。其中两个控制管脚的管脚封装需要修改，必须移除额外终端。

1. 更改管脚封装按钮
2. 在 Pin 封装浏览对话框，点击 Pins 列表中的**PINB**管脚封装
3. 点击**确定**，现在处于管脚封装分配模式，您选择的终端将被分配 PINB 管脚封装
4. 选择左侧底部的两个输入终端(终端#**18**和#**19**)将管脚封装从**PIN**更改为**PINB**
5. 右键点击**取消**退出更改管脚封装模式
6. 右键点击**选择终端**，从底部选择第四个终端(终端#**16**)
7. 右键点击**删除**，终端编号从#16 开始重新编号
8. 在视图菜单点击**范围**，将完成的封装适配到视图中

**为门分配管脚编号和管脚名称**

1. 设置管脚名称按钮**。**
2. 在*终端起始名称*对话框输入**Q0**，点击**确定**
3. 选择最顶部的输出管脚(元件右侧)分配管脚名称 Q0
4. 选择 Q0 管脚下方的输出管脚分配管脚名称 Q1
5. 按顺序选择其余输出管脚，分配名称 Q2 到 Q7
6. 右键点击**取消**退出当前命名模式
7. 重复步骤 1 和 2，在 Start name 对话框输入**A0**，点击**确定**
8. 选择最顶部的输入管脚(元件左侧)分配管脚名称 A0
9. 选择 A0 管脚下方的输入管脚分配管脚名称 A1
10. 按顺序选择其余输入管脚，分配名称 A2 到 A14
11. 右键点击**取消**退出当前模式

两个剩余管脚具有逻辑非管脚名称标签(名称上方的横线)。要创建此类文本，请使用\字符。分配剩余管脚名称。

1. 右键点击**选择终端**，选择 A14 下方的输入管脚
2. 右键点击**属性**
3. 在终端属性对话框的名称框中输入**\PGM\ / \CE**，注意不要在管脚名称中使用空格
4. 点击**确定**
5. 点击空白处取消选择终端。本教程稍后将分配剩余管脚的管脚名称

要完成封装定义，以与分配管脚名称相同的方式为终端设置管脚编号。

1. 在封装编辑工具栏，点击**设置管脚编号**按钮
2. 在设置管脚编号对话框，接受默认值并点击确定
3. 按照本教程开头 87C256 图形中显示的顺序选择管脚。在分配 Q2 管脚编号后停止，继续下一步
4. 选择管脚 Q3

    > [!NOTE]
    >
    >  选择管脚 Q3 后，它被分配为 14 号管脚。14 号管脚先前在电气参数中被分配为 GND 的信号管脚。

5. 要将 Q3 管脚编号更改为 15，再次选择管脚**Q3**；它被分配下一个更高的管脚编号
6. 选择管脚**Q4**将其分配为**16**
7. 继续为剩余管脚分配管脚编号

如果分配了错误的管脚编号，再次点击设置管脚编号按钮，输入新编号并点击终端。

**命名 CAE 封装和元件类型**

1. 文件菜单 > 返回元件
2. 点击**是**保留门更改
3. 在文件菜单点击**另存为**
4. 在保存元件和门封装对话框中，双击元件名称框，输入**87C256**
5. 在门封装名称框中，双击 CAE 封装 1 列下的**NEW\_PART**，输入**87C256**
6. 将库切换为**\Libraries\preview**
7. 点击**确定**。如果 CAE 封装已存在，确认覆盖
8. 点击**确定**确认没有分配 PCB 封装的警告。如果元件类型已存在，确认覆盖

## 为 CAE 封装创建元件类型
现在您将为 87C256 元件类型添加电气属性并分配 PCB 封装。

**分配系列类型**

创建元件类型的第一步是为元件分配系列类型。

1. 编辑电气按钮 > 常规选项卡
2. 在逻辑系列列表中，切换为**TTL**将其分配为元件类型的系列类型。这仅分配默认参考标识符前缀 U

> [!warning] 管脚计数仅显示 26 个管脚。

**分配 PCB 封装**

创建元件类型的下一步是分配 87C256 CAE 封装并分配 28 管脚 PCB 封装。

1. PCB 封装选项卡
2. 在库列表中，切换为**\Libraries\common**库
3. 在筛选框中输入**so\***，在管脚计数框中输入**28**，点击**应用**
4. 点击**SO28** PCB 封装，点击**分配**将 PCB 封装分配为元件类型的第一个(也是唯一一个)PCB 封装。这也增加了 87C256 元件类型的管脚计数

**更新管脚设置**

1. 管脚选项卡
2. 检查门 A，元件类型的第一个(也是唯一一个)门
3. 向下滚动管脚列表到序列号 17 和 18。这些应该是管脚 22 和 1
4. 对于**序列 17**(管脚 22)，双击名称框，输入**\OE**。按**Enter**
5. 对于**序列 18**(管脚 1)，双击名称框，输入**VPP**。按**Enter**

> [!TIP]
>
>  如果要在 `SailWind Layout` 中使用管脚交换、终端分配和拓扑工具，必须设置门的交换(管脚交换)和类型(管脚类型)值。本练习可以保留原样。

**分配信号管脚**

接下来，分配标准电源和地线管脚。这些在 SailWind Logic 中称为信号管脚。

1. 向下滚动管脚列表到底部
2. 对于管脚**14**，在管脚组列中，点击未使用管脚并更改为信号管脚
3. 对管脚**28**重复此操作
4. 双击管脚 14 的名称框，输入 **GND** 
5. 双击管脚 28 的名称框，输入 **+5V** 

**添加用户定义属性**

最后，您将添加用户定义的元件类型属性。

1. 属性选项卡
2. 点击**添加**
3. 点击**浏览库属性**
4. 在浏览库属性对话框，点击**描述**并点击**确定**
5. 按**Tab**切换到值单元格，输入**32K X 8 BIT CMOS EPROM/LATCH**
6. 点击**添加**，再次点击**浏览库属性**，重复前面的步骤添加以下属性和值：

    | 属性           | 值           |
    |----------------|--------------|
    | 成本           | (留空)       |
    | 零件号         | 87C256       |
    | 制造商#1       | SIGNETICS    |
    | 制造商#2       | (留空)       |

7. 完成所有属性添加后，点击**确定**完成电气属性分配过程并关闭元件信息对话框

**将元件类型保存到库**

1. 在文件菜单点击**保存**
2. 在文件菜单点击**退出元件编辑器**退出元件编辑器并返回原理图编辑器

**使用库管理器**

您可以从库管理器对话框中编辑库中的现有元件类型。

1. 文件菜单 > 库
2. 在库列表中，切换为\Libraries\preview 库
3. 点击**元件**按钮
4. 在元件类型列表中，点击**87C256**。注意预览窗口中的图像。它应该是与元件类型关联的 CAE 封装
5. 点击**编辑**将元件带入元件编辑器。关闭库管理器。您现在可以编辑元件类型、其 CAE 封装和电气属性
6. 在文件菜单点击**退出元件编辑器**
7. 不要保存文件副本

**您已完成创建库元件教程。**