# 交互式布线创建走线
SailWind Router 提供全面的交互式布线命令选择。

**本课内容：**

1. 交互式布线
2. 平面网络布线
3. 使用在线设计规则检查模式
4. 使用禁布区和开孔进行布线

**限制条件**

本教程需要 Dynamic Route Editing、Advanced Rules 和 General Editing 安全选项。在 SailWind Router 中，点击帮助菜单中的 **Installed Options** 以确定是否可以继续。

**准备工作**

如果尚未运行，请启动 SailWind Router 并打开 \SailWind Projects\Samples 文件夹中名为 **previewpreroute.pcb** 的文件。

## 交互式布线
交互式布线器是 SailWind Router 中的核心走线编辑功能。走线编辑器中的许多操作类似于 SailWind Layout 中的操作，例如创建多边形和线条项目。这可以让您将相同的技能应用到许多领域，从而最小化 SailWind Router 的学习曲线。

在 SailWind Router 中，所有连接通过选择连接并使用鼠标操作和键盘组合创建新的拐角和层变更来转换为走线。

**调整视图**

1. 在项目资源管理器中，定位 Nets 对象
2. 展开 **Net Objects** 树中的 **Nets** 分支
3. 滚动浏览 Nets 列表。点击网络 **24MHz** 以在工作区中选择（并临时高亮显示）该网络
4. 放大设计的左上角，将视图中心对准 24MHz 网络的短部分，连接振荡器和电阻
5. 通过点击工作区的空白区域取消选择 24MHz 网络

**开始布线**

1. 在未选择任何内容时，右键点击并选择 **Select Traces/Pins/Unroutes**
2. 在标准工具栏上，点击图层列表中的 **Primary Component Side** 将其设置为当前层
3. 点击连接到 24MHz 网络的振荡器焊盘
4. 右键点击并选择 **Interactive Route**。新的走线段开始附着到指针

**提示：** 此时 DRC 模式关闭。新走线段不禁止与其他对象短路。如果启用了 DRC，此时可通过输入 **DRC** 然后按 **Enter** 禁用它。

5. 移动指针并注意连接的一端如何附着到新走线段的末端，而另一端保持连接到连接的端点。这有助于您在布线时确定方向
6. 要添加拐角，请点击
7. 要删除拐角，请按 **Backspace**

在具有多个连接的网络中，连接的端点会自动捕捉到网络上最近的引脚。通过将指针移向电路板的左下角来尝试重新连接。一旦走线段的端点更接近 U7，它就会从当前端点分离并捕捉到 U7。将指针移向左上方，走线段会重新捕捉回来。此功能让您在布线时动态重新连接走线，无需手动重新排序连接。

**提示：** 在本练习的任何时候，您都可以通过按 Esc 退出布线命令操作。您也可以点击 **Undo** 按钮撤销任何操作。

**更改布线角度模式**

新线段被限制为从走线段原点开始的 90 度增量，因为当前走线角度模式为正交。您可以通过点击快捷菜单上的命令在布线期间更改走线角度模式。

当走线附着到指针时，右键点击，指向 **Routing Angle**，然后点击 **Diagonal**。更改角度模式后，移动指针。注意新线段现在如何被限制为 45 度增量。

**添加过孔和更改层**

更改层与添加拐角的方式相同，只是在点击时按 Shift。您可以在当前指针位置或布线时的最后一个拐角位置启动层变更。

**在当前指针位置启动层变更：**

当新走线段附着到指针时，在要更改层的位置使用 **Shift+点击**。在点击位置添加一个新过孔。布线层对的第二层现在是当前层。

**替代方法：** 当新走线段附着到指针时，点击添加拐角。右键点击，指向 Layers，然后从列表中选择一个层。如果不先添加拐角，附着到指针的走线段将更改层而不是添加过孔和更改层。

**在最后一个拐角位置启动层变更：**

1. 点击添加新拐角
2. 将指针从新拐角移开，右键点击并点击 **Layer Toggle**。在最后添加的拐角处添加一个过孔

**提示：** 如果启用了 DRC，当最后一个走线拐角位于元件焊盘内时，不会添加过孔。

**更改过孔类型**

如果在设计中定义了多个过孔类型，您可以在布线期间更改过孔类型。当您开始布线网络时，SailWind Router 将使用默认过孔类型进行布线。要在布线特定网络时使用不同的过孔类型，使用快捷菜单上的 **Via Type** 选项选择另一个过孔类型。

**更改走线宽度**

新走线段以网络指定的默认推荐走线宽度布线。如果为网络指定了不同的最小值和/或最大值，您可以通过点击快捷菜单上的命令在布线期间更改走线宽度。

1. 当走线附着到指针时，右键点击，指向 **Width**，然后从列表中选择新宽度。选项包括为网络指定的最小、推荐和最大宽度值
2. 如果所需宽度值不在列表中，点击 **Set** 并输入介于网络指定的最小值和最大值之间的值。走线宽度将更改为该值，并且这个新值将被添加到列表中

更改走线宽度后，移动指针。注意新线段现在如何以新指定的宽度添加。

**结束与完成走线**

在 SailWind Router 中，您可以选择以几乎与添加拐角和添加过孔相同的方式部分完成或结束走线。

要结束走线，在想要走线结束的位置按 Ctrl+点击。

**完成走线**

您可以通过两种方式完成走线。使用 Complete 命令或将走线段的末端定位在其目标上并点击鼠标左键。

![](/router/tutrial/5/_page_2_Figure_14.jpeg)

**另请参阅：** *SailWind Router 帮助* 中的"结束走线"

**不使用 Complete 命令本地完成走线**

当走线段附着到指针时，从其起点到终点定义走线模式，并在完成符号出现时点击鼠标左键。新走线完成，在许多情况下不需要平滑或清理走线。

**使用 Complete 命令远程完成走线**

当新走线段附着到指针时，右键点击并点击 **Complete**。您也可以双击鼠标左键完成走线。新走线从其起点到目的地完成。

练习将 24MHz 网络的短连接布线至完成。

**提示：** 在本练习的任何时候，您都可以通过按 Esc 退出布线命令操作。您也可以点击标准工具栏上的 Undo 按钮撤销任何操作。

**在交互式布线操作期间添加带圆弧的走线**

1. 通过选择未布线部分并按 **F3** 开始交互式布线
2. 当新走线段附着到指针时，右键点击，指向 **Arc**，然后点击 **Add Arc**

**替代方法：按 Alt+A**

3. 点击要结束圆弧的点。SailWind Router 返回到正常的交互式布线模式，允许您完成走线布线

**提示：** 如果要指定圆弧的确切半径，通过输入 RAD 并输入要使用的半径来设置半径。然后在交互式布线时，右键点击，指向 Arc，然后点击 Add Arc of Radius。

**删除走线和走线段**

1. 在未选择任何内容时，右键点击并点击 **Select Anything**
2. 点击已完成走线的一个线段并按 **Backspace**
3. 点击标准工具栏上的 **Undo** 按钮撤销删除
4. 使用 **Shift+点击** 选择整个引脚对
5. 按 **Backspace** 取消布线引脚对

**撤销/重做**

SailWind Router 允许多次撤销/重做操作。根据需要，使用标准工具栏上的 **Undo** 和 **Redo** 按钮删除或重做命令操作。

**删除所有布线**

在本练习的任何时候，您可以通过选择所有网络然后按 Backspace 删除当前所有布线。

1. 在未选择任何内容时，右键点击并点击 **Select Nets**
2. 右键点击并点击 **Select All** 选择所有网络
3. 按 **Backspace**

## 平面网络布线
对于具有嵌入式平面和表面安装部件的典型 PCB，平面网络布线仅限于从焊盘布出一小段并用过孔终止以提供与内部平面的接触。

在开始平面网络布线之前，您需要更新平面网络的可见性。

**更新网络可见性**

**视图菜单 > Nets**

在本教程的布局阶段，禁用了某些平面网络的显示，以便在布局期间清晰地查看组件。

在可以布线平面网络之前，您需要启用这些网络的显示。

1. 在视图详细信息区域，选择网络 **GND**
2. 在视图详细信息区域，选择相应的 **Traces** 复选框以显示此网络
3. 选择 **All except connected to plane** 以将网络的显示限制为仅网络的布线部分
4. 在视图详细信息区域，使用 Ctrl+点击选择 **Default**、**+5V** 和 **+12V** 网络
5. 在视图详细信息区域，清除相应的 **Traces** 复选框以禁用这些网络的显示
6. 点击 **OK** 应用更改并关闭 View Nets 对话框

**结束过孔模式**

为避免使用层变更和结束命令来建立每个平面连接，您可以设置一个始终以过孔结束布线的结束模式。三种结束模式为：

| 结束模式       | 描述                                                |
|----------------|----------------------------------------------------|
| End No Via     | 走线在走线端点处<br>没有过孔结束 |
| End Via        | 走线在走线端点处<br>有过孔结束 |
| End Test Point | 与 End Via 相同，但过孔也是测试点 |

**更改结束过孔模式：**

1. 开始交互式布线，当走线段附着到指针时，右键点击，指向 **End Via Mode**，然后点击 **End Via**。勾选标记指示当前模式
2. 为过孔找到一个方便的位置并按 Ctrl+点击创建到平面的引脚逃逸

## 平面网络布线
使用上一练习中的布线命令，尝试使用 Ctrl+点击结束布线来布线 GND 网络。注意每次结束 GND 网络的一部分时平面热指示器（过孔上的 X）的存在。这表明符合热释放条件；它将与平面接触。

## 使用在线设计规则检查模式进行布线
您可以在布局和布线期间启用实时设计规则检查，以确保在整个设计过程中保持设计约束。这种交互式检查称为在线 DRC。您可以通过 DRC Settings 对话框、DRC Filter Toolbar 或使用快捷键设置 DRC 模式。

| DRC 模式    | 描述                                                                                                                                                                                                                   |
|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| DRC Off     | 指定不检查。允许在布局和<br>布线期间违反规则。也允许<br>间距违规和走线的交叉。                                                                                               |
| DRC Prevent | 防止您在布局、布线或<br>走线修改期间创建违规。                                                                                                                                    |
| DRC Explain | 检测潜在错误，暂时暂停操作以便您<br>在 Spreadsheet 窗口中检查错误条件。然后您可以<br>继续操作并接受违规或取消当前<br>操作。 |
| DRC Warn    | 在布局或布线期间生成错误消息并让<br>您继续。                                                                                                                                                |

**有四种 DRC 操作模式：**

**更新网络可见性**

**视图菜单 > Nets**

在可以尝试在线 DRC 之前，您需要更新一些网络的显示。

1. 在视图详细信息区域，选择 **Default**、**+5V** 和 **+12V** 网络
2. 在视图详细信息区域，在 **Traces** 列中选择相应的复选框以启用这些网络的显示
3. 点击 **All except connected plane nets** 以将网络的显示限制为仅网络的布线部分
4. 点击 **OK** 应用更改并关闭 View Nets 对话框

**在 DRC Prevent 模式下尝试布线**

**DRC Filter 工具栏按钮 > DRC Settings 按钮**

**为 Clearance 检查启用 DRC Prevent 模式：**

1. 在 Design Rule Checking 对话框中，为 **Clearance** 选择 **Enable** 列中的复选框，然后在 **Error Response** 列表中选择 **Prevent**
2. 关闭 Design Rule Checking 对话框
3. 继续布线。注意不允许违规

您还应该通过在各个完成点双击完成走线来尝试在 DRC Prevent 模式下使用 Complete 命令。

**提示：** 在 DRC Explain 模式下布线会在指针处创建一个工具提示解释违规。要启用 DRC Explain 模式，在 Design Rule Checking 对话框中，在 Error Response 列表中选择 Explain。

## 动态布线
强大的动态布线功能在 SailWind Router 中提供了前所未有的交互式布线控制水平。

动态布线是另一个强大的交互式布线功能。您不需要指示每个走线拐角，只需开始布线并朝希望走线流动的方向移动指针。走线拐角在您移动指针时动态添加。

**启用动态**

**Options 按钮 > Routing/General 选项卡**

可以根据当前布线会话的需要启用和禁用动态。

1. 在 Interactive routing 区域，选择 **Dynamically route** 复选框
2. 点击 **OK** 激活设置并关闭 Options 对话框

**使用动态创建走线**

1. 在未选择任何内容时，右键点击并点击 **Select Unroutes/Pins**
2. 通过输入 **ao** 并按 **Enter** 将角度模式设置为 Orthogonal
3. 选择靠近 U7（视图底部）的 24MHz 网络，右键点击并点击 **Interactive Route**。一条走线动态附着到指针

**替代方法：按 F3**

4. 在电路板上垂直移动指针，朝连接目的地的大致方向。注意使用动态交互式布线如何自动选择绕过障碍物的路径并创建走线模式
5. 通过移动附着走线的指针绕过障碍物来尝试动态。将指针移近连接目的地并双击。注意动态如何自动完成走线并平滑模式

**提示：** 在本练习的任何时候，您都可以通过按 Esc 退出交互式布线。您也可以点击标准工具栏上的 Undo 按钮撤销任何操作。

**提示：** 要在启用动态时备份走线，慢慢地在新建的走线模式上后退。

6. 使用本节介绍的命令尝试布线。

**在动词模式下使用动态交互式布线**

![](/router/tutrial/5/_page_7_Picture_7.jpeg)

您可以通过进入动态布线动词模式来避免不断选择 F3 或快捷菜单中的命令。

1. 使用动态交互式布线，完成几条走线
2. 通过输入 **ad** 并按 **Enter** 将走线角度更改为 diagonal。继续尝试。通过输入 **aa** 并按 **Enter** 将走线角度设置为 Any Angle 尝试相同的练习

当您熟悉使用动态交互式布线后，继续教程的下一部分。

## 使用动态重新布线
您也可以使用动态重新布线。此命令在动态布线动词模式下工作。

1. 点击任何走线段，右键点击并点击 Interactive Route。**替代方法：** 按 F3
2. 创建新的走线模式并通过点击走线或走线段上的任何其他点完成它。否则，在重新布线期间在元件引脚和过孔上完成时使用正常的走线完成命令

## 使用禁布区和开孔进行布线
示例设计包含禁布区。此外，PCB 上还添加了板开孔。启用 DRC prevent 后，在走线编辑期间不能违反这些区域。

**为禁布区设置显示颜色**

**Options 按钮 > Colors 选项卡**

禁布区可能已设置为不可见。对于以下练习，打开禁布区的显示。

1. 点击黄色并为 Primary Component Side 点击 **Keepouts**
2. 点击粉色并为 Secondary Component Side 点击 **Keepouts**
3. 点击 **OK** 应用颜色设置并关闭 Options 对话框

**过孔禁布区**

**DRC Filter 工具栏按钮 > DRC Settings 按钮**

示例设计在 J1 连接器中包含一个过孔禁布区。尝试向其添加过孔。如果它不是当前的 DRC 模式，将 DRC Clearance 检查设置为 **Prevent**。

1. 在 Design Rule Checking 对话框中，为 Clearance 选择 **Enable** 列中的复选框，并在 Error Response 列表中选择 **Prevent**
2. 关闭 Design Rule Checking 对话框
3. 搜索 J1 引脚 25 并使用 **ss** 快捷键选择它。输入 **ss**。当您输入时，Shortcut 对话框出现。按 **Spacebar**，输入 **j1.25**，然后按 **Enter**。视图可能会根据您当前的缩放级别和当前视图中心而变化
4. 点击到 J1.25 的连接并使用 Route 命令（**F3**）开始布线连接
5. 将指针向左移动并按 **Shift+点击** 在 J1 的禁布区轮廓内添加过孔。注意插入过孔失败
6. 现在将走线移离禁布区轮廓并再次尝试插入过孔。注意过孔在禁布区外如何被允许

**布线禁布区和板开孔**

示例设计包含布线禁布区和板开孔以适应 PCB 底部的屏蔽。尝试在禁布区上添加走线并在 PCB 底部的禁布区区域下添加走线。如果它不是当前的 DRC 模式，将 DRC Clearance 检查设置为 **Prevent**。

1. 搜索 U4 引脚 9 并使用 **ss** 快捷键选择它。输入 **ss**。当您输入时，Shortcut 对话框出现。按 **Spacebar**，输入 **u4.9**，然后按 **Enter**。视图可能会根据您当前的缩放级别和当前视图中心而变化
2. 点击到 **U4 引脚 9** 的连接并使用 Route 命令（**F3**）开始布线连接
3. 将指针向右移动并尝试穿过板开孔
4. 当新走线附着到指针时，创建绕过开孔顶部的走线模式

5. 添加过孔，继续布线，并尝试在开孔右侧的禁布区添加走线。再次，您被阻止。

**我应该布线整个板吗？**

完成设计的布线是可选的。这是一个很好的练习，但教程的其他部分向您展示了帮助您布线设计的其他工具。

不要保存设计的副本。

**您已完成交互式添加走线教程。**