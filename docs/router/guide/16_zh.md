# 第16章 布线设置

在开始布线设计前，一个重要步骤是优化拓扑结构和网络分布，并设置布线限制。同样重要的是定义如何在设计中添加扇出和测试点。

[布线设置](#page-1-0)

## 布线设置

SailWind Router 提供了广泛的设置选项和约束条件，可配置您的设计以获得出色的布线结果。

[执行长度最小化](#page-1-1) [重新调度网络](#page-1-2) [分割/混合平面层设置](#page-2-0) [在分割/混合层上布线](#page-5-0) [带层限制的布线](#page-6-0) [带元件层限制的布线](#page-6-1) [在被指定为分割/混合平面的受限元件层上布线](#page-7-0) 使用[高级](#page-7-1)过孔[处理](#page-8-0)扇出和部分过孔 设置和调整长度[约束](#page-9-0)选项

### 执行长度最小化

*长度最小化*会检查设计并评估网络的当前拓扑设置。SailWind Router 使用这些设置重新排序网络，以在连接点之间建立最短长度。

**操作步骤**

1. 点击 **工具 > 长度最小化** 菜单项。

2. 长度最小化将使用默认拓扑类型或在属性对话框 **拓扑** 选项卡中设置的拓扑类型运行。

**相关主题**

属性对话框，拓扑选项卡

### 重新调度网络

网络重新调度允许您在不使用 SailWind Layout ECO 操作的情况下更改未布线部分的分布。您可以将未布线部分的一端从当前源引脚或虚拟引脚移动到另一个引脚。即使网络拓扑在 **设计属性** 或 **网络属性** 对话框的 **拓扑** 选项卡中被指定为"受保护"类型，您也可以重新调度网络。


**注意：**

网络必须包含未布线部分才能重新调度。

**限制和约束**

您不能重新调度以下未布线部分：

- 连接到覆铜平面或T型接头的未布线部分

- 跨越子网的未布线部分

- 属于差分对的未布线部分。只有当每个对成员中都存在未布线部分时，才能重新调度差分对

**操作步骤**

1. 选择未布线部分，然后**右键**单击并选择 **重新调度** 弹出菜单项。
   
   工作区中除未布线部分、引脚、虚拟引脚和作为有效重新调度端点的受保护过孔外，其他内容都会变暗。

2. 指向要重新连接未布线部分的引脚。如果引脚或受保护过孔属于所选未布线部分的子网，并且连接保持网络完整性，则可以重新连接到它们。

   当找到有效连接点时，指针图形会变为带有十字线的双圆圈。此外，还会出现一个工具提示，告知您该引脚是否可用于连接 - 如果不可用，则会说明原因。

3. 单击完成重新调度。

4. 完成重新调度后，网络会自动切换到受保护拓扑类型（在 **网络属性** 对话框的 **拓扑** 选项卡中）。

**提示**

当您重新调度差分对中的未布线部分时，会在该对的另一个成员中执行并行重新调度。您可以单击标准工具栏上的 **撤销** 来撤销此并行重新调度。

### 分割/混合平面层设置

SailWind Router 仅在分割/混合平面层上有未被平面区域覆盖的开放区域时才会在该层上布线。

**场景1**

分配给该层的所有网络都有一个平面区域多边形。该层上有可用于布线的开放空间。

![](/router/guide/16/_page_3_Figure_1.jpeg)

**场景2**

分配给该层的网络没有平面区域多边形。*该层上没有可用于布线的开放空间*。整个层都保留给平面区域。在这种情况下，预布线分析会在输出窗口中发布以下警告："分割/混合层 <命名层> 已自动创建平面区域。SailWind Router 将仅在这些层上布线已分配的网络。要解决此问题，请使用 SailWind Layout 定义平面区域多边形。"

**场景3**

分配给该层的一些（但不是全部）网络有平面区域多边形。*该层上没有可用于布线的开放空间*。没有平面区域多边形的空间被保留给分配给该层但尚未有多边形的网络的平面区域多边形。在这种情况下，预布线分析会在输出窗口中发布以下警告："分割/混合层 <命名层> 已自动创建平面区域。SailWind Router 将仅在这些层上布线已分配的网络。要解决此问题，请使用 SailWind Layout 定义平面区域多边形。"

![](/router/guide/16/_page_4_Figure_1.jpeg)

**注意：**

带有多边形的网络会布线到平面区域。没有多边形的网络会布线到平面*层*，就像整个层是一个共享的平面区域一样。因此，来自没有多边形的网络的引脚可以扇出到为另一个网络定义的平面区域多边形内的一个点。虽然网络不会短路，因为 SailWind Layout 中的平面处理会防止这种情况发生，但这种扇出可能会导致孤立的热焊盘。

**场景4**

网络被分配到分割/混合平面层并且该层上存在多边形，但该层已在 SailWind Layout 中暂时从分割/混合层更改为布线层。整个层都可用于布线。有关说明和提示，请参见["在分割/混合层上布线"第256页](#page-5-0)。

![](/router/guide/16/_page_4_Figure_6.jpeg)

### 在分割/混合层上布线

分割/混合层上的平面区域形成了布线障碍；因此，您必须采取某些步骤以允许在分割/混合层上布线。

**限制和约束**

- 平面区域多边形是布线障碍。分配给该层但没有多边形的网络会将整个层标记为一个多边形。更多信息请参见["分割/混合平面层设置"](#page-2-0)[第253页](#page-2-0)。

- 当您将元件层定义为分割/混合平面层时，该层将用于连接SMD引脚、通孔引脚或过孔。

**操作步骤**

1. 在 **设计属性** 的 **层** 和 **层偏置** 选项卡中，启用层进行布线。

2. 要允许在分割/混合平面层上布线，您必须执行以下操作之一：

   - a. 为分配给该层的所有网络创建平面区域多边形，在该层上留下开放空间用于布线，或为您希望允许布线的区域创建平面区域切口。

   - b. 在 SailWind Layout 的层设置对话框中暂时将该层设置为无平面层：

     i. 在标准工具栏上，单击 **Layout** 按钮以在 SailWind Layout 中打开设计。

     ii. 选择 **设置 > 层定义** 菜单项。

     iii. 选择分割/混合层并单击 **分配网络** 按钮。

     iv. 由于分配的网络将丢失，记录分配给该层的网络名称，然后关闭平面层网络对话框。多边形形状不会丢失其网络分配。

     v. 在平面类型区域中，单击无平面并单击 **确定**。

     vi. 在标准工具栏上单击 **Route** 按钮以在 SailWind Router 中打开设计。

3. 按要求布线设计。如果自动布线，将分割/混合层的成本设置为较高值可能有助于在其他层可能时优先布线。您可以在 **设计属性** 的 **层** 选项卡中设置成本值。

4. 如果您按照上述说明将层类型更改为无平面层，请反转该过程：

   a. 在 SailWind Layout 中打开设计以将该层设置为分割/混合层。

   b. 将网络重新分配给该层。平面区域多边形边框会自动重新继承正确的网络名称分配。

### 带层限制的布线

布线受限层是您禁用布线的任何电气（但非CAM）平面层。这包括指定为分割/混合平面的元件安装层。

您可以通过两种方式定义带层限制的布线：

- 定义层偏置设计规则。当此规则被指定为默认布线规则时，它会限制您可以在其上为网络、网络类、组、引脚对或所有网络对象布线走线的层。

- 在 **设计属性** 对话框的 **层** 选项卡中限制电气层。

通常，您会限制层或偏置网络对象以避免在特定层上布线走线。例如，您可能希望禁用板的外层并主要在内部层上布线走线以减少串扰的发生。您可以分配层偏置规则以达到相同的结果，但这将应用限制到对象而不是限制设计中特定层的所有布线。

**相关主题 设置层偏置规则**

设置层规则

### 带元件层限制的布线

您可以设置设计以施加控制哪些层允许布线的层限制。

下图显示了此布线程序在没有层限制时如何布线仅包含SMD引脚的网络，以及当您施加层限制时如何布线相同的网络。

**图52. 可能的布线模式**

![](/router/guide/16/_page_6_Figure_13.jpeg)

![](/router/guide/16/_page_6_Figure_14.jpeg)

当您施加排除元件层布线的层限制时，元件层上的布线并不会完全消除。如果限制被字面遵守，受限元件层上的SMD引脚可能保持未连接状态。因此，对元件层的限制被视为软规则以允许布线到SMD引脚。

### 在被指定为分割/混合平面的受限元件层上布线

如果您选择限制在被指定为分割/混合平面的元件层上布线，分割/混合平面区域多边形将被视为障碍。但是，程序会在元件层的分割/混合平面区域多边形内布线以允许连接到SMD引脚。

下图说明了这一原则：

![](/router/guide/16/_page_7_Figure_4.jpeg)

**图53. 有可用布线空间的分割/混合平面**

### 使用高级过孔

为了支持高级过孔设计，SailWind Router 在分割/混合平面层的分割平面区域内布线。SailWind Router 限制走线长度，并且仅在存在盲孔或埋孔配置时布线。短走线会自动在部分过孔之间布线以完成带有分割/混合平面上部分过孔的网络布线。

使用高级过孔时：

- SailWind Router 不允许CAM平面布线层用于自动布线或交互式布线操作。

- 只有当这些过孔开始或结束于分割/混合平面时，您才能使用分配的过孔进行布线，但这不能保证连接过孔的走线将是最短的可能。其他一些布线操作可能会调整平面走线，导致长度增加。

[图54](#page-8-1) 显示了一个三层设计的示例，其中有一个内部分割/混合平面层。该设计只有两个盲孔，分别连接第1层到第2层和第2层到第3层。左侧图形显示了不使用部分过孔的布线结果，右侧图形显示了使用部分过孔的布线结果。为了获得最佳结果，布线器在分割/混合平面层上放置了一条走线。

![](/router/guide/16/_page_8_Figure_1.jpeg)

**图54. 带有分割/混合平面层的三层设计**

### 处理扇出和部分过孔

当您在扇出操作中使用通孔时，SailWind Router 表现良好。您可以使用单个通孔扇出SMD引脚，以在所有层上提供对SMD的访问。

然而，对于部分过孔，SailWind Router 不会产生适当的扇出。单个过孔不足以与部分过孔一起使用，因为只添加了一个过孔，仅跨越有限数量的层。为了解决扇出操作访问受限的问题，扇出自动布线过程会添加更多过孔以启用对所有层（除对立层外）的访问。

例如，如果平面位于六层设计的第二层上，SailWind Router 会添加部分过孔以将引脚连接到第二层，并将第二层连接到除最后一层外的所有其他层。

![](/router/guide/16/_page_8_Figure_7.jpeg)

![](/router/guide/16/_page_8_Figure_8.jpeg)

**提示**

分配给内部平面层的任何网络都会与部分过孔分散，这不会添加足够的过孔来连接到平面层。

### 设置和调整长度约束选项

SailWind Router 提供了复杂的长度调整选项，允许您为单个网络以及类、组和差分对创建长度约束。

[设置布线到长度约束](#page-9-1) 设置[差分](#page-10-0)对 调整选项

#### 设置布线到长度约束

使用布线到长度约束来调整长度受控走线的长度。SailWind Router 根据您在选项对话框的 **布线** 类别 > **调整** 子类别中设置的约束设置，在自动布线期间自动维护网络、电气网络、类、引脚对、组和差分对的基于长度的设计规则。软件会根据它们对最小和最大走线长度规则的符合性，在调整过程中调整或拆除走线。如有必要，SailWind Router 会通过向走线引入蛇形走线模式（在调整过程中）增加网络和引脚对长度以满足长度规则。


**提示** 您可以在类、网络、电气网络、引脚对、差分对和匹配长度属性对话框中设置长度规则。

**操作步骤**

1. 单击 **设置 > 选项** 菜单项；然后，在选项对话框中，单击 **布线** 类别 > **调整** 子类别。

2. 在最小振幅框中，键入一个数字以指定 SailWind Router 使用的任何蛇形走线模式的最小高度或宽度。

3. 在最大振幅框中，键入一个数字以指定 SailWind Router 使用的任何蛇形走线模式的最大高度或宽度。

4. 在最小间隙框中，键入一个数字以定义蛇形走线之间的距离。

5. 在最大层次级别框中，键入一个数字以指定 SailWind Router 用于创建蛇形走线的步骤数。更多信息，请参见"调整过程中的最大层次级别"第272页

6. 在斜接比率框中，键入一个数字以指定蛇形走线角的斜接比率。

7. 要在蛇形走线中使用弧线而不是对角线段，请单击"在斜接中使用弧线"。

8. 要确定在匹配长度组容差要求之上添加多少额外长度（以容差的百分比表示），请在"匹配长度组容差要求之上添加的额外长度"框中键入一个数字。

   **提示**

   示例：如果键入0，调整后的网络长度将为<领导者长度 - 容差>。如果键入100，网络将获得与组领导者相同的长度。领导者网络是匹配长度组中长度最长的网络。

9. 如果需要完成违反长度规则的走线，请单击"在需要完成走线时忽略长度规则"。

10. 单击 **确定**。

**相关主题**

向走线添加长度

#### 设置差分对调整选项

使用选项对话框的 **布线** 类别 > **调整** 子类别中的差分对区域来控制调整布线长度时差分对蛇形走线的使用。

**操作步骤**

1. 单击 **设置 > 选项** 菜单项；然后在选项对话框中，单击 **布线** 类别 > **调整** 子类别。

2. 要使用蛇形走线使差分对长度相同，请选择"调整时添加差分对校正蛇形走线"复选框。

3. 如果不允许在间隙部分两条走线一起的地方进行校正蛇形走线，请选择"不在间隙部分创建校正蛇形走线"复选框。

4. 如果希望限制软件仅在长度差异大于匹配长度时创建差分对蛇形走线，请选择"仅当长度差异大于匹配长度容差时创建校正蛇形走线"复选框。

5. 单击 **确定**。