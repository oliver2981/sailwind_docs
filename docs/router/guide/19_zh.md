# 第 19 章 手动布线

交互式创建导线以控制布线的各个方面。

## 交互式布线工作流程 ಠ_ಠ

使用交互式布线，您可以创建新导线或重新布线现有导线。导线模式跟随指针路径，连接一个点到另一个点。您还可以添加拐角、过孔和其他布线对象。

下图展示了用指针从一个点到另一个点建立连接的示例。

![](/router/guide/19/_page_0_Figure_6.jpeg)

**图 64. 交互式布线示例**

**必要设置：**

- [设置设计规则，如导线共享和元件入口（第 154 页）]()

- [设置网络拓扑（第 291 页）](#page-2-1)

- [设置布线选项，如动态、推挤、布线角度等（第 291 页）](#page-2-0)

- [选择是否保护导线（第 292 页）](#page-3-0)

- [设置显示选项用于布线（第 294 页）](#page-5-0)

- [选择是否监控导线长度（第 304 页）](#page-15-0)

交互式布线步骤：

1. [创建导线（第 304 页）](#page-15-1)

2. [结束导线（第 306 页）](#page-17-0)

添加其他布线元素：

- [添加拐角（第 318 页）](#page-29-1)

- [添加圆弧（第 321 页）](#page-32-0)

- [添加过孔（第 326 页）](#page-37-0)

- 添加测试点

- 增加导线[长度](#page-23-0)

## 交互式布线设置

阅读以下主题以了解有关设置交互式布线的更多信息。

[设置网络拓扑](#page-2-1) 

[受保护对象](#page-3-0) 

[交互式布线的显示选项](#page-5-0)

### 设置网络拓扑

您可以为网络设置不同的拓扑类型，这会影响它们在交互式布线、自动布线或编辑导线时的布线方式。拓扑类型决定了连接网络中各管脚的顺序。

如果未选择任何内容，将显示**设计特性**对话框，使您能够全局设置拓扑。如果选择了网络或网络类，将显示特定属性对话框，使您能够为所选网络设置拓扑。

🙊**限制**

- **拓扑**选项卡不会出现在管脚、过孔、电气网络、管脚对组和管脚对属性对话框中。

🏃‍♂️‍**步骤**

1. **右键**单击并选择弹出菜单中的**特性**；然后在属性对话框中，单击第 524 页的拓扑选项卡

2. 单击所需的网络拓扑类型

3. 单击要允许的连接类型

4. 在"最大支线长度"框中，输入最大值。值为 0 表示不允许支线

5. 单击**确定**

### 受保护对象

您可以在交互式布线或导线编辑时保护对象。当您保护对象时，不能推挤、取消布线、移动、重新布线或以其他方式编辑它们。您可以保护的对象包括导线段、导线、过孔和测试点。

SailWind Router 自动保护 SailWind Layout 中定义的复用对象和跳线。但它不保护组合。

在[交互式](#page-3-1)布线时保护导线和过孔 [保护现有对象](#page-3-2) [取消保护现有对象](#page-4-0)

#### 在交互式布线时保护导线和过孔

您可以在交互式布线期间保护导线和过孔，以防止例如意外编辑。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后在选项对话框中，单击**布线**类别 > **常规**子类别

2. 在交互式布线之前，选中"创建段时保护导线和过孔"复选框

   作为替代方案，在布线导线时，**右键**单击并选择弹出菜单中的**保护导线和过孔**。SailWind Router 保护当前导线段回到最后一个拐角以及任何后续导线。"保护导线和过孔"命令仅影响当前操作；它不会更改**布线**类别 > **常规**子类别中复选框的状态。

   当您在交互式布线期间启用保护时，SailWind Router 会在您创建对象时保护它们。如果您不是动态布线，SailWind Router 会在您单击添加拐角时保护导线段。如果在布线导线时插入过孔或测试点，软件也会保护它们。

   > [!tip] 选中"区分受保护的导线和过孔"框（选项对话框 > 全局类别 > 常规子类别）以不同方式显示受保护的导线、网络、过孔和测试点与未受保护的对象。例如，这可以将受保护的对象显示为边框而不是填充的导线。导线的显示在完成布线后更改，而不是在添加导线时更改。

👀‍**结果**

要关闭保护：再次**右键**单击并选择弹出菜单中的**保护导线和过孔**。

#### 保护现有对象

放置后保护导线和过孔。

🏃‍♂️‍**步骤**

1. 选择对象

2. **右键**单击并选择弹出菜单中的**保护**。或者，在布线编辑工具栏上，单击**保护**按钮

#### 取消保护现有对象

您可以移除先前受保护的导线和过孔的保护（"取消保护"）。

🙊**限制**

您不能取消保护复用成员或跳线过孔。

🏃‍♂️‍**步骤**

1. 选择对象

2. **右键**单击并选择弹出菜单中的**取消保护**。或者，在布线编辑工具栏上，单击**取消保护**按钮

### 交互式布线的显示选项

几个功能控制导线和障碍物在 SailWind Router 中的显示方式。

[动态布线](#page-5-1) [显示](#page-5-2)过孔引导 [完成点](#page-6-0) [显示障碍物周围的间距](#page-6-1) [显示受保护对象](#page-6-2) [显示飞线](#page-6-3) [高亮网络](#page-7-0)

#### 动态布线

当您布线时，导线的飞线部分会动态布线到网络中离指针最近的端点。您可以切换此功能的开关状态。

🏃‍♂️‍**步骤**

1. 在交互式布线时，**右键**单击并选择弹出菜单中的**动态布线**

2. 重复此过程可将功能切换到相反状态

👀‍**结果**

- 差分对不会动态布线。但是，如果您分别布线差分对，则单个导线会根据网络顺序动态布线

- 具有保护和高速拓扑类型的网络会动态布线以保持指定的布线顺序

- 飞线不会动态布线以允许特定连接的布线

#### 显示过孔引导

您可以在指针处显示过孔引导以帮助放置过孔。当过孔栅格与布线栅格不同时，会出现过孔引导，向您显示过孔最接近的可用位置。此外，如果您捕捉到过孔栅格，会出现一个小矩阵显示其他有效的栅格点。

您可以切换过孔引导的开关状态。

🙊**限制**

如果过孔栅格设置为 0，则不会显示过孔引导。

🏃‍♂️‍**步骤**

键入"VG"并按 Enter 键。这会切换过孔引导的状态。

#### 完成点

出现在指针处的图形会自动更改以指示完成点。当指针接近有效的完成点时，指针会变为靶心。此外，当指针接近完成对象时，对象的边框会闪烁。

您不能打开或关闭此选项。

#### 显示障碍物周围的间距

您可以图形化查看障碍物周围的最小间距。称为*保护带*的透明边框围绕障碍物到正在布线或编辑的对象。保护带显示您必须在对象之间保持的最小距离。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后在选项对话框中，单击**全局**类别 > **常规**子类别

2. 选中"显示对象保护带"复选框


#### 显示受保护对象

您可以选择以不同于未受保护对象的方式显示受保护的元件、导线、过孔和测试点。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后在选项对话框中，单击**全局**类别 > **常规**子类别

2. 选中"区分受保护的导线和过孔"复选框。或者，使用"I"快捷键

👀‍**结果**

如果导线显示为填充对象，受保护的导线仅显示为边框。

#### 显示飞线

您可以选择以默认导线宽度显示飞线。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后在选项对话框中，单击**全局**类别 > **常规**子类别

2. 选中"以推荐宽度显示飞线"复选框。否则飞线显示为细连接线

   3. 单击**确定**

👀‍**结果**

- 您可以使用**U**快捷键打开和关闭飞线可见性。此快捷键不会影响选定或高亮飞线的可见性

- 您可以通过将"连接"颜色与"背景"颜色匹配来隐藏飞线，使用选项对话框的颜色页面

- 您可以使用查看网络对话框设置飞线可见性，可以全局设置整个设计，也可以单独设置选定的飞线

#### 高亮网络

您可以高亮网络以使它们在设计中更易于查看。您可以使用高亮选项更改查看网络的方式。如果需要，您还可以选择仅查看正在布线的导线或网络。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后在选项对话框中，单击全局类别 > 常规子类别

2. 在高亮对象显示区域（第 441 页），在"通过以下方式区分高亮对象"列表中，选择"暗显其他对象颜色"。您也可以使用 H快捷键更改此设置。更多信息，请参阅视图控制

3. 单击**确定**

4. 选择要高亮的网络

5. 单击**编辑 > 高亮**菜单项。您也可以在查看网络对话框中使用高亮列。您还可以使用**H**快捷键与网络名称一起打开和关闭网络的高亮

## 设计规则检查与交互式布线 ಠ_ಠ

打开设计规则检查并将其设置为"防止"，以避免在交互式布线、布线编辑和放置编辑操作期间违反设计规则。

当您启用间距检查并将其设置为"防止"时，通常不能在移动指针时创建违规，因为您不能以违反设计规则的方式创建或编辑布线对象。例如，如果您尝试在两个管脚之间布线导线，并且导线没有足够的间距，导线会在到达管脚的间距边界之前停止。在管脚附近单击会在遇到障碍物之前的最后一个有效点添加拐角。因为导线没有违反间距边界，所以不会发生违规。但是，在交互式布线时放置过孔可能会创建违规。如果放置过孔创建了违规，操作会取消而不放置过孔。

SailWind Router 还可以防止您在一个属性对话框或电子表格窗口中编辑对象属性时可能无意中创建的违规。例如，如果您选择导线段并将其宽度更改为由于间距违规而不适合的值，SailWind Router 会阻止更改。

**导线共享规则**

导线共享规则限制过孔和导线的共享。当共享受限时，您可能无法将两条以上的导线布线到单个过孔。在**设计特性**对话框的**拓扑**选项卡的"允许连接"区域中设置导线共享规则。

您可以共享安装在外部层（布线受限）上的 SMD 管脚，共享一个否则无法共享的管脚。为了在受限层上提供对管脚的访问，创建一个短导线以过孔结束的扇出。将 SMD 管脚连接到过孔的导线成为子网。子网在过孔处连接到网络的其他部分，而不与网络的任何其他部分共享段。这种扇出称为*复合扇出*。

![](/router/guide/19/_page_8_Figure_10.jpeg)

**导线宽度和元件规则**

SailWind Router 在从管脚或过孔开始时使用推荐的导线宽度。当从导线段、导线拐角或端点布线时，软件使用所选导线的当前宽度。当此大小不能使用时（例如由于间距），SailWind Router 改用推荐的导线宽度。如果推荐的导线宽度仍然太大，SailWind Router 尝试使用焊盘宽度，最后是最小导线宽度。这仅在您选中选项对话框**布线**选项卡上的"允许在焊盘处导线缩颈"复选框时发生。

SailWind Router 在布线时也使用元件规则。元件规则之一指定每个元件的导线宽度。当同时定义了元件规则和导线宽度规则时，软件使用元件规则集中的宽度规则。

当您退出具有唯一导线宽度规则的元件管脚时，将应用元件宽度规则。

在设计属性、网络属性、管脚对属性或元件属性对话框的**布线**选项卡上设置最大、推荐和最小导线宽度。

**同网络规则和拐角**

同网络拐角规则决定了在布线导线时，您可以将第一个拐角放置在离焊盘边缘多远的地方。这些规则也代表了同一网络中导线之间的最小距离。除非启用软规则，否则不能在离元件管脚、过孔焊盘或铜边界边缘太近的地方添加拐角。

在**设计特性**对话框的**同网络**选项卡上设置同网络规则。使用设计属性或元件属性对话框的**焊盘入口**选项卡中的"必要时忽略第一个拐角规则以完成导线"复选框设置第一个拐角规则是硬规则还是软规则。

**焊盘入口规则和动态交互式布线**

当使用动态交互式布线时，任何从焊盘或布铜区退出的导线都会遵守焊盘入口规则。如果清除"动态布线"复选框，导线不会自动保持焊盘入口规则。

焊盘入口规则定义了导线如何进入和退出元件焊盘，并管理焊盘和导线连接处的导线模式质量。SailWind Router 为所有布线角度和焊盘方向保持焊盘入口规则。

在选定元件的属性对话框的**焊盘入口**选项卡上设置焊盘入口规则。

**拓扑规则**

当布线具有保护拓扑类型的网络时，SailWind Router 禁用动态布线功能以保持网络顺序。您只能按照管脚对定义的顺序连接网络；但是，您可以在分支的任何点连接。例如，您可以连接到连接到目标连接管脚的任何导线或过孔。如果您正在布线高速网络，您可以单击重新连接到最终目的地。

更多信息，请参阅设置网络[拓扑](#page-2-1)。

**编辑导线和同网络间距规则**

同网络规则在您完成编辑操作后验证。对于同网络焊盘到拐角规则，仅保持导线退出焊盘后的第一个拐角。不保持同网络导线到拐角规则。

## 交互式布线

交互式布线功能允许您手动布线，可以通过点击并移动指针绘制导线路径，或自动跟随指针绘制的路径。

有关在交互式布线中使用设计规则的信息，请参阅[设计规则检查与交互式](#page-8-0) [布线](#page-8-0)。

导线 [推挤](#page-10-1) [交互式](#page-12-0) 带长度监控的布线 [监控](#page-15-0) 导线长度 [创建](#page-15-1) 导线 [结束](#page-17-0) 导线

### 导线推挤 ಠ_ಠ

当您布线新导线时，推挤器会自动移动现有导线和过孔。

推挤导线时请注意以下限制：

- 不能推挤设置为受保护测试点的过孔

- 不能推挤复用对象

- 启用推挤器时，布线器会尝试推挤对象。要允许推挤网络，请选中"必要时推挤导线以完成连接"复选框（设计属性、管脚对属性或网络属性对话框的**布线**选项卡）

- 要允许推挤受保护对象，请选中"必要时推挤受保护导线"复选框（设计属性、管脚对属性或网络属性对话框的**布线**选项卡）

- SailWind 布线器不会将圆弧作为圆弧推挤，而是会中断圆弧并添加导线段以适应正在进行的导线

![](/router/guide/19/_page_10_Figure_13.jpeg)

**图 66. 推挤前后的导线**

如果被推挤的导线遇到不可移动的障碍物（如受保护的过孔），被推挤的导线会"跳过"该障碍物。SailWind 布线器在导线跳过对象时保持间距规则。

更多信息，请参阅["交互式布线设置](#page-2-0)"。

![](/router/guide/19/_page_11_Figure_1.jpeg)

![](/router/guide/19/_page_11_Figure_2.jpeg)

**图 68. 推挤导线为新导线腾出空间**

![](/router/guide/19/_page_11_Figure_4.jpeg)

**推挤器类型**

下表显示了可用的推挤器类型。

**表 78. 推挤器类型**

| 推挤器类型       | 操作                                                                                                                                                                                                                                      |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 指针推挤 | 当指针靠近障碍物时推挤它们。此功能在使用动态布线时效果最佳。                                                                                                                              |
|                   | 指针推挤有两种模式：• 实时推挤 - 指针经过障碍物时立即推挤• 引导推挤 - 在您用指针定义潜在路径并到达开放区域后推挤障碍物 |

| 推挤器类型             | 操作                                                                                                                                                                                                                                                                                       |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 拐角点击后推挤 | 仅在您点击输入拐角后推挤障碍物。如果没有移动障碍物的空间，则无法输入拐角。视觉上，结束导线模式与指针移动推挤相同。提示此功能在不使用动态布线时效果最佳。 |

### 带长度监控的交互式布线 ಠ_ಠ

当您交互式布线时，已布线长度和估计总长度会显示在指针附近。显示已布线和估计长度的功能称为*导线长度监控器*。

**图 69. 已布线长度和估计总长度**

**带长度规则的布线导线**

当布线带有长度规则的导线时，导线长度监控器会显示网络、电气网络或管脚对的已布线长度、最小长度规则和最大长度规则。还会显示进度指示条，如[图 70](#page-12-1)所示。

**图 70. 带长度规则的布线导线**

![](/router/guide/19/_page_12_Figure_10.jpeg)

**长度计算**

导线长度监控器将估计长度计算为正在布线的导线的已布线和飞线长度的总和，并包括已分配离散长度的每个连接管脚的一半离散长度值。

![](/router/guide/19/_page_12_Figure_13.jpeg)

**已布线长度**

导线长度监控器将已布线长度计算为导线的累计长度。它包括已分配离散长度的每个连接管脚的一半离散长度值。如果从部分布线的导线的终点开始布线，则已布线长度包括部分布线的导线长度。如果导线有分支，则导线长度监控器从分支点计算长度。

**飞线长度**

导线长度监控器将飞线长度计算为当前导线段（附加到指针）的终点到其目的地的距离。当飞线动态布线到连接点时，飞线长度会重新计算。布线角度也会影响此计算。

**进度指示器**

对于带有长度规则的导线，进度指示器显示当前管脚对或整个网络的估计总长度，具体取决于第 450 页"显示管脚对的估计长度"设置。如果选中此复选框，进度指示器显示当前管脚对的估计长度。清除复选框时，指示器显示整个网络的估计长度。请注意，此设置会影响显示上的估计长度在从一个焊盘布线到下一个焊盘时是否满足或违反长度规则。[图 72](#page-13-0)显示了"显示管脚对的估计长度"复选框选中和清除时同一网络的进度指示器。


![](/router/guide/19/_page_13_Figure_8.jpeg)

![](/router/guide/19/_page_13_Figure_9.jpeg)

**监控器显示**

如下表所示，导线长度监控器会根据设置的规则而变化。

**表 79. 长度规则与监控器显示**

| 长度规则                     | 报告中的信息                                                                                                                                                                |
|---------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 最小/最大长度规则 | 显示当前已布线长度、总长度、最小网络长度规则，以及它是在网络、电气网络还是管脚对规则层次结构级别应用的。 |
| 匹配长度规则            | 显示当前已布线长度、总长度和匹配的网络长度规则。                                                                                              |

| 长度规则             | 报告中的信息                                                                                                                                                                        |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 差分对规则 | 显示当前已布线长度、总估计长度、最小长度规则、最大长度规则、间距规则，以及它是网络、电气网络还是管脚对规则。 |
| 无长度规则         | 显示当前已布线长度和总估计长度                                                                                                                               |

**监控器中使用的颜色**

导航窗口仅显示具有长度规则并受当前操作影响的网络、电气网络或匹配长度组。电子表格窗口的**网络长度监控器**选项卡以表格形式显示网络、长度和规则。监控器、导航窗口和**长度监控器**选项卡以不同颜色显示长度。彩色条在监控器上移动。在导航窗口中，网络以颜色显示。在**网络长度监控器**和**电气网络长度监控器**选项卡中，长度列中的长度以不同颜色显示。每种颜色都有特殊含义。

**表 80. 导线长度监控器颜色**

| 颜色             | 表示网络长度为          |
|-------------|-----------|
| 黄色 | 网络长度低于最小限制 |
| 绿色 | 在最小和最大限制范围内 |
| 深绿色 | 在最小或最大限制的 10%范围内 |
| 红色 | 超过最大限制 |

**导线长度显示**

您可以在四个位置监控导线长度。

- **指针处** 显示监控进度、已布线长度、估计网络或电气网络长度以及任何长度规则的图形。此信息也显示在状态栏上。指针附近显示的图形会根据网络、电气网络或管脚对是否具有长度规则、非默认规则或违反规则而变化。

- **导航窗口中** 仅显示具有长度规则并受当前操作影响的网络、电气网络或匹配长度组。

- **电子表格窗口的网络长度监控器选项卡中** 显示网络、长度、规则已布线长度、飞线长度、估计网络长度和长度规则。您也可以在此更改长度规则。

- **电子表格窗口的电气网络长度监控器选项卡中** 显示电气网络、长度、规则已布线长度、飞线长度、估计网络长度和长度规则。您也可以在此更改长度规则。

**调谐过程对导线长度的影响**

在交互式布线和重新布线操作期间，导线长度监控器可能显示的长度大于实际最终长度。您可以在完成布线后对导线执行焊盘入口校正（取决于您的布线首选项）。这些操作可能会稍微改变导线长度。

### 监控导线长度

您可以在布线或编辑导线时监控导线长度。通过监控导线长度，您可以确保导线在布线时满足长度规则。指针处的导线长度监控器显示当前已布线的导线长度和估计的网络或电气网络总长度。

🙊**限制**

对于差分对，导线长度监控器一次显示一对成员的长度。使用 Tab 键在成对成员之间切换。

🏃‍♂️‍**步骤**

1. 点击**工具 > 选项**菜单项；然后在选项对话框中，点击**全局**类别 > **常规**子类别。

2. 在"指针设置"区域，选中"长度监控器"复选框。

3. 要估计当前管脚对的总长度（总长度 + 飞线长度），请在**布线**类别 > **常规**子类别中选中"显示管脚对的估计长度"复选框。否则，长度监控器估计网络或电气网络长度的总长度（总网络长度 + 飞线长度）。

   > [!tip] 您可以通过在交互式布线时按 Ctrl + Page Down 将导线长度监控器中的当前长度值重置为零。

4. 点击**确定**。当您开始主动布线导线时，估计长度会出现在指针旁边。

### 创建导线

通过布线创建导线。在布线之前，您必须选择起点并启动交互式布线。您可以从铜多边形和网络对象（如管脚、虚拟管脚、过孔、导线、导线段、导线拐角、T 型连接、飞线和导线终点）交互式布线。

更多信息，请参阅"创建[差分](#page-46-0)对导线["第 335 页](#page-46-0)。

🏃‍♂️‍**步骤**

1. 在标准工具栏的层列表中，选择要布线的对象所在的层。或者，使用 L快捷键选择层。您不能在受限层上进行交互式布线。在**设计特性**对话框的**层**选项卡或**层偏置**选项卡上设置层限制。

2. 选择要布线的飞线或要从中布线的对象。您不能选择铜线段。您只能选择整个铜多边形。布线起点靠近选择点。

3. **右键**单击并点击**交互式布线**弹出菜单项开始交互式布线。当您开始交互式布线时，阴影边框会自动消失。SailWind 布线器也会忽略短线长度规则。

4. 如果在步骤 2 中选择了属于多个管脚对的管脚，则可以更改选择用于交互式布线的管脚对。要选择不同的管脚对进行布线，请**右键**单击并点击**切换管脚对**弹出菜单项。

5. 向要创建导线的方向移动指针。有关跟随另一个形状的导线的说明，请参阅["跟随形状"第 311 页](#page-22-0)。

6. 必要时，在布线时添加以下内容：

	- [拐角第 318 页](#page-29-1) 在不使用动态布线时需要。动态布线时可选。拐角通常会改变导线的方向。

	- [过孔第 326 页](#page-37-0) 在布线时更改层。

	- 测试点第页 使您的设计可测试。

	- ["圆弧"第 321 页](#page-32-0) 创建圆弧段。

	- [长度第 312 页](#page-23-0) 使用蛇形线满足长度规则。
	
	移动指针时，可能会出现防护带，指示障碍物。
	
7. 要在交互式布线时更改导线属性（如宽度和层），请参阅["更改](#page-51-0)导线[属性](#page-51-0)布线时" [第 340 页](#page-51-0)。导线宽度可能会阻止您在障碍物之间布线。如果选中"允许在焊盘处导线缩颈"复选框（选项对话框 > **布线**类别 > **常规**子类别），您可以通过点击添加拐角自动缩颈导线。导线宽度自动更改为最小导线宽度。清除障碍物后，再次点击返回之前的导线宽度。

8. 如[结束](#page-17-0)导线中所述结束导线。

### 结束导线

SailWind 布线器提供了三种在交互式布线时结束导线的方法。


> [!warning] 差分对需要一些特定步骤。更多信息，请参阅结束[差分](#page-49-0)对[导线](#page-49-0)。

完成导线[连接](#page-17-1) [结束](#page-18-0)带过孔或测试点的导线 结束导线使其[不完整](#page-18-1)

#### 完成导线连接

当指针靠近有效完成点时，指针会变为双圆圈。在重新布线期间，指针变为单圆圈以指示有效完成点。

🏃‍♂️‍**步骤**

当单或双圆圈在完成点上可见时，点击要完成导线的对象。或者，当指针靠近要完成导线的对象时，**右键**单击并点击**完成**弹出菜单项。

👀‍**结果**

导线完成，尽可能保持相同网络规则。导线宽度和长度也可能被调整。当您完成导线时，自动布线过程可能会在后台自动运行；例如，如果要完成导线的对象在另一层或远离指针。如果网络分配了长度规则，SailWind 布线器可能会在使用**完成**弹出菜单项时自动添加长度。

- 如果使用完成时遇到困难，您可能需要在点击**完成**之前切换到组件规则。

- 如果启用了 DRC 阻止模式，并且在尝试完成导线时收到错误消息，或者操作未完成，请**右键**单击并点击**解释最后错误**菜单项。DRC 将解释原因。如果错误标记可见，则会出现错误标记。如果启用了 DRC 解释模式，则会自动为您解释错误，您可以接受错误（通过**右键**单击并点击**继续错误**菜单项）或拒绝它（通过按 Esc 键或**右键**单击并点击**取消**弹出菜单项）。更多信息，请参阅"设计规则检查对话框"第 405 页。

- 如果使用 DRC 阻止或解释模式进行间距检查，可以暂时关闭间距检查以完成导线。在交互式布线时，**右键**单击并点击**检查间距**弹出菜单项。然后您可以完成导线，即使您正在创建间距违规。禁用检查间距后，您可以违反间距边界并创建间距违规。当您点击完成操作时，错误标记会出现在工作区中每个错误的位置，错误消息会出现在电子表格窗口中。您可以在禁用检查间距的情况下继续其他操作。要在布线期间重新激活间距检查，必须再次**右键**单击并点击**检查间距**弹出菜单项。

- 您也可以在导线编辑操作（如移动和拉伸）期间禁用或启用间距检查。要在这些编辑操作期间暂时禁用间距检查，请**右键**单击并点击**忽略间距**弹出菜单项。要在导线编辑期间重新激活间距检查，请再次**右键**单击并点击**忽略间距**弹出菜单项。更多信息，请参阅"使用 DRC 模式编辑导线"第 346 页。

#### 用过孔或测试点结束导线

您可以选择用过孔或测试点结束导线。

🏃‍♂️‍**步骤**

1. **右键**单击，选择弹出菜单中的**结束过孔模式**，然后选择以下结束过孔模式之一：

	- **无过孔结束** 无过孔结束。

	- **过孔结束** 以当前类型的过孔结束，在过孔栅格上，最靠近指针的位置。障碍物移动以适应过孔。

	- **测试点结束** 以当前测试点类型的过孔结束，在测试点栅格上，最靠近指针的位置并分配为测试点。障碍物移动以适应过孔。

SailWind 布线器使用您选择的结束过孔模式，直到您选择新模式。

2. 按住 Ctrl 键并点击结束导线。

👀‍**结果**

当您结束导线时，如果选项对话框 > **布线**类别 > "常规子类别"第 450 页中启用了"完成时平滑导线"复选框，则会自动运行平滑过程。

如果在指针位于另一层的同一网络的导线上时用过孔或测试点结束导线，则过孔会连接到该导线。例外情况：

- 如果网络的过孔共享被禁用，并且连接到过孔的导线数量大于两条，则过孔不会连接到导线。

- 如果导线来自不同的子网，则过孔不会连接到导线。在这种情况下，如果可能，导线会被推挤以为过孔腾出空间。

#### 结束不完整的导线

您可以选择结束导线以便稍后完成。

🏃‍♂️‍**步骤**

**右键**单击并点击**结束**弹出菜单项。结束过孔模式必须设置为**无过孔结束**。

👀‍**结果**

如果在完成点上点击**结束**弹出菜单项，则导线会完成而不是结束。

当您结束导线时，如果在选项对话框、布线类别、常规子类别中选中"完成时平滑导线"复选框，则会自动运行平滑过程。

## 使用元件规则创建导线

如果从具有元件规则的元件、过孔或导线段开始布线，新导线将受到元件规则的约束。您可以选择何时停止使用元件规则并开始使用导线规则来创建导线和差分对。

🙊**限制**

- 当从元件管脚布线差分对时，SailWind Router 会自动使用元件规则，并且会单独布线差分对，就像您点击了"单独布线"一样。

- 当从扇出过孔布线差分对时，SailWind Router 使用导线规则并一起布线差分对。

- 当在具有不同元件规则的元件管脚之间布线时，您必须在两个使用元件规则的导线段之间创建一个使用导线规则的小导线段。

- 如果从使用元件规则的导线的一部分（导线段或节点）开始布线，新导线将使用元件规则。

- 如果从不使用元件规则的导线段或节点开始布线，新导线将继续使用导线规则。

• 如果从复合规则导线的一部分（导线段或节点）开始布线，新导线将使用复合规则。

> [!warning] 复合规则导线是连接到由两个子网共享的管脚的导线。例如，如果一条导线属于具有不同规则的多个管脚对，则该导线使用复合规则，复合规则定义为每个管脚对的最严格公共设置（如果一个管脚对的间距值为 12，另一个为 20，则导线继承的复合间距值为 20）。

• 如果从复合扇出的一部分过孔开始布线，新导线将使用复合规则。如果切换规则，导线将使用连接到该过孔的其中一个子网的导线规则。

🏃‍♂️‍**步骤**

1. 从具有元件规则的元件管脚或导线段开始交互式布线。元件规则自动生效，指针处会出现"CR"图形表示元件规则处于活动状态。该图形还显示拥有规则的元件参考标识符。

2. **右键**单击，选择弹出菜单中的**切换规则**。"CR"图形将从指针处移除，并在规则集更改处添加一个虚拟点。此时导线规则处于活动状态。

## 使用元件规则结束导线

在交互式布线过程中，您可以切换到元件规则来完成导线。

🏃‍♂️‍**步骤**

1. **右键**单击并选择弹出菜单中的**切换规则**，停止使用导线规则并开始使用元件规则。元件规则自动生效，指针处会出现"CR"图形表示元件规则处于活动状态。

2. 使用["结束](#page-17-0)导线"[第 306 页](#page-17-0)中描述的方法之一完成导线。SailWind Router 从您添加的最后一个拐角到完成点保持元件规则。最后添加的拐角成为虚拟点。

## 布线至 SMD 管脚

您可以布线至 SMD 管脚，并通过在 SMD 管脚上放置过孔来完成布线。

🏃‍♂️‍**步骤**

1. 使用**设计特性**对话框或元件属性对话框的**同网络**选项卡设置 SMD 过孔。

2. 在交互式布线过程中，指向您想要结束导线的另一层上的 SMD 管脚，按住 Shift 键并单击以在 SMD 管脚处添加过孔。或者，在交互式布线过程中，指向您想要结束导线的另一层上的 SMD 管脚并双击。Route 自动布线过程将完成导线并在 SMD 处添加过孔。跳过步骤 3。

3. **右键**单击并从弹出菜单中选择完成方法。


## 从 SMD 管脚布线

您可以从表面贴装元件管脚进行交互式布线。

🏃‍♂️‍**步骤**

1. 使用**设计特性**对话框或元件属性对话框的**同网络**选项卡设置 SMD 过孔选项。

2. 从元件管脚开始交互式布线。

3. 添加过孔。当前类型的过孔将出现在 SMD 管脚处。更多信息请参见["过孔"](#page-35-0)[第 324 页](#page-35-0)。

4. 继续布线。

## 从受限层上的 SMD 管脚布线

您无法从受限层上的表面贴装元件管脚进行交互式布线。但是，Fanout 自动布线过程将为您创建扇出。

🏃‍♂️‍**步骤**

1. 使用**设计特性**对话框或元件属性对话框的**同网络**选项卡设置 SMD 过孔选项。

2. 选择表面贴装元件或管脚。

3. **右键**单击并选择弹出菜单中的**扇出**，对选定的元件或管脚运行 Fanout 自动布线过程。SailWind Router 从SMD 创建扇出，根据您的扇出设置在短截线末端放置过孔。

4. 从过孔开始交互式布线。

## 跟随形状

在交互式布线过程中使用跟随功能，可以轻松创建跟随其他形状（另一条导线、板边框、铜箔或导线禁止区）的导线。

🙊**限制**

您无法跟随 2D 线或其他层上的对象。

🏃‍♂️‍**步骤**

1. 在交互式布线过程中，**右键**单击并选择弹出菜单中的**跟随**。

2. 单击选择要跟随的对象。为确保选择正确的对象，将指针移动到对象上；导线将跟随的对象会高亮显示。

3. 单击指示您希望在对象上开始导线的位置。在跟随模式下，您仍然可以后退和使用弧线；但是，所有其他交互式布线选项都不可用。

4. 将指针移动到您想要放置导线的方向。

5. 单击完成跟随形状并继续交互式布线。

👀‍**结果**

新导线沿着选定形状的边框出现。SailWind Router 遵循所有间距规则；如果途中有障碍物，新导线会绕过它，然后在第一个机会返回跟随形状。

设计中的预存元素，特别是导线和过孔，保持原样；跟随模式的工作方式就像您保护了所有网络并禁用了 Plower。当跟随过程遇到来自其他网络的导线或过孔时，它会绕开障碍物布线。

## 增加导线长度

使用蛇形线为导线或差分对增加长度，使其满足网络、电气网络或管脚对的长度规则。

有关设置布线长度约束选项的更多信息，请参见"选项对话框，布线类别，常规子类别"。

[以默认振幅添加蛇形线](#page-23-1) [以自定义振幅添加蛇形线](#page-24-0) 向现有导线添加[蛇形线](#page-26-0)

### 以默认振幅添加蛇形线

您可以通过添加蛇形线来增加导线长度。

🏃‍♂️‍**步骤**

1. 在交互式布线过程中，**右键**单击并选择弹出菜单中的**添加蛇形线**。

2. 将指针移动到您想要放置蛇形线的方向。根据您的布线角度，您可以以任何角度创建蛇形线。

蛇形线基于最小振幅和最小间隙设置（选项对话框，布线类别，常规子类别）出现。蛇形线的振幅以导线为中心，如下所示。

**图 73. 以默认振幅添加蛇形线**

![](/router/guide/19/_page_23_Figure_12.jpeg)

蛇形线的间隙基于最小间隙设置（选项对话框 > **布线**类别 > **调整**子类别）。

您还可以添加使用默认振幅但不以导线为中心的蛇形线，如下所示。开始蛇形线，单击进入第一部分，然后将指针移动到您想要放置蛇形线的方向。

**图 74. 添加非居中蛇形线**

![](/router/guide/19/_page_24_Figure_2.jpeg)

您可以组合蛇形线创建方法。例如，您可以添加使用默认振幅的蛇形线，并在其中一个后续部分中单击重新定义振幅。这在遇到不可移动的障碍物时很有用。

3. **右键**单击并选择弹出菜单中的**完成蛇形线**以结束蛇形线并继续布线。或者，双击以结束蛇形线。

4. 添加蛇形线后对其进行保护，以防止自动布线器（或其他编辑操作）删除或调整它们。

### 以自定义振幅添加蛇形线

插入蛇形线并根据需要调整各个部分的振幅。根据您的布线角度，可以以任何角度创建蛇形线。

🏃‍♂️‍**步骤**

1. 在交互式布线过程中，**右键**单击并选择弹出菜单中的**添加蛇形线**。

2. 要定义振幅，将指针移动到定义蛇形线最高点的位置，**右键**单击，然后选择弹出菜单中的**添加段**。

3. 将指针移动到定义蛇形线最低点的位置，**右键**单击，然后选择**添加段**。

![](/router/guide/19/_page_24_Figure_12.jpeg)

**图 75. 以自定义振幅添加蛇形线**

4. 将指针移动到您想要放置蛇形线的方向。

5. **右键**单击并选择弹出菜单中的**完成蛇形线**以结束蛇形线并继续布线。或者，双击以结束蛇形线。蛇形线的间隙基于选项对话框 > **布线**类别 > **调整**子类别中的最小间隙设置。在添加蛇形线时无法调整间隙。

6. 添加蛇形线后对其进行保护，以防止自动布线器（或其他编辑操作）删除或调整它们。

### 向现有导线添加蛇形线

如果现有导线在完成后不满足长度要求，您可以添加蛇形线。

当您向现有导线添加蛇形线时，您有两个选择：

- 您可以添加蛇形线，仅增加足够的长度[以满足网络长度规则](#page-26-1)[第 315 页](#page-26-1)。

- 您可以[指定导线的哪一部分](#page-26-2)[第 315 页](#page-26-2)转换为蛇形线。

[添加蛇形线以满足长度规则](#page-26-1) [在指定区域添加蛇形线](#page-26-2)

#### 添加蛇形线以满足长度规则

您可以向导线添加蛇形线，增加其布线长度以满足您的长度规则。

🏃‍♂️‍**步骤**

1. 选择要添加蛇形线的导线、导线段或导线路径。


> [!tip] 如果您选择差分对肩部区域的线段，您可以向该对的一个成员添加蛇形线。如果您选择差分对控制间隙区域的线段，则必须向该对的两个成员添加蛇形线。

2. **右键**单击并选择弹出菜单中的**添加蛇形线**。蛇形线出现在导线中，使网络满足网络长度规则。SailWind Router 通常将蛇形线添加到选定导线或线段的中间。

#### 在指定区域添加蛇形线

您可以选择指定导线的哪一部分转换为蛇形线。

🏃‍♂️‍**步骤**

1. 在选择过滤器工具栏中，单击**路径**按钮启用路径选择。

2. 单击导线或导线段指定蛇形线位置的起点。

3. 再次单击指定蛇形线的终点。如果您指定差分对肩部区域的线段，您可以向该对的一个成员添加蛇形线。如果您指定差分对控制间隙区域的线段，则必须向该对的两个成员添加蛇形线。

4. **右键**单击并选择弹出菜单中的**添加蛇形线**。SailWind Router 在导线或导线段的选定路径内添加蛇形线。


## 斜接 ಠ_ಠ

使用斜接指定用对角线线段或弧线替换拐角的值。

在选项对话框的**布线**选项卡上设置的斜接比率值指定蛇形线拐角的斜接比率。SailWind Router 使用以下公式计算半径：

```

(<导线宽度> / 2) × 比率

```

![](/router/guide/19/_page_27_Picture_9.jpeg)

如果**布线**选项卡斜接区域中的"使用弧线"被勾选，则对角线线段将被弧线替换：

![](/router/guide/19/_page_27_Figure_11.jpeg)

例如，如果导线宽度为 12（在导线段属性对话框中设置），并且您将比率设置为 1，则斜接半径为 6（(12 / 2) × 1 = 6）。斜接线段长度约为 8.49。

**蛇形线**

当蛇形线使用斜接时，斜接线段不能比中间线段长：

| 蛇形线最小振幅(乘以导线宽度): | Зπ                     |
|--------------------------------------------------------|----------------------------|
| 最大振幅(乘以导线宽度):              | 30                         |
| 最小间隙 (乘以导线到拐角间距):      |                            |
| 最大层级:                                   | $\frac{1}{\epsilon}$18 |
| 斜接比率: 100                                       |                            |
| 在斜接中使用弧线                                     |                            |

如果蛇形线改用弧线，中间线段可能会被完全移除：

| 蛇形线最小振幅(乘以导线宽度): | з  |
|--------------------------------------------------------|----|
| 最大振幅(乘以导线宽度):              | 30 |
| 最小间隙 (乘以导线到拐角间距):      |    |
| 最大层级:                                   | 18 |
| 100斜接比率:                                    |    |
| $\nabla$ 在斜接中使用弧线                            |    |

**差分对斜接**

当您选择向差分对添加斜接时，SailWind Router 会为两条平行导线生成斜接，但会根据斜接比率设置计算较小（内部）斜接线段的大小。

| 常规文件                                                    | 显示   放置   布线 |
|-----------------------------------------------------------------|------------------------------|
|                                                                 |                              |
| 布线至长度约束蛇形线最小振幅 |                              |
| (乘以导线宽度):                                            | 픙З                       |
| 最大振幅(乘以导线宽度):                       | 墨30                      |
| 最小间隙 (乘以导线到拐角间距):               | з                            |
| 最大层级:                                            | 8                            |
| 斜接比率: 2                                                  |                              |
| 在斜接中使用弧线                                              |                              |

**障碍物**

斜接过程可以在遇到管脚或过孔等障碍物时创建较小的斜接。

## 拐角

SailWind Router 将拐角放置在距离指针最近且符合当前布线栅格设置和设计规则的位置。当您选择布线栅格的"对齐对象到栅格"复选框（位于**设计特性**对话框的**栅格**选项卡）时，SailWind Router 会将拐角放置在至少一个栅格坐标上。

下图展示了栅格上的拐角放置。

![](/router/guide/19/_page_29_Figure_4.jpeg)

当您从焊盘退出后放置第一个拐角时，SailWind Router 会保持第一拐角规则[（图](#page-29-2) [77](#page-29-2))，除非您在**设计特性**对话框的**焊盘入口**选项卡上选择了"忽略第一拐角规则"复选框。此复选框使第一拐角规则变为软规则。

![](/router/guide/19/_page_29_Figure_6.jpeg)

[交互式布线时添加拐角](#page-29-1) 向现有导线[添加拐角](#page-30-0)

### 交互式布线时添加拐角

您可以在使用或未使用动态布线时添加拐角。

🏃‍♂️‍**步骤**

在交互式布线过程中，单击以输入拐角。或者，**右键**单击并选择弹出菜单中的**添加拐角**。SailWind Router 会移除任何导线环路并添加拐角。如果在导线端点位于完成点上时单击**添加拐角**弹出菜单项，导线将完成。

**图 76. 栅格对齐的导线拐角**

> [!tip] 如果添加拐角后导线遇到不可移动的障碍物（例如元件管脚），最后输入的导线拐角会自动移动到允许导线通过障碍物的新位置，如下所示。这仅在您不使用动态布线且选择了"调整导线段绕过障碍物"复选框（选项对话框 > **布线**类别 > **常规**子类别）时发生。

![](/router/guide/19/_page_30_Figure_2.jpeg)

当您从非栅格对齐的焊盘进行动态布线时，SailWind Router 会在距离指针最近且位于布线栅格上的点添加拐角。当您从非栅格对齐的焊盘进行非动态布线时，SailWind Router 会在栅格线上添加拐角，而不是在栅格交点处。

进行动态布线时会保持焊盘入口设置。可在**设计特性**对话框或元件属性对话框的**焊盘入口**选项卡上设置焊盘入口。

![](/router/guide/19/_page_30_Figure_5.jpeg)

**图 79. 从非栅格对齐焊盘布线**

### 向现有导线添加拐角

如果已布线连接，您可以向现有导线添加拐角。

🏃‍♂️‍**步骤**

1. 选择导线段，然后**右键**单击并选择弹出菜单中的**添加拐角**。或者，在布线编辑工具栏上单击**添加拐角**按钮。

2. 将指针移动到拐角的目标位置并单击。在选择点会出现一个拐角。还会显示栅格线，指示从导线端点开始的 45 度角。这使得放置对角拐角更加容易。添加拐角时，SailWind Router 不会平滑相邻段，即使您已选择"平滑相邻段"复选框（选项对话框 > **布线**类别 > **常规**子类别）。


> [!tip]移动拐角时按住 Shift 键可临时覆盖当前角度模式。


## 圆弧

交互式布线时，您可以添加自由绘制的圆弧或指定半径的圆弧。此功能在布线差分对时也可用。在圆弧模式下布线差分对时，您不能使用以下命令：添加过孔、添加测试点、添加蛇形导线式导线、完成、层切换、层、切换规则。

[添加自由绘制圆弧](#page-32-1) [添加指定半径圆弧](#page-32-2)

### 添加自由绘制圆弧

向单条导线、差分对或差分对的单条导线添加自由绘制圆弧。

🏃‍♂️‍**步骤**

1. 布线时，单击定位圆弧的起点。


> [!tip]添加圆弧后请确保保护它们，因为自动布线操作和交互式布线中的推挤可能会移除未受保护的圆弧。要在添加时保护圆弧，请在选项对话框 > **布线**类别 > **常规**子类别中选择"创建段时保护导线和过孔"复选框。或者，在交互式布线时，**右键**单击并选择弹出菜单中的**保护导线和过孔**。

2. **右键**单击并选择弹出菜单中的**圆弧 > 添加圆弧**。

3. 移动指针绘制圆弧。

4. 再次单击结束圆弧。

### 添加指定半径圆弧

向单条导线、差分对或差分对的单条导线添加指定半径的圆弧。

🙊**限制**

- 固定半径圆弧的端点仅限于与布线角度和栅格设置一致的端点。

- 您不能创建环形圆弧。如果闭合圆弧（形成一个圆），该圆将被忽略，您将继续定义圆弧。

- 当前布线角度决定了圆弧的弦增量，如下所示。

![](/router/guide/19/_page_33_Figure_2.jpeg)

**图 80. 交互式布线 - 添加圆弧**

🏃‍♂️‍**步骤**

1. 如有必要，使用"RAD"无模命令设置所需半径。如果组合布线差分对，半径定义较小（内部）的圆弧。


> [!tip]添加圆弧后请确保保护它们，因为自动布线操作和交互式布线中的推挤可能会移除未受保护的圆弧。要在添加时保护圆弧，请在选项对话框 > **布线**类别 > **常规**子类别中选择"创建段时保护导线和过孔"复选框。或者，在交互式布线时，**右键**单击并选择弹出菜单中的**保护导线和过孔**。

2. 单击定位圆弧的起点。

3. **右键**单击并选择弹出菜单中的**圆弧 > 添加半径圆弧**。圆弧从最后输入的拐角、圆弧或端点开始。

4. 向要创建圆弧的方向移动指针。如果从焊盘添加圆弧或在焊盘完成圆弧，SailWind Router 不会保持焊盘入口和第一拐角规则。

5. 单击完成圆弧并继续布线。

## 过孔

添加过孔以将导线从当前层布线到设计中的另一层。另一层随后成为当前层。添加过孔时，当前类型的过孔会出现在符合当前过孔栅格设置和设计规则的位置。SailWind Router 会推挤可移动障碍物以适应新过孔。

如果 DRC 模式（第 405 页）的间距设置为"阻止"，并且启用了推挤，SailWind Router 会移动障碍物，为过孔创建空间而不违反设计规则。

SailWind Router 对进行中的导线使用当前过孔类型，前提是过孔偏置规则（在属性对话框的**过孔偏置**选项卡上设置）允许。如果当前过孔类型不允许用于导线，SailWind Router 会选择另一个有效的过孔类型。使用新的或不同的过孔后，SailWind Router 会将其用于后续的过孔添加。

在差分对的受控间隙区域布线导线时，SailWind Router 会在两条导线上添加过孔。在圆弧模式下布线差分对时不能添加过孔。

过孔[模式](#page-35-1) [设置](#page-36-0)过孔类型 [保护](#page-36-1)过孔 [添加](#page-37-1)过孔到过孔栅格 使用层切换和添加过孔[更改](#page-37-2)到特定层 交互式布线时[添加](#page-37-0)过孔 向[现有](#page-38-0)导线添加过孔 添加[缝合](#page-38-1)过孔

### 过孔模式 ಠ_ಠ

过孔模式决定了插入过孔时使用哪种过孔类型。

SailWind Router 根据以下几个要求选择过孔：

- 根据过孔偏置规则确定网络或管脚对允许的过孔。

- 根据您在 SailWind Layout 的焊盘栈属性对话框中设置的层钻孔设置，确定哪些过孔对层更改是合法的。

- 如果有多个过孔符合条件，则选择焊盘尺寸最小但又大于导线宽度的过孔。

| 无模命令 | 此模式 | 限制过孔类型为                                             |
|---------------------|---------------|----------------------------------------------------------------------|
| VA                  | 自动     | 从所有可用过孔列表中自动选择                |
| VP                  | 部分       | 符合上述要求的部分过孔类型         |
| VT                  | 通孔       | 符合上述要求的通孔过孔类型以上 |

**表 81. 设置或更改过孔模式**

### 设置过孔类型

添加过孔时，其过孔类型成为当前过孔类型，SailWind Router 在添加后续过孔时继续使用它。添加后续过孔时，如果 SailWind Router 不能使用当前过孔类型，或者它与过孔模式冲突，过孔类型将更改为"未定义"，然后根据当前过孔模式（VA、VT 或VP）自动选择。

添加过孔时，SailWind Router 遵循以下对话框**过孔偏置**选项卡上的设置：

- 网络属性对话框

- 管脚对属性对话框

- 元件属性对话框

🏃‍♂️‍**步骤**

1. 布线时，**右键**单击，选择弹出菜单中的**过孔类型**，然后从列表中选择一个过孔类型；例如，STANDARDVIA。列表包含当前过孔类型，后跟设计中允许的过孔类型列表，然后是过孔模式命令。

2. 要选择列表中不可见的过孔类型，请单击**选择**弹出菜单项。只有当您有超过 12 个可用过孔时，**选择**选项才会出现在菜单上。如果您添加的下一个过孔符合过孔偏置规则和层钻孔设置，它将使用新的过孔类型。

👀‍**结果**

如果您选择了"开启推挤器"复选框（选项对话框 > **布线**类别 > **常规**子类别）并且更改了现有过孔的过孔类型，SailWind Router 可能会推挤导线和其他可移动障碍物为新过孔类型腾出空间。

### 保护过孔

在添加到设计时保护导线和过孔。布线操作不能拆除或以其他方式修改过孔。

🏃‍♂️‍**步骤**

1. 单击**工具 > 选项**菜单项；然后，在选项对话框中，单击**布线**类别 > **常规**子类别。

2. 选择"创建段时保护导线和过孔"复选框。如果您在**设计特性**对话框的**布线**选项卡中选择"需要时推挤受保护的导线"复选框，则可以移动受保护的过孔。

### 在过孔栅格上添加过孔

您可以选择在栅格上添加过孔。

🏃‍♂️‍**步骤**

1. 在设计区域中未选择任何内容时，**右键**单击并选择弹出菜单中的**特性**；然后在属性对话框中，单击**栅格**选项卡。

2. 为过孔栅格选择"对齐对象到栅格"复选框。

> [!tip]如果您选择"平滑相邻段"复选框（选项对话框 > **布线**类别 > **常规**子类别），SailWind Router 会平滑与过孔相邻的导线段。

### 使用层切换和添加过孔更改到特定层

添加过孔会自动切换到其他布线层（在双层设计中）或层对中的其他层（对于多层设计）。如果您在未配对的层上布线，添加过孔会切换到配对层设置中编号最低的层。

您可以在选项对话框 > **布线**类别 > **常规**子类别中设置层对。您还可以将层更改操作与添加过孔命令结合使用以切换到特定层。

🏃‍♂️‍**步骤**

1. 在添加过孔之前，按住 Alt 键同时滚动鼠标滚轮按钮。

2. 这允许您滚动浏览设计中的层。当您到达要切换到的层时，按照以下部分所述添加过孔。

### 交互式布线时添加过孔

您可以在交互式布线时添加过孔。

🙊**限制**

在圆弧模式下布线差分对时不能添加过孔。

🏃‍♂️‍**步骤**

交互式布线时，按住 Shift 键并单击。或者，**右键**单击并选择弹出菜单中的**添加过孔**。

### 向现有导线添加过孔

您可以选择向已布线的导线添加过孔。

🙊**限制**

不能向受保护的对象添加过孔或测试点。但是，如果拐角中至少有一个段未受保护，则可以向导线拐角添加过孔。

🏃‍♂️‍**步骤**

选择现有导线、导线段、导线拐角或 T型连接，**右键**单击并选择弹出菜单中的**添加过孔**。如果向现有导线添加过孔更改了导线模式，SailWind Router 会保持第一拐角规则，这可能导致进入或退出过孔的导线模式发生变化。

### 添加缝合过孔

您还可以向飞线添加过孔。飞线中的过孔称为*缝合过孔*。

🏃‍♂️‍**步骤**

1. 选择飞线，**右键**单击并选择弹出菜单中的**添加过孔**。


	> [!tip]通过单击**工具 > 选项**菜单项 > **布线**类别 > / **常规**子类别保护过孔不被移动或拆除。选择"创建段时保护导线和过孔"复选框。如果您在**设计特性**对话框的**布线**选项卡中选择"需要时推挤受保护的导线"复选框，则可以移动受保护的过孔。

2. 将指针移动到过孔位置，并单击放置过孔。过孔直接连接到网络。除了保持过孔偏置规则外，向飞线添加过孔还保持元件规则。如果连接到所选飞线的元件管脚有过孔偏置规则不匹配，则忽略过孔类型。

## 布线到布铜区和飞线显示 ಠ_ಠ

SailWind Layout 和 SailWind Router 都支持布线到布铜区。但在某些情况下，SailWind Layout 看不到布铜区已连接，并显示飞线。相比之下，SailWind Router 不显示飞线，也不添加布线，因为它认为这些对象已连接。SailWind Router 的行为保存在布线设计文件中，可以传回 SailWind Layout。

要在 SailWind Layout 中再次显示设计的飞线，请执行长度最小化或在 SailWind Layout 中修改平面网络布线。

SailWind Layout 和 SailWind Router 在某些情况下表现出这种行为。

**通过过孔连接**

您可以通过过孔从不同层连接到布铜区。在下图中，导线和布铜区位于不同层。SailWind Router 不显示飞线，因为导线和布铜区被视为已连接。然而，SailWind Layout 显示飞线，因为它不考虑来自另一层的连接。

**表 82. 通过过孔从不同层连接到布铜区**

| SailWind Router 不显示飞线 | SailWind Layout 显示飞线 |
|------------------------------------------|----------------------------------|
|                                          |                                  |

**连接开放或闭合布铜区**

您可以在 SailWind Router 中连接同一层上的开放布铜区与闭合布铜区。在下图中，导线（开放布铜区）与布铜区（闭合布铜区）位于同一层。SailWind Router 不显示飞线，因为开放和闭合布铜区被视为已连接。然而，SailWind Layout 显示飞线，因为它不考虑开放和闭合布铜区之间的连接。

**表 83. 连接开放或闭合布铜区**

| SailWind Router 不显示飞线 | SailWind Layout 显示飞线 |
|------------------------------------------|----------------------------------|
|                                          |                                  |

## 差分对

SailWind Router 完全支持差分对的实现。

[差分对原理](#page-40-1)

[差分对导线创建](#page-46-0)

[设置过孔对模式](#page-47-0)

[终止差分对导线](#page-49-0)

[拆分差分对导线](#page-51-1)

### 差分对原理 ಠ_ಠ

差分对是 SailWind Router 并行布线的导线，在尽可能长的总长度上保持固定的布线间距。差分对通常传输两个相位相差 180 度的电信号。固定的布线间距有助于实现差分信号所需的特定且均匀的阻抗。

SailWind Router 会识别 SailWind Layout 创建的差分对对象。

本节介绍差分对布线特有的布线元素、特性和布线步骤。

**差分对布线元素**

下图展示了各种差分对布线元素及其组合方式。表格包含每个布线元素的描述。

![](/router/guide/19/_page_40_Figure_10.jpeg)

**图 81. 差分对元素**

> [!tip]前图中源管脚、目标管脚、起始区和结束区的标签对应于从左管脚组开始到右管脚组结束的布线（如果布线从右管脚组开始，则标签位置会反转）。

| 布线元素        | 描述                                                                                                                                                                                       |
|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 控制间距区域    | 差分对中导线平行布线的部分，由对布线间距分隔。控制间距区域从汇聚点开始，到分离点结束。                                                                                                 |
| 目标管脚        | 差分对的终点。                                                                                                                                                                            |
| 结束区          | 差分对中从分离点到目标管脚之间的部分。                                                                                                                                                    |
| 汇聚点          | 源管脚附近的位置，差分对导线开始以对布线间距布线。                                                                                                                                        |
| 对布线间距      | 控制间距区域中差分对导线之间固定的边到边间距。                                                                                                                                            |
| 肩部            | 源管脚与汇聚点之间，或分离点与目标管脚之间的导线段。                                                                                                                                      |
| 源管脚          | 差分对的起点。                                                                                                                                                                            |
| 分离点          | 目标管脚附近的位置，差分对导线不再以对布线间距布线，导线分别布线到目标管脚。                                                                                                              |
| 起始区          | 差分对中从源管脚到汇聚点的部分。                                                                                                                                                          |

一个网络可能包含差分管脚对和非差分管脚对。对布线间距要求不适用于非差分管脚对。

**图 82. 包含差分和非差分管脚对的网络**

![](/router/guide/19/_page_41_Figure_5.jpeg)

**定义差分对特性**

差分对通常作为阻抗匹配的导线布线，每条导线具有相同的指定阻抗。阻抗的指定基于多个因素，可能取决于特定 IC 制造商的建议或信号传输介质所施加的标准，例如 LVDS 和USB。

为了获得具有所需阻抗和信号传播时间的差分对布线，您需要向 SailWind Router 提供以下差分对属性：

- 用于布线差分对的布线层

- 对布线间距

- 导线宽度

- 最小和最大导线长度

您可以使用高速分析工具计算产生所需阻抗的差分对属性值集。为了进行计算，您需要向分析工具提供板的层叠信息：

- 布线层、介质层和平面层的顺序

- 每层的厚度

- 每个介质层的介电常数

此外，您应该了解所选印刷电路板供应商在不产生额外成本的情况下能够精确生产的最小边到边导线间距。理论上，间距越小，阻抗越高。

**推荐的差分对布线实践**

某些布线实践可能导致差分对阻抗值不正确、信号传播延迟不匹配或电磁干扰(EMI)辐射增加。通过遵循以下布线实践，可以提升差分对性能：

- 在单层上布线差分对

- 避免改变导线宽度

- 最大化以对布线间距布线的总长度比例

- 最小化肩部长度

- 匹配肩部长度

- 使用 45 度布线角度

- 如果没有平面层分隔布线层，则将差分对垂直于相邻布线层上的导线布线

**差分对布线**

本节概述差分对布线特有的布线步骤。

**从源管脚到汇聚点的布线**

差分对从源管脚到汇聚点以尽可能短的距离布线，同时遵守设计规则。布线器还尝试在起始区保持差分对导线在一起。当导线与源管脚和其他对象有足够的间距可以以对布线间距一起布线时，可以设置汇聚点。

此布线程序尝试匹配肩部长度。但是，布线相对于源管脚的朝向可能导致肩部长度不匹配，如下图所示。

**图 83. 肩部长度不匹配的差分对**

![](/router/guide/19/_page_43_Figure_2.jpeg)

为了允许差分对导线从高密度组件（如 BGA）中引出，SailWind Router 可以在起始区绕过障碍物并将导线宽度减小到最小导线宽度。即使您不允许在控制间距区域中绕过对象，布线器也允许在起始区拆分差分对绕过对象。

在交互式布线起始区时，您可以通过进入单独布线模式并将单独的导线布线到汇聚点来高度控制肩部布线路径。在汇聚点，您可以退出单独布线模式并将导线一起布线。

**在控制间距区域布线**

在汇聚点和分离点之间，差分对导线以对布线间距和恒定导线宽度一起布线。在自动布线期间，除非您特别允许，否则导线不会在控制间距区域中拆分绕过障碍物。在交互式布线时，您始终可以在控制间距区域中拆分绕过障碍物。

**从分离点到目标管脚的布线**

差分对从分离点到目标管脚以尽可能短的距离布线，同时遵守为对设置的设计规则，例如最小长度。设置分离点后，布线器将导线分别布线到目标管脚。

SailWind Router 可以在结束区绕过障碍物，就像从源管脚到汇聚点布线时一样。

**绕过障碍物**

在自动布线期间，您可以通过在差分对属性对话框中选择"允许对拆分绕过障碍物"复选框来允许差分对在控制间距区域中拆分绕过小障碍物。在交互式布线时，您始终可以在控制间距区域中拆分绕过障碍物。

为了防止对拆分得太远或距离太长，您还可以在对话框中指定最大障碍物大小和最大障碍物数量属性。起始区或结束区中的障碍物不计入您设置的最大障碍物数量。

**限制层变更**

您可以通过在差分对属性对话框中选择"自动布线期间限制层变更"复选框来强制 SailWind Router 在单层上布线控制间距区域。选择此属性时，SailWind Router 尝试在没有过孔的情况下布线控制间距区域，并防止您在控制间距区域中交互式插入过孔。

要从一组可用层中选择特定层来布线差分对，请在网络属性对话框的**层偏置**选项卡上选择特定层。自动布线器从可用层组中选择一个层，并仅在所选层上布线差分对。例如，如果您指定一组四个可用层，自动布线器选择四个层中的一个，并仅在所选层上布线差分对。

在使用自动布线器时要在特定层上布线差分对，只需在网络属性对话框的**层偏置**选项卡上选择该特定层。

即使您选择限制层变更，也可以向差分对布线添加扇出过孔。此行为允许您在将控制间距区域在单层上布线的同时，将差分对连接到高密度 BGA 管脚。

**图 84. 带有扇出过孔且无布线过孔的差分对**

![](/router/guide/19/_page_44_Figure_3.jpeg)

**添加过孔对**

要为差分对变更层，SailWind Router 使用下图所示的一种模式插入一对过孔。（过孔模式名称基于过孔对轴相对于接近过孔对的布线轴的方向。）这些模式使过孔保持紧密、对称的模式，并最小化连接短截线的长度。垂直模式是默认模式，提供最佳的对称性。

![](/router/guide/19/_page_44_Figure_6.jpeg)

当您启用此功能时，过孔对会捕捉到过孔栅格。下图显示了过孔对过孔栅格设置的反应。

![](/router/guide/19/_page_45_Figure_1.jpeg)

**图 86. 过孔对过孔栅格设置的反应**

要添加单个过孔，请分别布线导线。如果两条导线使用相同的布线层，您可以在单独放置两个过孔后恢复一起布线导线。或者您可以放置过孔并完成布线，然后可以交互式地将过孔移动到首选位置。

**增加长度**

为了满足差分对的最小长度属性，在控制间距区域中插入对称的差分对蛇形线。如果有足够的板空间，自动布线器可以插入满足所需长度的蛇形线，或者您可以交互式添加蛇形线。

![](/router/guide/19/_page_45_Figure_6.jpeg)

**图 87. 差分对蛇形线结构**

更多信息，请参考"创建[差分](#page-46-0)对导线"和"终止[差分](#page-49-0)对导线"。

**长度匹配**

如果您运行任何自动布线操作或在差分对上运行 Tune 传递类型，自动布线器尝试精确匹配两个对成员的长度。在可能的情况下，它会在导线的肩部区域向较短的对成员添加长度，而不推挤或移动障碍物。

自动布线器通过向较短的导线添加小蛇形线来增加长度。自动布线器首先尝试在肩部区域添加蛇形线。如果两个肩部区域都无法容纳小蛇形线，自动布线器会在控制间距区域中尽可能靠近肩部区域添加蛇形线。

### 创建差分对导线

通过交互式布线创建差分对导线。在布线之前，您需要为差分对选择一个起点并启动交互式布线。

要布线单条导线，请参见["创建](#page-15-1)导线"[第 304 页](#page-15-1)。


> [!tip]您可以在布线差分对时添加弧线。

🙊**限制**

在交互式布线差分对时，您不能更改导线宽度。

🏃‍♂️‍**步骤**

1. 在主工具栏上，单击**布线编辑**按钮。在布线编辑工具栏上，单击**交互式布线**按钮；然后选择飞线。

2. 在 SailWind Layout 或本程序中定义差分对。更多信息，请参见"在次级组中创建新对象"第 53 页。

3. 在标准工具栏的层列表中，选择您要布线的对象所在的层。您不能在受限层上交互式布线。在**设计特性**对话框的**层**选项卡或**层偏置**选项卡上设置层限制。

4. 选择差分对后，**右键**单击并单击**交互式布线**弹出菜单项。您只需要选择差分对中的一个飞线。导线会组合布线。当您开始交互式布线时，SailWind Router 会自动移除阴影边框。

5. 移动指针以布线导线。当您移动指针时，可能会出现防护带，指示障碍物。

6. 要单独布线导线，**右键**单击并单击**单独布线**弹出菜单项。将导线布线到所需点后，**右键**单击并单击**切换导线**弹出菜单项以布线另一条导线。将另一条导线布线到同一点后，再次**右键**单击并单击**单独布线**（弹出菜单项）以恢复组合布线导线。或者，使用 Tab 键在差分对成员之间切换。

7. 单击以锚定汇聚点，并开始布线控制间距区域。当导线以对布线间距一起布线并且（如果启用）防护带突出显示任何障碍物时，您已达到有效的汇聚点。

8. 如有必要，在布线控制间距区域时添加以下内容：

    - [拐角第 318 页](#page-29-1) 如果您在没有动态的情况下布线则需要。如果有动态则可选。拐角改变导线的方向。

    - ["弧线"第 321 页](#page-32-0) 创建弧线段。

    - [拆分第 340 页](#page-51-1) 允许导线通过暂时超过对布线间距绕过障碍物的两侧。

    - 过孔[对第 336 页—](#page-47-0) 在布线时变更层。要变更过孔对方向，**右键**单击，选择弹出菜单中的**过孔模式**，然后单击新的过孔模式。

    - 测试点第页 使您的设计可测试。

    - [长度第 312 页](#page-23-0) 满足长度规则。

9. 要在布线时变更层，**右键**单击，选择弹出菜单中的**层**，然后单击您要继续布线的层。要选择未列出的层，单击**选择**弹出菜单项。从最后一个拐角开始的导线段移动到新层。或者，使用层切换自动切换到层对中的另一层。您也可以使用鼠标滚轮按钮滚动浏览层。

更多信息，请参见"使用滚轮滚动浏览层"第 126 页。

如有必要，SailWind Router 会添加过孔（当前过孔类型）或在您变更层时自动移除它们。它不会移除也是测试点的过孔。

10. 要在布线时变更布线角度，**右键**单击，选择弹出菜单中的**布线角度**，然后单击新角度。

11. 如"终止[差分](#page-49-0)对导线"[第 338 页](#page-49-0)所述结束导线。

### 设置过孔对模式

当您布线差分对时，过孔对模式决定了过孔对轴相对于接近过孔对的布线轴的方向。您可以选择在交互式布线时变更过孔对模式。

🏃‍♂️‍**步骤**

1. **右键**单击，选择**过孔模式**弹出记忆项，然后单击所需模式。

2. 变更过孔对模式后会自动运行平滑传递。下图显示了可用的过孔对模式：

![](/router/guide/19/_page_48_Figure_4.jpeg)

**图 88. 可用过孔对模式**

### 终止差分对导线

在交互式布线时，您可以通过三种方式之一终止差分对导线。

完成差分对导线[连接](#page-49-1) [终止](#page-50-0)带有过孔对或测试点对的差分对导线 终止差分对导线使其[不完整](#page-50-1)

#### 完成差分对导线连接

SailWind Router 提供专门用于完成差分对导线的命令。

🙊**限制**

在弧线模式下布线差分对时，您不能使用完成命令来完成导线。

🏃‍♂️‍**步骤**

1. 当接近完成点时，**右键**单击并单击**单独布线**弹出菜单项，将单独导线布线到目标管脚。当您使用单独布线时，当指针接近有效完成点时，指针会变为双圆圈。在重新布线期间，指针变为单圆圈以指示有效完成点。

或者，当指针接近您要完成导线的对象时，**右键**单击并单击**完成**菜单项，或双击。

2. 单击您要完成导线的对象。

3. 要首先布线另一条导线，**右键**单击并单击**切换导线**弹出菜单项。或者，使用 Tab 快捷键切换导线。当第一条差分对导线完成时，另一条导线会自动选择完成。

👀‍**结果**

如果您启用了设计规则检查(DRC)预防模式，并且在尝试完成导线时收到错误消息，或者操作未完成，**右键**单击并单击**解释最后错误**弹出菜单项。DRC 会解释原因。如果您使错误标记可见，则会出现错误标记。如果您启用了 DRC 解释模式，DRC 会自动解释错误，您可以接受错误（**右键**单击并单击**继续错误**弹出菜单项）或拒绝它（按 Esc 键或**右键**单击并单击**取消**弹出菜单项）。

如果您使用 DRC 预防或解释模式进行间距检查，可以暂时关闭间距检查以完成导线。为此，在布线时，**右键**单击并单击**检查间距**弹出菜单项。然后您可以完成导线，即使您正在创建间距违规。在间距检查关闭时，您可以违反间距边界并创建间距违规。当您单击完成操作时，错误标记会出现在工作区中每个错误的位置，错误消息会出现在电子表格窗口中。您可以在间距检查关闭时继续其他操作。要在布线期间重新激活间距检查，**右键**单击并单击**检查间距**弹出菜单项。


🙊**限制**

您只能在交互式布线、导线编辑和放置编辑操作中使用 DRC。

#### 以过孔对或测试点对结束差分对导线

您可以选择用过孔对或测试点对来结束导线。

🙊**限制**

如果当前导线段是圆弧，则不能用过孔或测试点结束任何导线。如果在圆弧中结束导线，无论"结束过孔模式"如何设置，导线都将直接结束而不添加过孔或测试点。

🏃‍♂️‍**步骤**

1. **右键**单击，选择弹出菜单中的**结束过孔模式**，然后点击以下任一结束过孔模式：

	- **无过孔结束** 不添加过孔对直接结束。

	- **过孔结束** 在当前类型的过孔栅格上，以最接近指针的位置用过孔对结束。障碍物会自动避让以容纳过孔对。

	- **测试点结束** 在当前测试点类型的栅格上，以最接近指针的位置用测试点对结束；该过孔对同时也是测试点。障碍物会自动避让以容纳过孔对。

	SailWind Router 将使用您选择的结束过孔模式，直到您选择新模式。

2. 按 Ctrl+单击用过孔或测试点结束导线，或**右键**单击并选择弹出菜单中的**结束**。

#### 以未完成状态结束差分对导线

您可以选择在中间位置结束导线，稍后再完成布线。

🏃‍♂️‍**步骤**

1. **右键**单击并选择弹出菜单中的**结束**。除非是从圆弧结束，否则必须将结束过孔模式设置为"无过孔结束"。（从圆弧结束时，导线会自动以无过孔或测试点的方式结束。）

2. 如果在完成点上点击**结束**（弹出菜单项），导线将完成而非结束。

3. 当您结束导线时，如果在"选项对话框 > 布线类别 > 常规子类别"中选中"完成时平滑导线"复选框，将自动运行平滑处理。

**删除过孔**

选择自动布线

### 分割差分对导线

在控制间距区域布线差分对时，您可以分割导线以绕过障碍物。当无法同时绕过障碍物时，可能需要分割差分对导线。SailWind Router 始终在起始区和结束区启用分割功能。

🙊**限制**

差分对只能绕过小型障碍物分割，如通孔和通孔管脚。

🏃‍♂️‍**步骤**

1. 在交互式布线过程中，**右键**单击并选择弹出菜单中的**分割导线段**。

2. 下一次点击将完成分割操作，允许您继续交互式布线差分对。

## 布线时更改导线属性

必要时，您可以在交互式布线过程中更改导线属性。

🏃‍♂️‍**步骤**

1. 要在布线时切换层，**右键**单击，选择弹出菜单中的**层**，然后选择要继续布线的层。导线段（从最后一个拐角或导线起点开始）将移动到新层。

要选择未列出的层，点击**选择**弹出菜单项。

或者，**右键**单击并选择弹出菜单中的**层切换**切换到层对中的另一层。您也可以使用 Alt+滚轮按钮滚动切换层。

更多信息，请参阅第 126 页的"使用滚轮滚动切换层"。

必要时，当您切换层时，软件会自动添加或移除过孔（当前过孔类型）。如果过孔同时也是测试点，软件不会移除它们。

2. 要在布线时更改导线宽度，**右键**单击，选择弹出菜单中的**宽度**，然后点击宽度值。要输入未列出的宽度，点击**设置**（弹出菜单项）。

更多信息，请参阅第 353 页的"更改导线宽度"。

3. 要在布线时更改布线角度，**右键**单击，选择弹出菜单中的**布线角度**，然后点击所需角度。

4. 要在动态布线和手动布线之间切换，**右键**单击并选择弹出菜单中的**动态布线**。该选项旁的勾选标记表示已启用。

5. 要临时更改推挤设置以完成导线，**右键**单击并选择以下选项之一：

	- **向后推挤导线** 允许推挤器在交互式布线时将导线推到指针后方。

	- **无推挤** 关闭当前导线的推挤功能。

	- **点击后推挤** 在您添加拐角或过孔后重新布线障碍物。如果选择"点击后推挤"，则仅在输入拐角或过孔后才会推挤。

	- **随指针推挤** 在移动指针时重新布线障碍物。作为替代方案，在布线时按住 Alt 键可在实时推挤和指针引导推挤之间临时切换。使用引导推挤时，潜在路径显示为绿色，但如果路径遇到不可移动物体则变为黄色。如果当前导线颜色为绿色或黄色，SailWind Router 会改用白色和红色。

	- **拆除阻碍导线** 取消布线障碍物。