# 第 13 章 元件放置

SailWind Router 提供全面的元件放置命令，可实现元件的精确定位。SailWind Router 还包含可在初始放置期间或之后移动、翻转、旋转和旋转元件的命令。

## 放置元件 ಠ_ಠ

使用放置命令在电路板上移动元件。

SailWind Router 的元件放置命令与 SailWind Layout 中的略有不同。请熟悉放置规则和选项以充分理解放置命令及其结果。

您可以手动修改元件放置，也可以编辑元件特性。

要手动放置元件或元件组，您需要结合使用指针操作与移动、旋转、翻转命令。

要编辑元件或元件组的放置位置，您可以在元件特性对话框的 **元件** 选项卡中修改 X/Y 位置、旋转或层特性。

在放置操作期间，元件原点会吸附到放置网格上，除非遇到以下情况：

- 您使用旋转命令放置元件

- 您通过编辑其 X/Y 或旋转特性来放置元件

- 您在设计特性对话框的 **网格** 选项卡中清除了放置网格的吸附复选框

设置定义移动方式和 DRC 执行方式的选项和首选项后，您可以移动元件。您还可以旋转元件、将其旋转 90 度或将其翻转到电路板的另一侧。

使用放置工具栏激活放置命令。

> [!tip] 在对象模式下，**右键**单击选定的元件时，快捷菜单中也提供放置命令。

一般来说，放置命令的行为与 SailWind Layout 中的放置命令类似。

以下列表总结了本程序中不同的主要放置行为：

- 为元件或元件组设置原点

- 将元件组作为一个整体旋转和翻转，使用一个统一的组原点

- 无论元件位于电路板的哪一侧，都按逆时针方向旋转元件

- 设置旋转的角度增量值

- 在放置期间重新布线

- 禁止移动组合、重用、阵列、任意元件和导线集、铜箔、文本、2D 线或禁止区域


> [!tip] 您可以通过编辑元件特性来放置元件。在元件特性对话框的 **元件** 选项卡中修改 X/Y 位置、旋转或层特性。

## 元件放置规则 ಠ_ಠ

在放置操作期间，元件遵循定义设计对象之间间距的特定规则。

两个元件之间的间距定义为元件放置边框之间的最小距离。

在放置操作期间，SailWind Router 会检查选定元件与其他元件之间的间距是否符合以下对象关系：

- 元件到元件间距

- 元件到板框间距

- 元件到板切割边框间距

软件从用于创建元件放置边框的线中心线测量到以下位置的距离：

- 另一个元件放置边框的中心线

- 板框的中心线

- 定义板切割的线中心线

SailWind Layout 封装编辑器允许您使用 2D 线在 20 层上创建元件放置边框的表示。

软件按以下方式识别这些放置边框：

- 当零件在 SailWind Layout 中导入设计时，此边框从一组 2D 线转换为 20 层上的放置边框设计对象。可见性由显示颜色对话框中 20 层顶部/底部对象列的颜色块控制。

- 当设计在 SailWind Router 中打开时，软件会识别 20 层上的此放置边框对象，并将其转换为 SailWind Router 放置边框对象，其可见性由 **选项** 菜单项、颜色类别中的顶部放置或底部放置列中的颜色块单独控制。放置边框设计对象的可见性不再与 20 层关联。

- 如果未检测到元件的 20 层放置边框，系统会自动生成一个包含 PCB 封装中所有对象的边框。软件将其识别为 SailWind Router 放置边框对象，其可见性也由 **选项** 菜单项、颜色类别中的顶部放置或底部放置列中的颜色块单独控制。

- 从 20 层放置边框派生的放置边框对象和自动生成的放置边框对象在 SailWind Router 中被同等对待，DRC 或设计验证过程不会对它们进行区分。

- 自动生成的 SailWind Router 放置边框设计对象在当前设计会话中是临时的。当设计返回 SailWind Layout 时，软件会从数据库中删除这些设计对象。任何 20 层放置边框设计对象的可见性将恢复为由 SailWind Layout 中的 20 层控制。

在放置操作期间，SailWind Router 会检查选定元件的高度和禁止区域高度设置。如果您将元件放置到禁止区域中，并且元件的高度超过禁止区域的高度设置，则会报告放置 DRC 违规。

> [!tip] 使用 SailWind Layout 中的布局编辑器，您可以在主要元件侧、次要元件侧或电路板两侧设置元件高度禁止区域的几何形状。您可以通过编辑其特性来修改禁止区域的高度。

## 放置元件与 DRC ಠ_ಠ

SailWind Router 会检查已放置元件与其他对象之间的设计规则，但不会检查已放置元件或元件组上对象之间的设计规则。当您使用移动或旋转时，放置专用 DRC 违规会在您完成放置之前突出显示。

> [!tip] 对于完全放置在板框外的元件或元件组，不会进行设计规则检查。但是，如果元件或元件组部分或完全放置在板框内，则会进行设计规则检查。

当发生 DRC 违规时，设计规则检查对话框中的错误响应设置决定了放置命令的完成方式并报告违规。

| 错误响应 | 对 DRC 违规的放置响应 | DRC 违规报告 |
|----------|---------------------|-------------|
| 阻止     | 软件拒绝新的放置位置并将元件返回到其原始位置。<br>对于移动和旋转，元件保持附着在指针上，直到您选择无错误位置、暂停放置（查看 DRC 违规）或取消放置。<br>对于旋转和翻转，元件会短暂出现在新位置，然后返回原始位置。 | 当元件在移动或旋转期间保持附着在指针上时，要查看 DRC 违规报告，请**右键**单击然后单击解释最后错误。电子表格窗口显示 DRC 违规。<br>当元件在旋转或旋转期间返回原始位置时，要查看 DRC 违规报告，请单击暂停工具栏上的解释最后错误按钮。电子表格窗口显示 DRC 违规。 |
| 解释     | 放置暂停以进入显示最后错误模式。 | 电子表格窗口显示 DRC 违规。 |
| 警告     | 放置完成。 | 电子表格窗口显示 DRC 违规。 |

**表 61. 错误响应设置的影响**

> [!tip] 当在设计规则检查对话框中选择了多个错误响应列表设置时，优先级最高的设置生效。"阻止"具有最高优先级，"警告"具有最低优先级。

## 设置制造规则控制放置

您可以设置元件之间的最小间距值和默认元件高度限制。


> [!tip] 如果元件与另一个元件的距离小于您在 **选项** 菜单项、制造类别中设置的"元件间最小间距"值，则无法放置该元件。

> [!tip] 如果您在 SailWind Layout 中为元件设置了 Geometry.Height 特性，当特性值超过您在 **选项** 菜单项、制造类别中设置的高度时，您无法在 SailWind Router 中放置该元件。

🏃‍♂️‍**步骤**

1. 单击 **工具 > 选项** 菜单项；然后在选项对话框中，单击制造类别。

2. 在元件组装区域，指定放置规则设置。

3. 单击 **确定** 接受设置并关闭选项对话框。


> [!tip] 要启用放置规则检查，请在 DRC 筛选工具栏上选择放置，然后在设计规则检查对话框中设置所需的响应操作。

## 添加禁止区域

您可以向设计添加禁止区域，以定义不能放置设计对象的区域。您可以使用闭合多边形（带或不带弧）、圆形或矩形创建禁止区域。当前角度模式和设计网格设置决定线的放置。

您在 SailWind Router 中创建的禁止区域会随设计一起传输到 SailWind Layout 中打开。

🏃‍♂️‍**步骤**

1. 单击 **绘图操作** 工具栏按钮。

2. 在绘图操作工具栏上，单击禁止区域按钮。

3. 为禁止区域创建以下形状之一：

    - 创建多边形绘图对象

    - 创建圆形绘图对象

    - 创建矩形绘图对象

4. 在出现的"禁止区域特性对话框"第 495 页中，指定要放置禁止区域的层和要应用的限制。

    🙊**限制**

    选择层分配时，如果某限制不适用于该层，则其对应的复选框不可用。例如，如果选择非放置层，则放置复选框不可用。

5. 单击**确定**。

软件创建禁止区域。如果您创建其他禁止区域，它们将使用此处设置的限制作为默认值。

👀‍**结果**

禁止区域显示为选项对话框 > 全局类别 > "常规子类别"第 441 页中选择的填充图案。

## 移动已布线元件

SailWind Router 根据选项对话框 **放置** 选项卡中的移动扇出和重新布线设置来操作已放置元件管脚上连接的导线。当您启用移动扇出设置时，SailWind Router 会将识别为扇出的导线和过孔与元件一起放置。

下图显示了一个选定元件及其扇出。

**图 32. 选定元件的扇出**

![](/router/guide/13/_page_6_Picture_2.jpeg)

"移动带扇出的元件"设置优先于重新布线模式设置。如果选中"移动带扇出的元件"复选框，扇出导线和过孔会随元件一起移动。相反，如果清除该复选框，扇出导线和过孔将受重新布线模式设置的影响。

如果 SailWind Router 无法在无 DRC 违规的情况下布线网络，并且您在设计规则检查对话框中将错误响应设置为"阻止"或"解释"，则网络将保持未布线状态。但是，如果您将错误响应设置为"警告"，软件将以直线鼠巢模式布线任何无法以其他方式重新布线且无 DRC 违规的网络。

## 设置放置原点

您可以更改元件或元件组的放置原点。

🏃‍♂️‍**步骤**

1. 单击 **工具 > 选项** 菜单项；然后在选项对话框中，单击全局类别 > 常规子类别。

2. 在"对象移动"区域，单击"移动对象方式"列表并选择"原点"。

3. 单击 **确定**。

4. 在放置工具栏上，单击 **选择模式** 按钮。

5. 选择元件或元件组。

6. **右键**单击并单击 **设置移动原点** 弹出菜单项。

7. 移动指针并单击以设置新原点。

   您指定的原点仅适用于当前选择。当您进行新选择时，移动原点将恢复为元件上的原始位置。

   如果您未指定新原点，SailWind Router 将使用选定元件的原始原点。如果您选择一组元件，软件会将原点计算为选定组的左下角。

8. 单击 **是** 确认新原点或单击 **否** 选择另一个原点。


> [!tip] 在移动模式下无法设置移动原点。

## 放置元件组成员

如果您对元件组使用移动、旋转、翻转命令，元件组原点将成为放置操作的焦点，而成员之间的相对位置保持不变。相反，如果您编辑元件特性，则单个元件原点将成为放置操作的焦点，元件组成员之间的相对位置会发生变化。

[图 33](#page-7-1)和[图 34](#page-7-2)显示了旋转命令如何放置元件组成员。

**图 33. 默认元件组原点与初始元件位置**

![](/router/guide/13/_page_7_Picture_10.jpeg)

**图 34. 旋转命令完成后的元件位置**

[图 35](#page-8-0)和[图 36](#page-8-1)显示了设置方向特性如何放置元件组成员。

![](/router/guide/13/_page_8_Figure_1.jpeg)


**图 36. 将元件组的方向特性设置为 90 后的元件位置**

![](/router/guide/13/_page_8_Figure_4.jpeg)

## 移动元件

您可以单独或成组移动元件。SailWind Router 提供了多种移动元件的方法。

> [!tip] 当元件附着在指针上时，对于除拖放之外的所有模式，您可以**右键**单击以启动另一个命令、更改元件特性或使用快捷键更改工作区视图。

| 移动模式 | 描述 |
|----------|------|
| 使用对象模式移动元件 | 通过先选择元件然后选择移动来移动元件。 |
| 使用移动模式移动元件 | 通过选择移动模式然后选择元件来移动元件。 |
| 使用拖拽附着模式移动元件 | 通过用鼠标拖动元件并单击放置来移动元件。 |
| 使用拖放模式移动元件 | 通过用鼠标拖动元件并释放鼠标按钮"放置"来移动元件。 |

### 使用对象模式移动元件

通过先选择元件然后选择移动来移动元件。

😎**前提**

设置对象移动特性。有关更多信息，请参见全局/常规选项第 441 页的对象移动区域

🏃‍♂️‍**步骤**

1. 选择要移动的元件。

2. **右键**单击并单击 **移动** 弹出菜单项。或者，**布局 > 移动元件** 按钮。

3. 将指针移动到新位置并单击以完成移动。

如果新元件位置导致 DRC 错误，并且您在设计规则检查对话框中将 DRC 设置为阻止，则移动命令将保持附着在指针上。您可以暂停移动命令以检查 DRC 错误。

有关更多信息，请参见"操作期间检查 DRC 错误"第 194 页

### 使用移动模式移动元件

通过选择移动模式然后选择元件来移动元件。

😎**前提**

设置对象移动特性。有关更多信息，请参见全局/常规选项第 441 页的对象移动区域

🏃‍♂️‍**步骤**

1. 单击 **布局 > 移动元件**  按钮。

2. 选择要移动的元件。

3. 将指针移动到新位置并单击以完成移动。

   如果新元件位置导致 DRC 错误，并且您在设计规则检查对话框中将 DRC 设置为阻止，则移动命令将保持附着在指针上。您可以暂停移动命令以检查 DRC 错误。

   有关更多信息，请参见"操作期间检查 DRC 错误"第 194 页。

4. 根据需要重复步骤 2 和 3 以移动其他元件。

5. 按 Esc 键退出移动模式。

### 使用拖拽附着模式移动元件

通过鼠标拖拽并点击放置来移动元件。

😎**前提**

设置对象移动特性。更多信息请参阅第 441 页的"全局/常规选项"中的"对象移动"部分

🏃‍♂️‍**步骤**

1. 点击**工具 > 选项**菜单项；然后在选项对话框中点击全局/常规页面。

2. 在"对象移动"区域，点击"拖拽对象使用"列表并选择"拖拽附着"。

3. 点击**确定**。

4. 选择需要移动的元件。

5. 在元件上按住鼠标左键，开始拖拽元件，然后释放左键将元件附着到指针上。

6. 将指针移动到新位置并点击完成移动。

   如果新元件位置导致 DRC 错误，并且您在"设计规则检查"对话框中设置 DRC 为"阻止"，则移动命令将保持附着在指针上。您可以暂停移动命令来检查 DRC 错误。更多信息请参阅第 194 页的"操作期间检查 DRC 错误"。

### 使用拖拽放置模式移动元件

通过鼠标拖拽并释放鼠标按钮"放置"来移动元件。

😎**前提**

设置对象移动特性。更多信息请参阅第 441 页的"全局/常规选项"中的"对象移动"部分

🏃‍♂️‍**步骤**

1. 点击**工具 > 选项**菜单项；然后在选项对话框中点击全局/常规页面。

2. 在"对象移动"区域，点击"拖拽对象使用"列表并选择"拖拽放置"。

3. 点击**确定**。

4. 选择需要移动的元件并释放鼠标左键。

5. 在元件上按住鼠标左键，然后移动指针开始拖拽移动。

6. 将指针移动到新位置并释放左键完成移动。

   如果新元件位置导致 DRC 错误，并且您在"设计规则检查"对话框中设置 DRC 为"阻止"，则移动命令将保持附着在指针上。您可以暂停移动命令来检查 DRC 错误。更多信息请参阅第 194 页的"操作期间检查 DRC 错误"。

## 顺序放置元件

使用"顺序移动"命令将一组选中的元件逐个附着到光标上以便在设计中放置。

顺序移动元件有两种方法：

| 方法                                                                 | 描述                                                                                                   |
|----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| 使用查找对话框<br>放置元件                                           | 使用查找对话框选择元件并应用<br>顺序移动命令。                                                        |
| 通过在工作区<br>选择元件放置                                         | 您在工作区域选择元件并使用无模<br>命令来应用顺序移动命令。                                            |

### 使用查找对话框放置元件

使用查找对话框选择元件并应用顺序移动命令。

🏃‍♂️‍**步骤**

1. 点击**编辑 > 查找**菜单项。

2. 在查找对话框中，将"查找依据"选项设置为"参考标识符、元件类型"或"封装"。

   > [!tip] 选择多个参考标识前缀、元件类型或封装以扩展可用元件列表。

3. 从结果列表中选择所有需要移动的元件。

   > [!tip] 使用 Shift+点击选择连续元件，或 Ctrl+点击选择多个元件。

4. 在操作列表中选择"顺序移动"。

5. 点击**确定**。

6. 在提示"继续下一个对象？(值)"中点击以下选项之一：

    - **是** 将元件依次附着到光标上，但每次放置后提示以便跳过不需要的元件

    - **全部是** 如果选择的字母数字顺序合适且您不打算跳过元件

    - **否** 跳过当前元件，转到下一个

    - **取消** 中止过程。您将返回查找对话框。

7. 第一个元件附着到指针上准备放置（元件按参考标识升序附着到指针上）。点击放置元件。


> [!tip] 当元件附着到指针上时，您可以右键点击访问"旋转 90 度"、"旋转模式"或"翻转"命令，也可以使用无模命令。


> [!warning] 您可以根据选项对话框**全局**类别 > **常规**子类别中的设置，通过元件的原点或中点移动元件。

### 通过在工作区选择元件放置

您在工作区域选择元件并使用无模命令来应用顺序移动命令。

🏃‍♂️‍**步骤**

1. 在工作区域，未选择任何对象时右键点击并选择弹出菜单中的**选择元件**。

2. 使用 Ctrl+点击选择所有需要移动的元件。

   > [!tip] 元件按选择的反序附着到指针上。最后选择的元件将第一个附着到指针上。

3. 输入无模命令 MS 然后按 Enter。

4. 在提示"继续下一个对象？(值)"中点击以下选项之一：

    - **是** 将元件依次附着到光标上，但每次放置后提示以便跳过不需要的元件

    - **全部是** 如果选择的字母数字顺序合适且您不打算跳过元件

    - **否** 跳过当前元件，转到下一个

    - **取消** 中止过程。您将返回查找对话框。

5. 第一个元件附着到指针上准备放置。点击放置元件。

> [!tip] 当元件附着到指针上时，您可以右键点击访问"旋转 90 度"、"旋转模式"或"翻转"命令，也可以使用无模命令。

> [!warning] 您可以根据第 441 页的常规选项设置，通过元件的原点或中点移动元件。

## 操作元件

您可以旋转、翻转元件或将元件从 PCB 的一侧翻转到另一侧。

🏃‍♂️‍**步骤**

使用对象模式或移动模式操作元件如下：

| 模式     | 步骤                                                         |
| -------- | ------------------------------------------------------------ |
| 对象模式 | 1. 选择要操作的元件或元件组。                                |
|          | 2. 右键点击并选择"翻面"、"旋转 90 度"或"旋转"弹出菜单项。    |
|          | 3. 如果选择"旋转"弹出菜单项，移动指针到新位置并释放鼠标左键完成旋转。 |
|          | 如果操作元件导致 DRC 错误，并且 DRC设置设为"阻止"，元件将返回原始位置（对于"旋转"弹出菜单项，则保持附着在光标上）。 |
| 移动模式 | 1. 在放置工具栏上点击"翻面"、"旋转 90 度"或"旋转"按钮。      |
|          | 2. 点击要操作的元件。                                        |
|          | 3. （仅旋转按钮）点击指定新的旋转角度以完成元件旋转。        |
|          | 4. 按 Esc 键退出移动模式                                     |

## 测量对象间距离

您可以测量元件之间的距离以辅助精确放置。

使用以下任一方法测量对象间距离。

### 使用原位查询测量对象间距离

原位查询允许您通过选择对象来测量元件之间的距离。

🏃‍♂️‍**步骤**

1. 在主工具栏上点击**原位查询**按钮。

2. 选择一个对象。

3. 指向第二个对象。

对象间的最短距离将显示，如[图 37](#page-16-3)所示

**图 37. 从左到右测量过孔间距离**

![](/router/guide/13/_page_16_Picture_13.jpeg)

### 使用 Q 快捷键测量对象间距离

Q 快捷键将测量线附着到指针上，并根据指针移动显示 dx、dy 和斜边信息。当网格捕捉开启时，它会捕捉到布线网格。当网格捕捉关闭时，Q 快捷键将在无网格情况下进行测量。

🏃‍♂️‍**步骤**

1. 将指针定位在第一个对象上。

2. 按下 q 键并点击**执行**。

3. 将指针定位在第二个对象上以显示 dx、dy 和斜边("d")信息。

   > [!tip] 点击重新开始测量。

   > [!tip] Ctrl+点击将新的测量线附着到当前测量线上并显示总长度。

4. 按 Esc 键退出测量功能。